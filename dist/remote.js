(function t(e,n,r){function i(s,u){if(!n[s]){if(!e[s]){var a=typeof require=="function"&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return i(n?n:t)},h,h.exports,t,e,n,r)}return n[s].exports}var o=typeof require=="function"&&require;for(var s=0;s<r.length;s++)i(r[s]);return i})({1:[function(t,e,n){var r=e.exports={};var i=[];var o=false;var s;var u=-1;function a(){o=false;if(s.length){i=s.concat(i)}else{u=-1}if(i.length){c()}}function c(){if(o){return}var t=setTimeout(a);o=true;var e=i.length;while(e){s=i;i=[];while(++u<e){s[u].run()}u=-1;e=i.length}s=null;o=false;clearTimeout(t)}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n]}}i.push(new h(t,e));if(!o){setTimeout(c,0)}};function h(t,e){this.fun=t;this.array=e}h.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function f(){}r.on=f;r.addListener=f;r.once=f;r.off=f;r.removeListener=f;r.removeAllListeners=f;r.emit=f;r.binding=function(t){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(t){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},{}],2:[function(require,module,exports){(function(){var h,aa=this;function n(t){return void 0!==t}function ba(){}function ca(t){t.ub=function(){return t.tf?t.tf:t.tf=new t}}function da(t){var e=typeof t;if("object"==e)if(t){if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function ea(t){return"array"==da(t)}function fa(t){var e=da(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"string"==typeof t}function ga(t){return"number"==typeof t}function ha(t){return"function"==da(t)}function ia(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function ja(t,e,n){return t.call.apply(t.bind,arguments)}function ka(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(n,r);return t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function q(t,e,n){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return q.apply(null,arguments)}var la=Date.now||function(){return+new Date};function ma(t,e){function n(){}n.prototype=e.prototype;t.Zg=e.prototype;t.prototype=new n;t.prototype.constructor=t;t.Vg=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function r(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function na(t,e){var n={},r;for(r in t)n[r]=e.call(void 0,t[r],r,t);return n}function oa(t,e){for(var n in t)if(!e.call(void 0,t[n],n,t))return!1;return!0}function pa(t){var e=0,n;for(n in t)e++;return e}function qa(t){for(var e in t)return e}function ra(t){var e=[],n=0,r;for(r in t)e[n++]=t[r];return e}function sa(t){var e=[],n=0,r;for(r in t)e[n++]=r;return e}function ta(t,e){for(var n in t)if(t[n]==e)return!0;return!1}function ua(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r}function va(t,e){var n=ua(t,e,void 0);return n&&t[n]}function wa(t){for(var e in t)return!1;return!0}function xa(t){var e={},n;for(n in t)e[n]=t[n];return e}var ya="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function za(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<ya.length;o++)n=ya[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Aa(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)}function Ba(){this.Pd=void 0}function Ca(t,e,n){switch(typeof e){case"string":Da(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?e:"null");break;case"boolean":n.push(e);break;case"undefined":n.push("null");break;case"object":if(null==e){n.push("null");break}if(ea(e)){var r=e.length;n.push("[");for(var i="",o=0;o<r;o++)n.push(i),i=e[o],Ca(t,t.Pd?t.Pd.call(e,String(o),i):i,n),i=",";n.push("]");break}n.push("{");r="";for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i=e[o],"function"!=typeof i&&(n.push(r),Da(o,n),n.push(":"),Ca(t,t.Pd?t.Pd.call(e,o,i):i,n),r=","));n.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof e)}}var Ea={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},Fa=/\uffff/.test("ï¿¿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function Da(t,e){e.push('"',t.replace(Fa,function(t){if(t in Ea)return Ea[t];var e=t.charCodeAt(0),n="\\u";16>e?n+="000":256>e?n+="00":4096>e&&(n+="0");return Ea[t]=n+e.toString(16)}),'"')}function Ga(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^la()).toString(36)}var Ha;t:{var Ia=aa.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break t}}Ha=""}function Ka(){this.Wa=-1}function La(){this.Wa=-1;this.Wa=64;this.R=[];this.le=[];this.Tf=[];this.Id=[];this.Id[0]=128;for(var t=1;t<this.Wa;++t)this.Id[t]=0;this.be=this.$b=0;this.reset()}ma(La,Ka);La.prototype.reset=function(){this.R[0]=1732584193;this.R[1]=4023233417;this.R[2]=2562383102;this.R[3]=271733878;this.R[4]=3285377520;this.be=this.$b=0};function Ma(t,e,n){n||(n=0);var r=t.Tf;if(p(e))for(var i=0;16>i;i++)r[i]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(i=0;16>i;i++)r[i]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(i=16;80>i;i++){var o=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(o<<1|o>>>31)&4294967295}e=t.R[0];n=t.R[1];for(var s=t.R[2],u=t.R[3],a=t.R[4],c,i=0;80>i;i++)40>i?20>i?(o=u^n&(s^u),c=1518500249):(o=n^s^u,c=1859775393):60>i?(o=n&s|u&(n|s),c=2400959708):(o=n^s^u,c=3395469782),o=(e<<5|e>>>27)+o+a+c+r[i]&4294967295,a=u,u=s,s=(n<<30|n>>>2)&4294967295,n=e,e=o;t.R[0]=t.R[0]+e&4294967295;t.R[1]=t.R[1]+n&4294967295;t.R[2]=t.R[2]+s&4294967295;t.R[3]=t.R[3]+u&4294967295;t.R[4]=t.R[4]+a&4294967295}La.prototype.update=function(t,e){if(null!=t){n(e)||(e=t.length);for(var r=e-this.Wa,i=0,o=this.le,s=this.$b;i<e;){if(0==s)for(;i<=r;)Ma(this,t,i),i+=this.Wa;if(p(t))for(;i<e;){if(o[s]=t.charCodeAt(i),++s,++i,s==this.Wa){Ma(this,o);s=0;break}}else for(;i<e;)if(o[s]=t[i],++s,++i,s==this.Wa){Ma(this,o);s=0;break}}this.$b=s;this.be+=e}};var t=Array.prototype,Na=t.indexOf?function(e,n,r){return t.indexOf.call(e,n,r)}:function(t,e,n){n=null==n?0:0>n?Math.max(0,t.length+n):n;if(p(t))return p(e)&&1==e.length?t.indexOf(e,n):-1;for(;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Oa=t.forEach?function(e,n,r){t.forEach.call(e,n,r)}:function(t,e,n){for(var r=t.length,i=p(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},Pa=t.filter?function(e,n,r){return t.filter.call(e,n,r)}:function(t,e,n){for(var r=t.length,i=[],o=0,s=p(t)?t.split(""):t,u=0;u<r;u++)if(u in s){var a=s[u];e.call(n,a,u,t)&&(i[o++]=a)}return i},Qa=t.map?function(e,n,r){return t.map.call(e,n,r)}:function(t,e,n){for(var r=t.length,i=Array(r),o=p(t)?t.split(""):t,s=0;s<r;s++)s in o&&(i[s]=e.call(n,o[s],s,t));return i},Ra=t.reduce?function(e,n,r,i){for(var o=[],s=1,u=arguments.length;s<u;s++)o.push(arguments[s]);i&&(o[0]=q(n,i));return t.reduce.apply(e,o)}:function(t,e,n,r){var i=n;Oa(t,function(n,o){i=e.call(r,i,n,o,t)});return i},Sa=t.every?function(e,n,r){return t.every.call(e,n,r)}:function(t,e,n){for(var r=t.length,i=p(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&!e.call(n,i[o],o,t))return!1;return!0};function Ta(t,e){var n=Ua(t,e,void 0);return 0>n?null:p(t)?t.charAt(n):t[n]}function Ua(t,e,n){for(var r=t.length,i=p(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&e.call(n,i[o],o,t))return o;return-1}function Va(e,n){var r=Na(e,n);0<=r&&t.splice.call(e,r,1)}function Wa(e,n,r){return 2>=arguments.length?t.slice.call(e,n):t.slice.call(e,n,r)}function Xa(t,e){t.sort(e||Ya)}function Ya(t,e){return t>e?1:t<e?-1:0}var Za=-1!=Ha.indexOf("Opera")||-1!=Ha.indexOf("OPR"),$a=-1!=Ha.indexOf("Trident")||-1!=Ha.indexOf("MSIE"),ab=-1!=Ha.indexOf("Gecko")&&-1==Ha.toLowerCase().indexOf("webkit")&&!(-1!=Ha.indexOf("Trident")||-1!=Ha.indexOf("MSIE")),bb=-1!=Ha.toLowerCase().indexOf("webkit");(function(){var t="",e;if(Za&&aa.opera)return t=aa.opera.version,ha(t)?t():t;ab?e=/rv\:([^\);]+)(\)|;)/:$a?e=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:bb&&(e=/WebKit\/(\S+)/);e&&(t=(t=e.exec(Ha))?t[1]:"");return $a&&(e=(e=aa.document)?e.documentMode:void 0,e>parseFloat(t))?String(e):t})();var cb=null,db=null,eb=null;function fb(t,e){if(!fa(t))throw Error("encodeByteArray takes an array as a parameter");gb();for(var n=e?db:cb,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,u=s?t[i+1]:0,a=i+2<t.length,c=a?t[i+2]:0,h=o>>2,o=(o&3)<<4|u>>4,u=(u&15)<<2|c>>6,c=c&63;a||(c=64,s||(u=64));r.push(n[h],n[o],n[u],n[c])}return r.join("")}function gb(){if(!cb){cb={};db={};eb={};for(var t=0;65>t;t++)cb[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),db[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t),eb[db[t]]=t,62<=t&&(eb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t)]=t)}}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function hb(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ib(t){var e={};hb(t,function(t,n){e[t]=n});return e}function jb(t){var e=[];hb(t,function(t,n){ea(n)?Oa(n,function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))});return e.length?"&"+e.join("&"):""}function kb(t){var e={};t=t.replace(/^\?/,"").split("&");Oa(t,function(t){t&&(t=t.split("="),e[t[0]]=t[1])});return e}function x(t,e,n,r){var i;r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n);if(i)throw Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function z(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t=t+" failed: "+(r+" argument ")}function A(t,e,r,i){if((!i||n(r))&&!ha(r))throw Error(z(t,e,i)+"must be a valid function.")}function lb(t,e,r){if(n(r)&&(!ia(r)||null===r))throw Error(z(t,e,!0)+"must be a valid context object.")}function mb(t){return"undefined"!==typeof JSON&&n(JSON.parse)?JSON.parse(t):Aa(t)}function B(t){if("undefined"!==typeof JSON&&n(JSON.stringify))t=JSON.stringify(t);else{var e=[];Ca(new Ba,t,e);t=e.join("")}return t}function nb(){this.Sd=C}nb.prototype.j=function(t){return this.Sd.oa(t)};nb.prototype.toString=function(){return this.Sd.toString()};function ob(){}ob.prototype.pf=function(){return null};ob.prototype.xe=function(){return null};var pb=new ob;function qb(t,e,n){this.Qf=t;this.Ka=e;this.Hd=n}qb.prototype.pf=function(t){var e=this.Ka.D;if(rb(e,t))return e.j().M(t);e=null!=this.Hd?new sb(this.Hd,!0,!1):this.Ka.u();return this.Qf.Xa(t,e)};qb.prototype.xe=function(t,e,n){var r=null!=this.Hd?this.Hd:tb(this.Ka);t=this.Qf.me(r,e,1,n,t);return 0===t.length?null:t[0]};function ub(){this.tb=[]}function vb(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.Yb();null===n||o.Z(n.Yb())||(t.tb.push(n),n=null);null===n&&(n=new wb(o));n.add(i)}n&&t.tb.push(n)}function xb(t,e,n){vb(t,n);yb(t,function(t){return t.Z(e)})}function zb(t,e,n){vb(t,n);yb(t,function(t){return t.contains(e)||e.contains(t)})}function yb(t,e){for(var n=!0,r=0;r<t.tb.length;r++){var i=t.tb[r];if(i)if(i=i.Yb(),e(i)){for(var i=t.tb[r],o=0;o<i.sd.length;o++){var s=i.sd[o];if(null!==s){i.sd[o]=null;var u=s.Ub();Ab&&Bb("event: "+s.toString());Cb(u)}}t.tb[r]=null}else n=!1}n&&(t.tb=[])}function wb(t){this.qa=t;this.sd=[]}wb.prototype.add=function(t){this.sd.push(t)};wb.prototype.Yb=function(){return this.qa};function D(t,e,n,r){this.type=t;this.Ja=e;this.Ya=n;this.Je=r;this.Nd=void 0}function Db(t){return new D(Eb,t)}var Eb="value";function Fb(t,e,n,r){this.te=e;this.Wd=n;this.Nd=r;this.rd=t}Fb.prototype.Yb=function(){var t=this.Wd.lc();return"value"===this.rd?t.path:t.parent().path};Fb.prototype.ye=function(){return this.rd};Fb.prototype.Ub=function(){return this.te.Ub(this)};Fb.prototype.toString=function(){return this.Yb().toString()+":"+this.rd+":"+B(this.Wd.lf())};function Gb(t,e,n){this.te=t;this.error=e;this.path=n}Gb.prototype.Yb=function(){return this.path};Gb.prototype.ye=function(){return"cancel"};Gb.prototype.Ub=function(){return this.te.Ub(this)};Gb.prototype.toString=function(){return this.path.toString()+":cancel"};function sb(t,e,n){this.B=t;this.$=e;this.Tb=n}function Hb(t){return t.$}function rb(t,e){return t.$&&!t.Tb||t.B.Ha(e)}sb.prototype.j=function(){return this.B};function Ib(t){this.dg=t;this.Ad=null}Ib.prototype.get=function(){var t=this.dg.get(),e=xa(t);if(this.Ad)for(var n in this.Ad)e[n]-=this.Ad[n];this.Ad=t;return e};function Jb(t,e){this.Mf={};this.Yd=new Ib(t);this.ca=e;var n=1e4+2e4*Math.random();setTimeout(q(this.Hf,this),Math.floor(n))}Jb.prototype.Hf=function(){var t=this.Yd.get(),e={},n=!1,r;for(r in t)0<t[r]&&u(this.Mf,r)&&(e[r]=t[r],n=!0);n&&this.ca.Te(e);setTimeout(q(this.Hf,this),Math.floor(6e5*Math.random()))};function Kb(){this.Dc={}}function Lb(t,e,r){n(r)||(r=1);u(t.Dc,e)||(t.Dc[e]=0);t.Dc[e]+=r}Kb.prototype.get=function(){return xa(this.Dc)};var Mb={},Nb={};function Ob(t){t=t.toString();Mb[t]||(Mb[t]=new Kb);return Mb[t]}function Pb(t,e){var n=t.toString();Nb[n]||(Nb[n]=e());return Nb[n]}function E(t,e){this.name=t;this.S=e}function Qb(t,e){return new E(t,e)}function Rb(t,e){return Sb(t.name,e.name)}function Tb(t,e){return Sb(t,e)}function Ub(t,e,n){this.type=Vb;this.source=t;this.path=e;this.Ia=n}Ub.prototype.Wc=function(t){return this.path.e()?new Ub(this.source,F,this.Ia.M(t)):new Ub(this.source,G(this.path),this.Ia)};Ub.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ia.toString()+")"};function Wb(t,e){this.type=Xb;this.source=Yb;this.path=t;this.Ve=e}Wb.prototype.Wc=function(){return this.path.e()?this:new Wb(G(this.path),this.Ve)};Wb.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Ve+")"};function Zb(t,e){this.type=$b;this.source=t;this.path=e}Zb.prototype.Wc=function(){return this.path.e()?new Zb(this.source,F):new Zb(this.source,G(this.path))};Zb.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"};function ac(t,e){this.La=t;this.xa=e?e:bc}h=ac.prototype;h.Na=function(t,e){return new ac(this.La,this.xa.Na(t,e,this.La).X(null,null,!1,null,null))};h.remove=function(t){return new ac(this.La,this.xa.remove(t,this.La).X(null,null,!1,null,null))};h.get=function(t){for(var e,n=this.xa;!n.e();){e=this.La(t,n.key);if(0===e)return n.value;0>e?n=n.left:0<e&&(n=n.right)}return null};function cc(t,e){for(var n,r=t.xa,i=null;!r.e();){n=t.La(e,r.key);if(0===n){if(r.left.e())return i?i.key:null;for(r=r.left;!r.right.e();)r=r.right;return r.key}0>n?r=r.left:0<n&&(i=r,r=r.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}h.e=function(){return this.xa.e()};h.count=function(){return this.xa.count()};h.Rc=function(){return this.xa.Rc()};h.ec=function(){return this.xa.ec()};h.ha=function(t){return this.xa.ha(t)};h.Wb=function(t){return new dc(this.xa,null,this.La,!1,t)};h.Xb=function(t,e){return new dc(this.xa,t,this.La,!1,e)};h.Zb=function(t,e){return new dc(this.xa,t,this.La,!0,e)};h.rf=function(t){return new dc(this.xa,null,this.La,!0,t)};function dc(t,e,n,r,i){this.Rd=i||null;this.Ee=r;this.Pa=[];for(i=1;!t.e();)if(i=e?n(t.key,e):1,r&&(i*=-1),0>i)t=this.Ee?t.left:t.right;else if(0===i){this.Pa.push(t);break}else this.Pa.push(t),t=this.Ee?t.right:t.left}function H(t){if(0===t.Pa.length)return null;var e=t.Pa.pop(),n;n=t.Rd?t.Rd(e.key,e.value):{key:e.key,value:e.value};if(t.Ee)for(e=e.left;!e.e();)t.Pa.push(e),e=e.right;else for(e=e.right;!e.e();)t.Pa.push(e),e=e.left;return n}function ec(t){if(0===t.Pa.length)return null;var e;e=t.Pa;e=e[e.length-1];return t.Rd?t.Rd(e.key,e.value):{key:e.key,value:e.value}}function fc(t,e,n,r,i){this.key=t;this.value=e;this.color=null!=n?n:!0;this.left=null!=r?r:bc;this.right=null!=i?i:bc}h=fc.prototype;h.X=function(t,e,n,r,i){return new fc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)};h.count=function(){return this.left.count()+1+this.right.count()};h.e=function(){return!1};h.ha=function(t){return this.left.ha(t)||t(this.key,this.value)||this.right.ha(t)};function gc(t){return t.left.e()?t:gc(t.left)}h.Rc=function(){return gc(this).key};h.ec=function(){return this.right.e()?this.key:this.right.ec()};h.Na=function(t,e,n){var r,i;i=this;r=n(t,i.key);i=0>r?i.X(null,null,null,i.left.Na(t,e,n),null):0===r?i.X(null,e,null,null,null):i.X(null,null,null,null,i.right.Na(t,e,n));return hc(i)};function ic(t){if(t.left.e())return bc;t.left.fa()||t.left.left.fa()||(t=jc(t));t=t.X(null,null,null,ic(t.left),null);return hc(t)}h.remove=function(t,e){var n,r;n=this;if(0>e(t,n.key))n.left.e()||n.left.fa()||n.left.left.fa()||(n=jc(n)),n=n.X(null,null,null,n.left.remove(t,e),null);else{n.left.fa()&&(n=kc(n));n.right.e()||n.right.fa()||n.right.left.fa()||(n=lc(n),n.left.left.fa()&&(n=kc(n),n=lc(n)));if(0===e(t,n.key)){if(n.right.e())return bc;r=gc(n.right);n=n.X(r.key,r.value,null,null,ic(n.right))}n=n.X(null,null,null,null,n.right.remove(t,e))}return hc(n)};h.fa=function(){return this.color};function hc(t){t.right.fa()&&!t.left.fa()&&(t=mc(t));t.left.fa()&&t.left.left.fa()&&(t=kc(t));t.left.fa()&&t.right.fa()&&(t=lc(t));return t}function jc(t){t=lc(t);t.right.left.fa()&&(t=t.X(null,null,null,null,kc(t.right)),t=mc(t),t=lc(t));return t}function mc(t){return t.right.X(null,null,t.color,t.X(null,null,!0,null,t.right.left),null)}function kc(t){return t.left.X(null,null,t.color,null,t.X(null,null,!0,t.left.right,null))}function lc(t){return t.X(null,null,!t.color,t.left.X(null,null,!t.left.color,null,null),t.right.X(null,null,!t.right.color,null,null))}function nc(){}h=nc.prototype;h.X=function(){return this};h.Na=function(t,e){return new fc(t,e,null)};h.remove=function(){return this};h.count=function(){return 0};h.e=function(){return!0};h.ha=function(){return!1};h.Rc=function(){return null};h.ec=function(){return null};h.fa=function(){return!1};var bc=new nc;function oc(t,e){return t&&"object"===typeof t?(J(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}function pc(t,e){var n=new qc;rc(t,new K(""),function(t,r){n.mc(t,sc(r,e))});return n}function sc(t,e){var n=t.A().K(),n=oc(n,e),r;if(t.N()){var i=oc(t.Ba(),e);return i!==t.Ba()||n!==t.A().K()?new tc(i,L(n)):t}r=t;n!==t.A().K()&&(r=r.da(new tc(n)));t.U(M,function(t,n){var i=sc(n,e);i!==n&&(r=r.Q(t,i))});return r}function K(t,e){if(1==arguments.length){this.n=t.split("/");for(var n=0,r=0;r<this.n.length;r++)0<this.n[r].length&&(this.n[n]=this.n[r],n++);this.n.length=n;this.Y=0}else this.n=t,this.Y=e}function N(t,e){var n=O(t);if(null===n)return e;if(n===O(e))return N(G(t),G(e));throw Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function O(t){return t.Y>=t.n.length?null:t.n[t.Y]}function uc(t){return t.n.length-t.Y}function G(t){var e=t.Y;e<t.n.length&&e++;return new K(t.n,e)}function vc(t){return t.Y<t.n.length?t.n[t.n.length-1]:null}h=K.prototype;h.toString=function(){for(var t="",e=this.Y;e<this.n.length;e++)""!==this.n[e]&&(t+="/"+this.n[e]);return t||"/"};h.slice=function(t){return this.n.slice(this.Y+(t||0))};h.parent=function(){if(this.Y>=this.n.length)return null;for(var t=[],e=this.Y;e<this.n.length-1;e++)t.push(this.n[e]);return new K(t,0)};h.w=function(t){for(var e=[],n=this.Y;n<this.n.length;n++)e.push(this.n[n]);if(t instanceof K)for(n=t.Y;n<t.n.length;n++)e.push(t.n[n]);else for(t=t.split("/"),n=0;n<t.length;n++)0<t[n].length&&e.push(t[n]);return new K(e,0)};h.e=function(){return this.Y>=this.n.length};h.Z=function(t){if(uc(this)!==uc(t))return!1;for(var e=this.Y,n=t.Y;e<=this.n.length;e++,n++)if(this.n[e]!==t.n[n])return!1;return!0};h.contains=function(t){var e=this.Y,n=t.Y;if(uc(this)>uc(t))return!1;for(;e<this.n.length;){if(this.n[e]!==t.n[n])return!1;++e;++n}return!0};var F=new K("");function wc(t,e){this.Qa=t.slice();this.Ea=Math.max(1,this.Qa.length);this.kf=e;for(var n=0;n<this.Qa.length;n++)this.Ea+=xc(this.Qa[n]);yc(this)}wc.prototype.push=function(t){0<this.Qa.length&&(this.Ea+=1);this.Qa.push(t);this.Ea+=xc(t);yc(this)};wc.prototype.pop=function(){var t=this.Qa.pop();this.Ea-=xc(t);0<this.Qa.length&&--this.Ea};function yc(t){if(768<t.Ea)throw Error(t.kf+"has a key path longer than 768 bytes ("+t.Ea+").");if(32<t.Qa.length)throw Error(t.kf+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zc(t))}function zc(t){return 0==t.Qa.length?"":"in property '"+t.Qa.join(".")+"'"}function Ac(){this.wc={}}Ac.prototype.set=function(t,e){null==e?delete this.wc[t]:this.wc[t]=e};Ac.prototype.get=function(t){return u(this.wc,t)?this.wc[t]:null};Ac.prototype.remove=function(t){delete this.wc[t]};Ac.prototype.uf=!0;function Bc(t){this.Ec=t;this.Md="firebase:"}h=Bc.prototype;h.set=function(t,e){null==e?this.Ec.removeItem(this.Md+t):this.Ec.setItem(this.Md+t,B(e))};h.get=function(t){t=this.Ec.getItem(this.Md+t);return null==t?null:mb(t)};h.remove=function(t){this.Ec.removeItem(this.Md+t)};h.uf=!1;h.toString=function(){return this.Ec.toString()};function Cc(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var e=window[t];e.setItem("firebase:sentinel","cache");e.removeItem("firebase:sentinel");return new Bc(e)}}catch(n){}return new Ac}var Dc=Cc("localStorage"),P=Cc("sessionStorage");function Ec(t,e,n,r,i){this.host=t.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.lb=e;this.Cb=n;this.Tg=r;this.Ld=i||"";this.Oa=Dc.get("host:"+t)||this.host}function Fc(t,e){e!==t.Oa&&(t.Oa=e,"s-"===t.Oa.substr(0,2)&&Dc.set("host:"+t.host,t.Oa))}Ec.prototype.toString=function(){var t=(this.lb?"https://":"http://")+this.host;this.Ld&&(t+="<"+this.Ld+">");return t};var Gc=function(){var t=1;return function(){return t++}}();function J(t,e){if(!t)throw Hc(e)}function Hc(t){return Error("Firebase (2.2.7) INTERNAL ASSERT FAILED: "+t)}function Ic(t){try{var e;if("undefined"!==typeof atob)e=atob(t);else{gb();for(var n=eb,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;var u=i<t.length?n[t.charAt(i)]:64;++i;var a=i<t.length?n[t.charAt(i)]:64;++i;if(null==o||null==s||null==u||null==a)throw Error();r.push(o<<2|s>>4);64!=u&&(r.push(s<<4&240|u>>2),64!=a&&r.push(u<<6&192|a))}if(8192>r.length)e=String.fromCharCode.apply(null,r);else{t="";for(n=0;n<r.length;n+=8192)t+=String.fromCharCode.apply(null,Wa(r,n,n+8192));e=t}}return e}catch(c){Bb("base64Decode failed: ",c)}return null}function Jc(t){var e=Kc(t);t=new La;t.update(e);var e=[],n=8*t.be;56>t.$b?t.update(t.Id,56-t.$b):t.update(t.Id,t.Wa-(t.$b-56));for(var r=t.Wa-1;56<=r;r--)t.le[r]=n&255,n/=256;Ma(t,t.le);for(r=n=0;5>r;r++)for(var i=24;0<=i;i-=8)e[n]=t.R[r]>>i&255,++n;return fb(e)}function Lc(t){for(var e="",n=0;n<arguments.length;n++)e=fa(arguments[n])?e+Lc.apply(null,arguments[n]):"object"===typeof arguments[n]?e+B(arguments[n]):e+arguments[n],e+=" ";return e}var Ab=null,Mc=!0;function Bb(t){!0===Mc&&(Mc=!1,null===Ab&&!0===P.get("logging_enabled")&&Nc(!0));if(Ab){var e=Lc.apply(null,arguments);Ab(e)}}function Oc(t){return function(){Bb(t,arguments)}}function Pc(t){if("undefined"!==typeof console){var e="FIREBASE INTERNAL ERROR: "+Lc.apply(null,arguments);"undefined"!==typeof console.error?console.error(e):console.log(e)}}function Qc(t){var e=Lc.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+e)}function Q(t){if("undefined"!==typeof console){var e="FIREBASE WARNING: "+Lc.apply(null,arguments);"undefined"!==typeof console.warn?console.warn(e):console.log(e)}}function Rc(t){var e="",n="",r="",i="",o=!0,s="https",u=443;if(p(t)){var a=t.indexOf("//");0<=a&&(s=t.substring(0,a-1),t=t.substring(a+2));a=t.indexOf("/");-1===a&&(a=t.length);e=t.substring(0,a);i="";t=t.substring(a).split("/");for(a=0;a<t.length;a++)if(0<t[a].length){var c=t[a];try{c=decodeURIComponent(c.replace(/\+/g," "))}catch(h){}i+="/"+c}t=e.split(".");3===t.length?(n=t[1],r=t[0].toLowerCase()):2===t.length&&(n=t[0]);a=e.indexOf(":");0<=a&&(o="https"===s||"wss"===s,u=e.substring(a+1),isFinite(u)&&(u=String(u)),u=p(u)?/^\s*-?0x/i.test(u)?parseInt(u,16):parseInt(u,10):NaN)}return{host:e,port:u,domain:n,Qg:r,lb:o,scheme:s,Zc:i}}function Sc(t){return ga(t)&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)}function Tc(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}function Sb(t,e){if(t===e)return 0;if("[MIN_NAME]"===t||"[MAX_NAME]"===e)return-1;if("[MIN_NAME]"===e||"[MAX_NAME]"===t)return 1;var n=Uc(t),r=Uc(e);return null!==n?null!==r?0==n-r?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}function Vc(t,e){if(e&&t in e)return e[t];throw Error("Missing required key ("+t+") in object: "+B(e))}function Wc(t){if("object"!==typeof t||null===t)return B(t);var e=[],n;for(n in t)e.push(n);e.sort();n="{";for(var r=0;r<e.length;r++)0!==r&&(n+=","),n+=B(e[r]),n+=":",n+=Wc(t[e[r]]);return n+"}"}function Xc(t,e){if(t.length<=e)return[t];for(var n=[],r=0;r<t.length;r+=e)r+e>t?n.push(t.substring(r,t.length)):n.push(t.substring(r,r+e));return n}function Yc(t,e){if(ea(t))for(var n=0;n<t.length;++n)e(n,t[n]);else r(t,e)}function Zc(t){J(!Sc(t),"Invalid JSON number");var e,n,r,i;0===t?(r=n=0,e=-Infinity===1/t?1:0):(e=0>t,t=Math.abs(t),t>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),n=r+1023,r=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));i=[];for(t=52;t;--t)i.push(r%2?1:0),r=Math.floor(r/2);for(t=11;t;--t)i.push(n%2?1:0),n=Math.floor(n/2);i.push(e?1:0);i.reverse();e=i.join("");n="";for(t=0;64>t;t+=8)r=parseInt(e.substr(t,8),2).toString(16),1===r.length&&(r="0"+r),n+=r;return n.toLowerCase()}var $c=/^-?\d{1,10}$/;function Uc(t){return $c.test(t)&&(t=Number(t),-2147483648<=t&&2147483647>=t)?t:null}function Cb(t){try{t()}catch(e){setTimeout(function(){Q("Exception was thrown by user callback.",e.stack||"");throw e},Math.floor(0))}}function R(t,e){if(ha(t)){var n=Array.prototype.slice.call(arguments,1).slice();Cb(function(){t.apply(null,n)})}}function Kc(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);55296<=i&&56319>=i&&(i-=55296,r++,J(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(i<<10)+(t.charCodeAt(r)-56320));128>i?e[n++]=i:(2048>i?e[n++]=i>>6|192:(65536>i?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=i&63|128)}return e}function xc(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);128>r?e++:2048>r?e+=2:55296<=r&&56319>=r?(e+=4,n++):e+=3}return e}function ad(t){var e={},n={},r={},i="";try{var o=t.split("."),e=mb(Ic(o[0])||""),n=mb(Ic(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(s){}return{Wg:e,Ac:n,data:r,Ng:i}}function bd(t){t=ad(t).Ac;return"object"===typeof t&&t.hasOwnProperty("iat")?w(t,"iat"):null}function cd(t){t=ad(t);var e=t.Ac;return!!t.Ng&&!!e&&"object"===typeof e&&e.hasOwnProperty("iat")}function dd(t){this.V=t;this.g=t.o.g}function ed(t,e,n,r){var i=[],o=[];Oa(e,function(e){"child_changed"===e.type&&t.g.xd(e.Je,e.Ja)&&o.push(new D("child_moved",e.Ja,e.Ya))});fd(t,i,"child_removed",e,r,n);fd(t,i,"child_added",e,r,n);fd(t,i,"child_moved",o,r,n);fd(t,i,"child_changed",e,r,n);fd(t,i,Eb,e,r,n);return i}function fd(t,e,n,r,i,o){r=Pa(r,function(t){return t.type===n});Xa(r,q(t.eg,t));Oa(r,function(n){var r=gd(t,n,o);Oa(i,function(i){i.Jf(n.type)&&e.push(i.createEvent(r,t.V))})})}function gd(t,e,n){"value"!==e.type&&"child_removed"!==e.type&&(e.Nd=n.qf(e.Ya,e.Ja,t.g));return e}dd.prototype.eg=function(t,e){if(null==t.Ya||null==e.Ya)throw Hc("Should only compare child_ events.");return this.g.compare(new E(t.Ya,t.Ja),new E(e.Ya,e.Ja))};function hd(){this.eb={}}function id(t,e){var n=e.type,r=e.Ya;J("child_added"==n||"child_changed"==n||"child_removed"==n,"Only child changes supported for tracking");J(".priority"!==r,"Only non-priority child changes can be tracked.");var i=w(t.eb,r);if(i){var o=i.type;if("child_added"==n&&"child_removed"==o)t.eb[r]=new D("child_changed",e.Ja,r,i.Ja);else if("child_removed"==n&&"child_added"==o)delete t.eb[r];else if("child_removed"==n&&"child_changed"==o)t.eb[r]=new D("child_removed",i.Je,r);else if("child_changed"==n&&"child_added"==o)t.eb[r]=new D("child_added",e.Ja,r);else if("child_changed"==n&&"child_changed"==o)t.eb[r]=new D("child_changed",e.Ja,r,i.Je);else throw Hc("Illegal combination of changes: "+e+" occurred after "+i)}else t.eb[r]=e}function jd(t,e,n){this.Pb=t;this.qb=e;this.sb=n||null}h=jd.prototype;h.Jf=function(t){return"value"===t};h.createEvent=function(t,e){var n=e.o.g;return new Fb("value",this,new S(t.Ja,e.lc(),n))};h.Ub=function(t){var e=this.sb;if("cancel"===t.ye()){J(this.qb,"Raising a cancel event on a listener with no cancel callback");var n=this.qb;return function(){n.call(e,t.error)}}var r=this.Pb;return function(){r.call(e,t.Wd)}};h.ff=function(t,e){return this.qb?new Gb(this,t,e):null};h.matches=function(t){return t instanceof jd?t.Pb&&this.Pb?t.Pb===this.Pb&&t.sb===this.sb:!0:!1};h.sf=function(){return null!==this.Pb};function kd(t,e,n){this.ga=t;this.qb=e;this.sb=n}h=kd.prototype;h.Jf=function(t){t="children_added"===t?"child_added":t;return("children_removed"===t?"child_removed":t)in this.ga};h.ff=function(t,e){return this.qb?new Gb(this,t,e):null};h.createEvent=function(t,e){J(null!=t.Ya,"Child events should have a childName.");var n=e.lc().w(t.Ya);return new Fb(t.type,this,new S(t.Ja,n,e.o.g),t.Nd)};h.Ub=function(t){var e=this.sb;if("cancel"===t.ye()){J(this.qb,"Raising a cancel event on a listener with no cancel callback");var n=this.qb;return function(){n.call(e,t.error)}}var r=this.ga[t.rd];return function(){r.call(e,t.Wd,t.Nd)}};h.matches=function(t){if(t instanceof kd){if(!this.ga||!t.ga)return!0;if(this.sb===t.sb){var e=pa(t.ga);if(e===pa(this.ga)){if(1===e){var e=qa(t.ga),n=qa(this.ga);return n===e&&(!t.ga[e]||!this.ga[n]||t.ga[e]===this.ga[n])}return oa(this.ga,function(e,n){return t.ga[n]===e})}}}return!1};h.sf=function(){return null!==this.ga};function ld(t){this.g=t}h=ld.prototype;h.G=function(t,e,n,r,i){J(t.Ic(this.g),"A node must be indexed if only a child is updated");r=t.M(e);if(r.Z(n))return t;null!=i&&(n.e()?t.Ha(e)?id(i,new D("child_removed",r,e)):J(t.N(),"A child remove without an old child only makes sense on a leaf node"):r.e()?id(i,new D("child_added",n,e)):id(i,new D("child_changed",n,e,r)));
return t.N()&&n.e()?t:t.Q(e,n).mb(this.g)};h.ta=function(t,e,n){null!=n&&(t.N()||t.U(M,function(t,r){e.Ha(t)||id(n,new D("child_removed",r,t))}),e.N()||e.U(M,function(e,r){if(t.Ha(e)){var i=t.M(e);i.Z(r)||id(n,new D("child_changed",r,e,i))}else id(n,new D("child_added",r,e))}));return e.mb(this.g)};h.da=function(t,e){return t.e()?C:t.da(e)};h.Ga=function(){return!1};h.Vb=function(){return this};function md(t){this.Ae=new ld(t.g);this.g=t.g;var e;t.la?(e=nd(t),e=t.g.Oc(od(t),e)):e=t.g.Sc();this.dd=e;t.na?(e=pd(t),t=t.g.Oc(qd(t),e)):t=t.g.Pc();this.Fc=t}h=md.prototype;h.matches=function(t){return 0>=this.g.compare(this.dd,t)&&0>=this.g.compare(t,this.Fc)};h.G=function(t,e,n,r,i){this.matches(new E(e,n))||(n=C);return this.Ae.G(t,e,n,r,i)};h.ta=function(t,e,n){e.N()&&(e=C);var r=e.mb(this.g),r=r.da(C),i=this;e.U(M,function(t,e){i.matches(new E(t,e))||(r=r.Q(t,C))});return this.Ae.ta(t,r,n)};h.da=function(t){return t};h.Ga=function(){return!0};h.Vb=function(){return this.Ae};function rd(t){this.ra=new md(t);this.g=t.g;J(t.ia,"Only valid if limit has been set");this.ja=t.ja;this.Jb=!sd(t)}h=rd.prototype;h.G=function(t,e,n,r,i){this.ra.matches(new E(e,n))||(n=C);return t.M(e).Z(n)?t:t.Db()<this.ja?this.ra.Vb().G(t,e,n,r,i):td(this,t,e,n,r,i)};h.ta=function(t,e,n){var r;if(e.N()||e.e())r=C.mb(this.g);else if(2*this.ja<e.Db()&&e.Ic(this.g)){r=C.mb(this.g);e=this.Jb?e.Zb(this.ra.Fc,this.g):e.Xb(this.ra.dd,this.g);for(var i=0;0<e.Pa.length&&i<this.ja;){var o=H(e),s;if(s=this.Jb?0>=this.g.compare(this.ra.dd,o):0>=this.g.compare(o,this.ra.Fc))r=r.Q(o.name,o.S),i++;else break}}else{r=e.mb(this.g);r=r.da(C);var u,a,c;if(this.Jb){e=r.rf(this.g);u=this.ra.Fc;a=this.ra.dd;var h=ud(this.g);c=function(t,e){return h(e,t)}}else e=r.Wb(this.g),u=this.ra.dd,a=this.ra.Fc,c=ud(this.g);for(var i=0,f=!1;0<e.Pa.length;)o=H(e),!f&&0>=c(u,o)&&(f=!0),(s=f&&i<this.ja&&0>=c(o,a))?i++:r=r.Q(o.name,C)}return this.ra.Vb().ta(t,r,n)};h.da=function(t){return t};h.Ga=function(){return!0};h.Vb=function(){return this.ra.Vb()};function td(t,e,n,r,i,o){var s;if(t.Jb){var u=ud(t.g);s=function(t,e){return u(e,t)}}else s=ud(t.g);J(e.Db()==t.ja,"");var a=new E(n,r),c=t.Jb?wd(e,t.g):xd(e,t.g),h=t.ra.matches(a);if(e.Ha(n)){var f=e.M(n),c=i.xe(t.g,c,t.Jb);null!=c&&c.name==n&&(c=i.xe(t.g,c,t.Jb));i=null==c?1:s(c,a);if(h&&!r.e()&&0<=i)return null!=o&&id(o,new D("child_changed",r,n,f)),e.Q(n,r);null!=o&&id(o,new D("child_removed",f,n));e=e.Q(n,C);return null!=c&&t.ra.matches(c)?(null!=o&&id(o,new D("child_added",c.S,c.name)),e.Q(c.name,c.S)):e}return r.e()?e:h&&0<=s(c,a)?(null!=o&&(id(o,new D("child_removed",c.S,c.name)),id(o,new D("child_added",r,n))),e.Q(n,r).Q(c.name,C)):e}function yd(t,e){this.he=t;this.cg=e}function zd(t){this.I=t}zd.prototype.bb=function(t,e,n,r){var i=new hd,o;if(e.type===Vb)e.source.ve?n=Ad(this,t,e.path,e.Ia,n,r,i):(J(e.source.of,"Unknown source."),o=e.source.af,n=Bd(this,t,e.path,e.Ia,n,r,o,i));else if(e.type===Cd)e.source.ve?n=Dd(this,t,e.path,e.children,n,r,i):(J(e.source.of,"Unknown source."),o=e.source.af,n=Ed(this,t,e.path,e.children,n,r,o,i));else if(e.type===Xb)if(e.Ve)if(o=e.path,null!=n.sc(o))n=t;else{e=new qb(n,t,r);r=t.D.j();if(o.e()||".priority"===O(o))Hb(t.u())?e=n.ua(tb(t)):(e=t.u().j(),J(e instanceof T,"serverChildren would be complete if leaf node"),e=n.xc(e)),e=this.I.ta(r,e,i);else{o=O(o);var s=n.Xa(o,t.u());null==s&&rb(t.u(),o)&&(s=r.M(o));e=null!=s?this.I.G(r,o,s,e,i):t.D.j().Ha(o)?this.I.G(r,o,C,e,i):r;e.e()&&Hb(t.u())&&(r=n.ua(tb(t)),r.N()&&(e=this.I.ta(e,r,i)))}r=Hb(t.u())||null!=n.sc(F);n=Fd(t,e,r,this.I.Ga())}else n=Gd(this,t,e.path,n,r,i);else if(e.type===$b)r=e.path,e=t.u(),o=e.j(),s=e.$||r.e(),n=Hd(this,new Id(t.D,new sb(o,s,e.Tb)),r,n,pb,i);else throw Hc("Unknown operation type: "+e.type);i=ra(i.eb);r=n;e=r.D;e.$&&(o=e.j().N()||e.j().e(),s=Jd(t),(0<i.length||!t.D.$||o&&!e.j().Z(s)||!e.j().A().Z(s.A()))&&i.push(Db(Jd(r))));return new yd(n,i)};function Hd(t,e,n,r,i,o){var s=e.D;if(null!=r.sc(n))return e;var u;if(n.e())J(Hb(e.u()),"If change path is empty, we must have complete server data"),e.u().Tb?(i=tb(e),r=r.xc(i instanceof T?i:C)):r=r.ua(tb(e)),o=t.I.ta(e.D.j(),r,o);else{var a=O(n);if(".priority"==a)J(1==uc(n),"Can't have a priority with additional path components"),o=s.j(),u=e.u().j(),r=r.hd(n,o,u),o=null!=r?t.I.da(o,r):s.j();else{var c=G(n);rb(s,a)?(u=e.u().j(),r=r.hd(n,s.j(),u),r=null!=r?s.j().M(a).G(c,r):s.j().M(a)):r=r.Xa(a,e.u());o=null!=r?t.I.G(s.j(),a,r,i,o):s.j()}}return Fd(e,o,s.$||n.e(),t.I.Ga())}function Bd(t,e,n,r,i,o,s,u){var a=e.u();s=s?t.I:t.I.Vb();if(n.e())r=s.ta(a.j(),r,null);else if(s.Ga()&&!a.Tb)r=a.j().G(n,r),r=s.ta(a.j(),r,null);else{var c=O(n);if((n.e()?!a.$||a.Tb:!rb(a,O(n)))&&1<uc(n))return e;r=a.j().M(c).G(G(n),r);r=".priority"==c?s.da(a.j(),r):s.G(a.j(),c,r,pb,null)}a=a.$||n.e();e=new Id(e.D,new sb(r,a,s.Ga()));return Hd(t,e,n,i,new qb(i,e,o),u)}function Ad(t,e,n,r,i,o,s){var u=e.D;i=new qb(i,e,o);if(n.e())s=t.I.ta(e.D.j(),r,s),t=Fd(e,s,!0,t.I.Ga());else if(o=O(n),".priority"===o)s=t.I.da(e.D.j(),r),t=Fd(e,s,u.$,u.Tb);else{var a=G(n);n=u.j().M(o);if(!a.e()){var c=i.pf(o);r=null!=c?".priority"===vc(a)&&c.oa(a.parent()).e()?c:c.G(a,r):C}n.Z(r)?t=e:(s=t.I.G(u.j(),o,r,i,s),t=Fd(e,s,u.$,t.I.Ga()))}return t}function Dd(t,e,n,r,i,o,s){var u=e;Kd(r,function(r,a){var c=n.w(r);rb(e.D,O(c))&&(u=Ad(t,u,c,a,i,o,s))});Kd(r,function(r,a){var c=n.w(r);rb(e.D,O(c))||(u=Ad(t,u,c,a,i,o,s))});return u}function Ld(t,e){Kd(e,function(e,n){t=t.G(e,n)});return t}function Ed(t,e,n,r,i,o,s,u){if(e.u().j().e()&&!Hb(e.u()))return e;var a=e;n=n.e()?r:Md(Nd,n,r);var c=e.u().j();n.children.ha(function(n,r){if(c.Ha(n)){var h=e.u().j().M(n),h=Ld(h,r);a=Bd(t,a,new K(n),h,i,o,s,u)}});n.children.ha(function(n,r){var h=!Hb(e.u())&&null==r.value;c.Ha(n)||h||(h=e.u().j().M(n),h=Ld(h,r),a=Bd(t,a,new K(n),h,i,o,s,u))});return a}function Gd(t,e,n,r,i,o){if(null!=r.sc(n))return e;var s=new qb(r,e,i),u=i=e.D.j();if(Hb(e.u())){if(n.e())i=r.ua(tb(e)),u=t.I.ta(e.D.j(),i,o);else if(".priority"===O(n)){var a=r.Xa(O(n),e.u());null==a||i.e()||i.A().Z(a)||(u=t.I.da(i,a))}else a=O(n),i=r.Xa(a,e.u()),null!=i&&(u=t.I.G(e.D.j(),a,i,s,o));i=!0}else if(e.D.$||n.e())u=i,i=e.D.j(),i.N()||i.U(M,function(n){var i=r.Xa(n,e.u());null!=i&&(u=t.I.G(u,n,i,s,o))}),i=e.D.$;else{a=O(n);if(1==uc(n)||rb(e.D,a))n=r.Xa(a,e.u()),null!=n&&(u=t.I.G(i,a,n,s,o));i=!1}return Fd(e,u,i,t.I.Ga())}function Od(){}var Pd={};function ud(t){return q(t.compare,t)}Od.prototype.xd=function(t,e){return 0!==this.compare(new E("[MIN_NAME]",t),new E("[MIN_NAME]",e))};Od.prototype.Sc=function(){return Qd};function Rd(t){this.bc=t}ma(Rd,Od);h=Rd.prototype;h.Hc=function(t){return!t.M(this.bc).e()};h.compare=function(t,e){var n=t.S.M(this.bc),r=e.S.M(this.bc),n=n.Cc(r);return 0===n?Sb(t.name,e.name):n};h.Oc=function(t,e){var n=L(t),n=C.Q(this.bc,n);return new E(e,n)};h.Pc=function(){var t=C.Q(this.bc,Sd);return new E("[MAX_NAME]",t)};h.toString=function(){return this.bc};function Td(){}ma(Td,Od);h=Td.prototype;h.compare=function(t,e){var n=t.S.A(),r=e.S.A(),n=n.Cc(r);return 0===n?Sb(t.name,e.name):n};h.Hc=function(t){return!t.A().e()};h.xd=function(t,e){return!t.A().Z(e.A())};h.Sc=function(){return Qd};h.Pc=function(){return new E("[MAX_NAME]",new tc("[PRIORITY-POST]",Sd))};h.Oc=function(t,e){var n=L(t);return new E(e,new tc("[PRIORITY-POST]",n))};h.toString=function(){return".priority"};var M=new Td;function Ud(){}ma(Ud,Od);h=Ud.prototype;h.compare=function(t,e){return Sb(t.name,e.name)};h.Hc=function(){throw Hc("KeyIndex.isDefinedOn not expected to be called.")};h.xd=function(){return!1};h.Sc=function(){return Qd};h.Pc=function(){return new E("[MAX_NAME]",C)};h.Oc=function(t){J(p(t),"KeyIndex indexValue must always be a string.");return new E(t,C)};h.toString=function(){return".key"};var Vd=new Ud;function Wd(){}ma(Wd,Od);h=Wd.prototype;h.compare=function(t,e){var n=t.S.Cc(e.S);return 0===n?Sb(t.name,e.name):n};h.Hc=function(){return!0};h.xd=function(t,e){return!t.Z(e)};h.Sc=function(){return Qd};h.Pc=function(){return Xd};h.Oc=function(t,e){var n=L(t);return new E(e,n)};h.toString=function(){return".value"};var Yd=new Wd;function Zd(){this.Rb=this.na=this.Lb=this.la=this.ia=!1;this.ja=0;this.Nb="";this.dc=null;this.xb="";this.ac=null;this.vb="";this.g=M}var $d=new Zd;function sd(t){return""===t.Nb?t.la:"l"===t.Nb}function od(t){J(t.la,"Only valid if start has been set");return t.dc}function nd(t){J(t.la,"Only valid if start has been set");return t.Lb?t.xb:"[MIN_NAME]"}function qd(t){J(t.na,"Only valid if end has been set");return t.ac}function pd(t){J(t.na,"Only valid if end has been set");return t.Rb?t.vb:"[MAX_NAME]"}function ae(t){var e=new Zd;e.ia=t.ia;e.ja=t.ja;e.la=t.la;e.dc=t.dc;e.Lb=t.Lb;e.xb=t.xb;e.na=t.na;e.ac=t.ac;e.Rb=t.Rb;e.vb=t.vb;e.g=t.g;return e}h=Zd.prototype;h.Ge=function(t){var e=ae(this);e.ia=!0;e.ja=t;e.Nb="";return e};h.He=function(t){var e=ae(this);e.ia=!0;e.ja=t;e.Nb="l";return e};h.Ie=function(t){var e=ae(this);e.ia=!0;e.ja=t;e.Nb="r";return e};h.Xd=function(t,e){var r=ae(this);r.la=!0;n(t)||(t=null);r.dc=t;null!=e?(r.Lb=!0,r.xb=e):(r.Lb=!1,r.xb="");return r};h.qd=function(t,e){var r=ae(this);r.na=!0;n(t)||(t=null);r.ac=t;n(e)?(r.Rb=!0,r.vb=e):(r.Yg=!1,r.vb="");return r};function be(t,e){var n=ae(t);n.g=e;return n}function ce(t){var e={};t.la&&(e.sp=t.dc,t.Lb&&(e.sn=t.xb));t.na&&(e.ep=t.ac,t.Rb&&(e.en=t.vb));if(t.ia){e.l=t.ja;var n=t.Nb;""===n&&(n=sd(t)?"l":"r");e.vf=n}t.g!==M&&(e.i=t.g.toString());return e}function de(t){return!(t.la||t.na||t.ia)}function ee(t){var e={};if(de(t)&&t.g==M)return e;var n;t.g===M?n="$priority":t.g===Yd?n="$value":t.g===Vd?n="$key":(J(t.g instanceof Rd,"Unrecognized index type!"),n=t.g.toString());e.orderBy=B(n);t.la&&(e.startAt=B(t.dc),t.Lb&&(e.startAt+=","+B(t.xb)));t.na&&(e.endAt=B(t.ac),t.Rb&&(e.endAt+=","+B(t.vb)));t.ia&&(sd(t)?e.limitToFirst=t.ja:e.limitToLast=t.ja);return e}h.toString=function(){return B(ce(this))};function fe(t,e){this.yd=t;this.cc=e}fe.prototype.get=function(t){var e=w(this.yd,t);if(!e)throw Error("No index defined for "+t);return e===Pd?null:e};function ge(t,e,n){var r=na(t.yd,function(r,i){var o=w(t.cc,i);J(o,"Missing index implementation for "+i);if(r===Pd){if(o.Hc(e.S)){for(var s=[],u=n.Wb(Qb),a=H(u);a;)a.name!=e.name&&s.push(a),a=H(u);s.push(e);return he(s,ud(o))}return Pd}o=n.get(e.name);s=r;o&&(s=s.remove(new E(e.name,o)));return s.Na(e,e.S)});return new fe(r,t.cc)}function ie(t,e,n){var r=na(t.yd,function(t){if(t===Pd)return t;var r=n.get(e.name);return r?t.remove(new E(e.name,r)):t});return new fe(r,t.cc)}var je=new fe({".priority":Pd},{".priority":M});function tc(t,e){this.C=t;J(n(this.C)&&null!==this.C,"LeafNode shouldn't be created with null/undefined value.");this.ba=e||C;ke(this.ba);this.Bb=null}h=tc.prototype;h.N=function(){return!0};h.A=function(){return this.ba};h.da=function(t){return new tc(this.C,t)};h.M=function(t){return".priority"===t?this.ba:C};h.oa=function(t){return t.e()?this:".priority"===O(t)?this.ba:C};h.Ha=function(){return!1};h.qf=function(){return null};h.Q=function(t,e){return".priority"===t?this.da(e):e.e()&&".priority"!==t?this:C.Q(t,e).da(this.ba)};h.G=function(t,e){var n=O(t);if(null===n)return e;if(e.e()&&".priority"!==n)return this;J(".priority"!==n||1===uc(t),".priority must be the last token in a path");return this.Q(n,C.G(G(t),e))};h.e=function(){return!1};h.Db=function(){return 0};h.K=function(t){return t&&!this.A().e()?{".value":this.Ba(),".priority":this.A().K()}:this.Ba()};h.hash=function(){if(null===this.Bb){var t="";this.ba.e()||(t+="priority:"+le(this.ba.K())+":");var e=typeof this.C,t=t+(e+":"),t="number"===e?t+Zc(this.C):t+this.C;this.Bb=Jc(t)}return this.Bb};h.Ba=function(){return this.C};h.Cc=function(t){if(t===C)return 1;if(t instanceof T)return-1;J(t.N(),"Unknown node type");var e=typeof t.C,n=typeof this.C,r=Na(me,e),i=Na(me,n);J(0<=r,"Unknown leaf type: "+e);J(0<=i,"Unknown leaf type: "+n);return r===i?"object"===n?0:this.C<t.C?-1:this.C===t.C?0:1:i-r};var me=["object","boolean","number","string"];tc.prototype.mb=function(){return this};tc.prototype.Ic=function(){return!0};tc.prototype.Z=function(t){return t===this?!0:t.N()?this.C===t.C&&this.ba.Z(t.ba):!1};tc.prototype.toString=function(){return B(this.K(!0))};function T(t,e,n){this.m=t;(this.ba=e)&&ke(this.ba);t.e()&&J(!this.ba||this.ba.e(),"An empty node cannot have a priority");this.wb=n;this.Bb=null}h=T.prototype;h.N=function(){return!1};h.A=function(){return this.ba||C};h.da=function(t){return this.m.e()?this:new T(this.m,t,this.wb)};h.M=function(t){if(".priority"===t)return this.A();t=this.m.get(t);return null===t?C:t};h.oa=function(t){var e=O(t);return null===e?this:this.M(e).oa(G(t))};h.Ha=function(t){return null!==this.m.get(t)};h.Q=function(t,e){J(e,"We should always be passing snapshot nodes");if(".priority"===t)return this.da(e);var n=new E(t,e),r,i;e.e()?(r=this.m.remove(t),n=ie(this.wb,n,this.m)):(r=this.m.Na(t,e),n=ge(this.wb,n,this.m));i=r.e()?C:this.ba;return new T(r,i,n)};h.G=function(t,e){var n=O(t);if(null===n)return e;J(".priority"!==O(t)||1===uc(t),".priority must be the last token in a path");var r=this.M(n).G(G(t),e);return this.Q(n,r)};h.e=function(){return this.m.e()};h.Db=function(){return this.m.count()};var ne=/^(0|[1-9]\d*)$/;h=T.prototype;h.K=function(t){if(this.e())return null;var e={},n=0,r=0,i=!0;this.U(M,function(o,s){e[o]=s.K(t);n++;i&&ne.test(o)?r=Math.max(r,Number(o)):i=!1});if(!t&&i&&r<2*n){var o=[],s;for(s in e)o[s]=e[s];return o}t&&!this.A().e()&&(e[".priority"]=this.A().K());return e};h.hash=function(){if(null===this.Bb){var t="";this.A().e()||(t+="priority:"+le(this.A().K())+":");this.U(M,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)});this.Bb=""===t?"":Jc(t)}return this.Bb};h.qf=function(t,e,n){return(n=oe(this,n))?(t=cc(n,new E(t,e)))?t.name:null:cc(this.m,t)};function wd(t,e){var n;n=(n=oe(t,e))?(n=n.Rc())&&n.name:t.m.Rc();return n?new E(n,t.m.get(n)):null}function xd(t,e){var n;n=(n=oe(t,e))?(n=n.ec())&&n.name:t.m.ec();return n?new E(n,t.m.get(n)):null}h.U=function(t,e){var n=oe(this,t);return n?n.ha(function(t){return e(t.name,t.S)}):this.m.ha(e)};h.Wb=function(t){return this.Xb(t.Sc(),t)};h.Xb=function(t,e){var n=oe(this,e);if(n)return n.Xb(t,function(t){return t});for(var n=this.m.Xb(t.name,Qb),r=ec(n);null!=r&&0>e.compare(r,t);)H(n),r=ec(n);return n};h.rf=function(t){return this.Zb(t.Pc(),t)};h.Zb=function(t,e){var n=oe(this,e);if(n)return n.Zb(t,function(t){return t});for(var n=this.m.Zb(t.name,Qb),r=ec(n);null!=r&&0<e.compare(r,t);)H(n),r=ec(n);return n};h.Cc=function(t){return this.e()?t.e()?0:-1:t.N()||t.e()?1:t===Sd?-1:0};h.mb=function(t){if(t===Vd||ta(this.wb.cc,t.toString()))return this;var e=this.wb,n=this.m;J(t!==Vd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,n=n.Wb(Qb),o=H(n);o;)i=i||t.Hc(o.S),r.push(o),o=H(n);r=i?he(r,ud(t)):Pd;i=t.toString();n=xa(e.cc);n[i]=t;t=xa(e.yd);t[i]=r;return new T(this.m,this.ba,new fe(t,n))};h.Ic=function(t){return t===Vd||ta(this.wb.cc,t.toString())};h.Z=function(t){if(t===this)return!0;if(t.N())return!1;if(this.A().Z(t.A())&&this.m.count()===t.m.count()){var e=this.Wb(M);t=t.Wb(M);for(var n=H(e),r=H(t);n&&r;){if(n.name!==r.name||!n.S.Z(r.S))return!1;n=H(e);r=H(t)}return null===n&&null===r}return!1};function oe(t,e){return e===Vd?null:t.wb.get(e.toString())}h.toString=function(){return B(this.K(!0))};function L(t,e){if(null===t)return C;var n=null;"object"===typeof t&&".priority"in t?n=t[".priority"]:"undefined"!==typeof e&&(n=e);J(null===n||"string"===typeof n||"number"===typeof n||"object"===typeof n&&".sv"in n,"Invalid priority type found: "+typeof n);"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]);if("object"!==typeof t||".sv"in t)return new tc(t,L(n));if(t instanceof Array){var i=C,o=t;r(o,function(t,e){if(u(o,e)&&"."!==e.substring(0,1)){var n=L(t);if(n.N()||!n.e())i=i.Q(e,n)}});return i.da(L(n))}var s=[],a=!1,c=t;hb(c,function(t){if("string"!==typeof t||"."!==t.substring(0,1)){var e=L(c[t]);e.e()||(a=a||!e.A().e(),s.push(new E(t,e)))}});if(0==s.length)return C;var h=he(s,Rb,function(t){return t.name},Tb);if(a){var f=he(s,ud(M));return new T(h,L(n),new fe({".priority":f},{".priority":M}))}return new T(h,L(n),je)}var pe=Math.log(2);function qe(t){this.count=parseInt(Math.log(t+1)/pe,10);this.hf=this.count-1;this.bg=t+1&parseInt(Array(this.count+1).join("1"),2)}function re(t){var e=!(t.bg&1<<t.hf);t.hf--;return e}function he(t,e,n,r){function i(e,r){var o=r-e;if(0==o)return null;if(1==o){var s=t[e],u=n?n(s):s;return new fc(u,s.S,!1,null,null)}var s=parseInt(o/2,10)+e,o=i(e,s),a=i(s+1,r),s=t[s],u=n?n(s):s;return new fc(u,s.S,!1,o,a)}t.sort(e);var o=function(e){function r(e,r){var a=u-e,c=u;u-=e;var c=i(a+1,c),a=t[a],h=n?n(a):a,c=new fc(h,a.S,r,null,c);o?o.left=c:s=c;o=c}for(var o=null,s=null,u=t.length,a=0;a<e.count;++a){var c=re(e),h=Math.pow(2,e.count-(a+1));c?r(h,!1):(r(h,!1),r(h,!0))}return s}(new qe(t.length));return null!==o?new ac(r||e,o):new ac(r||e)}function le(t){return"number"===typeof t?"number:"+Zc(t):"string:"+t}function ke(t){if(t.N()){var e=t.K();J("string"===typeof e||"number"===typeof e||"object"===typeof e&&u(e,".sv"),"Priority must be a string or number.")}else J(t===Sd||t.e(),"priority of unexpected type.");J(t===Sd||t.A().e(),"Priority nodes can't have a priority of their own.")}var C=new T(new ac(Tb),null,je);function se(){T.call(this,new ac(Tb),C,je)}ma(se,T);h=se.prototype;h.Cc=function(t){return t===this?0:1};h.Z=function(t){return t===this};h.A=function(){return this};h.M=function(){return C};h.e=function(){return!1};var Sd=new se,Qd=new E("[MIN_NAME]",C),Xd=new E("[MAX_NAME]",Sd);function Id(t,e){this.D=t;this.Ud=e}function Fd(t,e,n,r){return new Id(new sb(e,n,r),t.Ud)}function Jd(t){return t.D.$?t.D.j():null}Id.prototype.u=function(){return this.Ud};function tb(t){return t.Ud.$?t.Ud.j():null}function te(t,e){this.V=t;var n=t.o,r=new ld(n.g),n=de(n)?new ld(n.g):n.ia?new rd(n):new md(n);this.Gf=new zd(n);var i=e.u(),o=e.D,s=r.ta(C,i.j(),null),u=n.ta(C,o.j(),null);this.Ka=new Id(new sb(u,o.$,n.Ga()),new sb(s,i.$,r.Ga()));this.Za=[];this.ig=new dd(t)}function ue(t){return t.V}h=te.prototype;h.u=function(){return this.Ka.u().j()};h.hb=function(t){var e=tb(this.Ka);return e&&(de(this.V.o)||!t.e()&&!e.M(O(t)).e())?e.oa(t):null};h.e=function(){return 0===this.Za.length};h.Ob=function(t){this.Za.push(t)};h.kb=function(t,e){var n=[];if(e){J(null==t,"A cancel should cancel all event registrations.");var r=this.V.path;Oa(this.Za,function(t){(t=t.ff(e,r))&&n.push(t)})}if(t){for(var i=[],o=0;o<this.Za.length;++o){var s=this.Za[o];if(!s.matches(t))i.push(s);else if(t.sf()){i=i.concat(this.Za.slice(o+1));break}}this.Za=i}else this.Za=[];return n};h.bb=function(t,e,n){t.type===Cd&&null!==t.source.Ib&&(J(tb(this.Ka),"We should always have a full cache before handling merges"),J(Jd(this.Ka),"Missing event cache, even though we have a server cache"));var r=this.Ka;t=this.Gf.bb(r,t,e,n);e=this.Gf;n=t.he;J(n.D.j().Ic(e.I.g),"Event snap not indexed");J(n.u().j().Ic(e.I.g),"Server snap not indexed");J(Hb(t.he.u())||!Hb(r.u()),"Once a server snap is complete, it should never go back");this.Ka=t.he;return ve(this,t.cg,t.he.D.j(),null)};function we(t,e){var n=t.Ka.D,r=[];n.j().N()||n.j().U(M,function(t,e){r.push(new D("child_added",e,t))});n.$&&r.push(Db(n.j()));return ve(t,r,n.j(),e)}function ve(t,e,n,r){return ed(t.ig,e,n,r?[r]:t.Za)}function xe(t,e,n){this.type=Cd;this.source=t;this.path=e;this.children=n}xe.prototype.Wc=function(t){if(this.path.e())return t=this.children.subtree(new K(t)),t.e()?null:t.value?new Ub(this.source,F,t.value):new xe(this.source,F,t);J(O(this.path)===t,"Can't get a merge for a child not on the path of the operation");return new xe(this.source,G(this.path),this.children)};xe.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};var Vb=0,Cd=1,Xb=2,$b=3;function ye(t,e,n,r){this.ve=t;this.of=e;this.Ib=n;this.af=r;J(!r||e,"Tagged queries must be from server.")}var Yb=new ye(!0,!1,null,!1),ze=new ye(!1,!0,null,!1);ye.prototype.toString=function(){return this.ve?"user":this.af?"server(queryID="+this.Ib+")":"server"};function Ae(t,e){this.f=Oc("p:rest:");this.H=t;this.Gb=e;this.Fa=null;this.aa={}}function Be(t,e){if(n(e))return"tag$"+e;var r=t.o;J(de(r)&&r.g==M,"should have a tag if it's not a default query.");return t.path.toString()}h=Ae.prototype;h.xf=function(t,e,n,r){var i=t.path.toString();this.f("Listen called for "+i+" "+t.wa());var o=Be(t,n),s={};this.aa[o]=s;t=ee(t.o);var u=this;Ce(this,i+".json",t,function(t,e){var a=e;404===t&&(t=a=null);null===t&&u.Gb(i,a,!1,n);w(u.aa,o)===s&&r(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})};h.Of=function(t,e){var n=Be(t,e);delete this.aa[n]};h.P=function(t,e){this.Fa=t;var n=ad(t),r=n.data,n=n.Ac&&n.Ac.exp;e&&e("ok",{auth:r,expires:n})};h.ee=function(t){this.Fa=null;t("ok",null)};h.Le=function(){};h.Bf=function(){};h.Gd=function(){};h.put=function(){};h.yf=function(){};h.Te=function(){};function Ce(t,e,n,r){n=n||{};n.format="export";t.Fa&&(n.auth=t.Fa);var i=(t.H.lb?"https://":"http://")+t.H.host+e+"?"+jb(n);t.f("Sending REST request for "+i);var o=new XMLHttpRequest;o.onreadystatechange=function(){if(r&&4===o.readyState){t.f("REST Response for "+i+" received. status:",o.status,"response:",o.responseText);var e=null;if(200<=o.status&&300>o.status){try{e=mb(o.responseText)}catch(n){Q("Failed to parse JSON response for "+i+": "+o.responseText)}r(null,e)}else 401!==o.status&&404!==o.status&&Q("Got unsuccessful REST response for "+i+" Status: "+o.status),r(o.status);r=null}};o.open("GET",i,!0);o.send()}function De(t,e){this.value=t;this.children=e||Ee}var Ee=new ac(function(t,e){return t===e?0:t<e?-1:1});function Fe(t){var e=Nd;r(t,function(t,n){e=e.set(new K(n),t)});return e}h=De.prototype;h.e=function(){return null===this.value&&this.children.e()};function Ge(t,e,n){if(null!=t.value&&n(t.value))return{path:F,value:t.value};if(e.e())return null;var r=O(e);t=t.children.get(r);return null!==t?(e=Ge(t,G(e),n),null!=e?{path:new K(r).w(e.path),value:e.value}:null):null}function He(t,e){return Ge(t,e,function(){return!0})}h.subtree=function(t){if(t.e())return this;var e=this.children.get(O(t));return null!==e?e.subtree(G(t)):Nd};h.set=function(t,e){if(t.e())return new De(e,this.children);var n=O(t),r=(this.children.get(n)||Nd).set(G(t),e),n=this.children.Na(n,r);return new De(this.value,n)};h.remove=function(t){if(t.e())return this.children.e()?Nd:new De(null,this.children);var e=O(t),n=this.children.get(e);return n?(t=n.remove(G(t)),e=t.e()?this.children.remove(e):this.children.Na(e,t),null===this.value&&e.e()?Nd:new De(this.value,e)):this};h.get=function(t){if(t.e())return this.value;var e=this.children.get(O(t));return e?e.get(G(t)):null};function Md(t,e,n){if(e.e())return n;var r=O(e);e=Md(t.children.get(r)||Nd,G(e),n);r=e.e()?t.children.remove(r):t.children.Na(r,e);return new De(t.value,r)}function Ie(t,e){return Je(t,F,e)}function Je(t,e,n){var r={};t.children.ha(function(t,i){r[t]=Je(i,e.w(t),n)});return n(e,t.value,r)}function Ke(t,e,n){return Le(t,e,F,n)}function Le(t,e,n,r){var i=t.value?r(n,t.value):!1;if(i)return i;if(e.e())return null;i=O(e);return(t=t.children.get(i))?Le(t,G(e),n.w(i),r):null}function Me(t,e,n){var r=F;if(!e.e()){var i=!0;t.value&&(i=n(r,t.value));!0===i&&(i=O(e),(t=t.children.get(i))&&Ne(t,G(e),r.w(i),n))}}function Ne(t,e,n,r){if(e.e())return t;t.value&&r(n,t.value);var i=O(e);return(t=t.children.get(i))?Ne(t,G(e),n.w(i),r):Nd}function Kd(t,e){Oe(t,F,e)}function Oe(t,e,n){t.children.ha(function(t,r){Oe(r,e.w(t),n)});t.value&&n(e,t.value)}function Pe(t,e){t.children.ha(function(t,n){n.value&&e(t,n.value)})}var Nd=new De(null);De.prototype.toString=function(){var t={};Kd(this,function(e,n){t[e.toString()]=n.toString()});return B(t)};function Qe(t){this.W=t}var Re=new Qe(new De(null));function Se(t,e,n){if(e.e())return new Qe(new De(n));var r=He(t.W,e);if(null!=r){var i=r.path,r=r.value;e=N(i,e);r=r.G(e,n);return new Qe(t.W.set(i,r))}t=Md(t.W,e,new De(n));return new Qe(t)}function Te(t,e,n){var r=t;hb(n,function(t,n){r=Se(r,e.w(t),n)});return r}Qe.prototype.Od=function(t){if(t.e())return Re;t=Md(this.W,t,Nd);return new Qe(t)};function Ue(t,e){var n=He(t.W,e);return null!=n?t.W.get(n.path).oa(N(n.path,e)):null}function Ve(t){var e=[],n=t.W.value;null!=n?n.N()||n.U(M,function(t,n){e.push(new E(t,n))}):t.W.children.ha(function(t,n){null!=n.value&&e.push(new E(t,n.value))});return e}function We(t,e){if(e.e())return t;var n=Ue(t,e);return null!=n?new Qe(new De(n)):new Qe(t.W.subtree(e))}Qe.prototype.e=function(){return this.W.e()};Qe.prototype.apply=function(t){return Xe(F,this.W,t)};function Xe(t,e,n){if(null!=e.value)return n.G(t,e.value);var r=null;e.children.ha(function(e,i){".priority"===e?(J(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Xe(t.w(e),i,n)});n.oa(t).e()||null===r||(n=n.G(t.w(".priority"),r));return n}function Ye(){this.T=Re;this.za=[];this.Lc=-1}h=Ye.prototype;h.Od=function(t){var e=Ua(this.za,function(e){return e.ie===t});J(0<=e,"removeWrite called with nonexistent writeId.");var n=this.za[e];this.za.splice(e,1);for(var i=n.visible,o=!1,s=this.za.length-1;i&&0<=s;){var u=this.za[s];u.visible&&(s>=e&&Ze(u,n.path)?i=!1:n.path.contains(u.path)&&(o=!0));s--}if(i){if(o)this.T=$e(this.za,af,F),this.Lc=0<this.za.length?this.za[this.za.length-1].ie:-1;else if(n.Ia)this.T=this.T.Od(n.path);else{var a=this;r(n.children,function(t,e){a.T=a.T.Od(n.path.w(e))})}return n.path}return null};h.ua=function(t,e,n,r){if(n||r){var i=We(this.T,t);return!r&&i.e()?e:r||null!=e||null!=Ue(i,F)?(i=$e(this.za,function(e){return(e.visible||r)&&(!n||!(0<=Na(n,e.ie)))&&(e.path.contains(t)||t.contains(e.path))},t),e=e||C,i.apply(e)):null}i=Ue(this.T,t);if(null!=i)return i;i=We(this.T,t);return i.e()?e:null!=e||null!=Ue(i,F)?(e=e||C,i.apply(e)):null};h.xc=function(t,e){var n=C,r=Ue(this.T,t);if(r)r.N()||r.U(M,function(t,e){n=n.Q(t,e)});else if(e){var i=We(this.T,t);e.U(M,function(t,e){var r=We(i,new K(t)).apply(e);n=n.Q(t,r)});Oa(Ve(i),function(t){n=n.Q(t.name,t.S)})}else i=We(this.T,t),Oa(Ve(i),function(t){n=n.Q(t.name,t.S)});return n};h.hd=function(t,e,n,r){J(n||r,"Either existingEventSnap or existingServerSnap must exist");t=t.w(e);if(null!=Ue(this.T,t))return null;t=We(this.T,t);return t.e()?r.oa(e):t.apply(r.oa(e))};h.Xa=function(t,e,n){t=t.w(e);var r=Ue(this.T,t);return null!=r?r:rb(n,e)?We(this.T,t).apply(n.j().M(e)):null};h.sc=function(t){return Ue(this.T,t)};h.me=function(t,e,n,r,i,o){var s;t=We(this.T,t);s=Ue(t,F);if(null==s)if(null!=e)s=t.apply(e);else return[];s=s.mb(o);if(s.e()||s.N())return[];e=[];t=ud(o);i=i?s.Zb(n,o):s.Xb(n,o);for(o=H(i);o&&e.length<r;)0!==t(o,n)&&e.push(o),o=H(i);return e};function Ze(t,e){return t.Ia?t.path.contains(e):!!ua(t.children,function(n,r){return t.path.w(r).contains(e)})}function af(t){return t.visible}function $e(t,e,n){for(var r=Re,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path;if(o.Ia)n.contains(s)?(s=N(n,s),r=Se(r,s,o.Ia)):s.contains(n)&&(s=N(s,n),r=Se(r,F,o.Ia.oa(s)));else if(o.children)if(n.contains(s))s=N(n,s),r=Te(r,s,o.children);else{if(s.contains(n))if(s=N(s,n),s.e())r=Te(r,F,o.children);else if(o=w(o.children,O(s)))o=o.oa(G(s)),r=Se(r,F,o)}else throw Hc("WriteRecord should have .snap or .children")}}return r}function bf(t,e){this.Mb=t;this.W=e}h=bf.prototype;h.ua=function(t,e,n){return this.W.ua(this.Mb,t,e,n)};h.xc=function(t){return this.W.xc(this.Mb,t)};h.hd=function(t,e,n){return this.W.hd(this.Mb,t,e,n)};h.sc=function(t){return this.W.sc(this.Mb.w(t))};h.me=function(t,e,n,r,i){return this.W.me(this.Mb,t,e,n,r,i)};h.Xa=function(t,e){return this.W.Xa(this.Mb,t,e)};h.w=function(t){return new bf(this.Mb.w(t),this.W)};function cf(){this.ya={}}h=cf.prototype;h.e=function(){return wa(this.ya)};h.bb=function(t,e,n){var i=t.source.Ib;if(null!==i)return i=w(this.ya,i),J(null!=i,"SyncTree gave us an op for an invalid query."),i.bb(t,e,n);var o=[];r(this.ya,function(r){o=o.concat(r.bb(t,e,n))});return o};h.Ob=function(t,e,n,r,i){var o=t.wa(),s=w(this.ya,o);if(!s){var s=n.ua(i?r:null),u=!1;s?u=!0:(s=r instanceof T?n.xc(r):C,u=!1);s=new te(t,new Id(new sb(s,u,!1),new sb(r,i,!1)));this.ya[o]=s}s.Ob(e);return we(s,e)};h.kb=function(t,e,n){var i=t.wa(),o=[],s=[],u=null!=df(this);if("default"===i){var a=this;r(this.ya,function(t,r){s=s.concat(t.kb(e,n));t.e()&&(delete a.ya[r],de(t.V.o)||o.push(t.V))})}else{var c=w(this.ya,i);c&&(s=s.concat(c.kb(e,n)),c.e()&&(delete this.ya[i],de(c.V.o)||o.push(c.V)))}u&&null==df(this)&&o.push(new U(t.k,t.path));return{Hg:o,jg:s}};function ef(t){return Pa(ra(t.ya),function(t){return!de(t.V.o)})}h.hb=function(t){var e=null;r(this.ya,function(n){e=e||n.hb(t)});return e};function ff(t,e){if(de(e.o))return df(t);var n=e.wa();return w(t.ya,n)}function df(t){return va(t.ya,function(t){return de(t.V.o)})||null}function gf(t){this.sa=Nd;this.Hb=new Ye;this.$e={};this.kc={};this.Mc=t}function hf(t,e,r,i,o){var s=t.Hb,u=o;J(i>s.Lc,"Stacking an older write on top of newer ones");n(u)||(u=!0);s.za.push({path:e,Ia:r,ie:i,visible:u});u&&(s.T=Se(s.T,e,r));s.Lc=i;return o?jf(t,new Ub(Yb,e,r)):[]}function kf(t,e,n,r){var i=t.Hb;J(r>i.Lc,"Stacking an older merge on top of newer ones");i.za.push({path:e,children:n,ie:r,visible:!0});i.T=Te(i.T,e,n);i.Lc=r;n=Fe(n);return jf(t,new xe(Yb,e,n))}function lf(t,e,n){n=n||!1;e=t.Hb.Od(e);return null==e?[]:jf(t,new Wb(e,n))}function mf(t,e,n){n=Fe(n);return jf(t,new xe(ze,e,n))}function nf(t,e,n,r){r=of(t,r);if(null!=r){var i=pf(r);r=i.path;i=i.Ib;e=N(r,e);n=new Ub(new ye(!1,!0,i,!0),e,n);return qf(t,r,n)}return[]}function rf(t,e,n,r){if(r=of(t,r)){var i=pf(r);r=i.path;i=i.Ib;e=N(r,e);n=Fe(n);n=new xe(new ye(!1,!0,i,!0),e,n);return qf(t,r,n)}return[]}gf.prototype.Ob=function(t,e){var n=t.path,r=null,i=!1;Me(this.sa,n,function(t,e){var o=N(t,n);r=e.hb(o);i=i||null!=df(e);return!r});var o=this.sa.get(n);o?(i=i||null!=df(o),r=r||o.hb(F)):(o=new cf,this.sa=this.sa.set(n,o));var s;null!=r?s=!0:(s=!1,r=C,Pe(this.sa.subtree(n),function(t,e){var n=e.hb(F);n&&(r=r.Q(t,n))}));var u=null!=ff(o,t);if(!u&&!de(t.o)){var a=sf(t);J(!(a in this.kc),"View does not exist, but we have a tag");var c=tf++;this.kc[a]=c;this.$e["_"+c]=a}s=o.Ob(t,e,new bf(n,this.Hb),r,s);u||i||(o=ff(o,t),s=s.concat(uf(this,t,o)));return s};gf.prototype.kb=function(t,e,n){var r=t.path,i=this.sa.get(r),o=[];if(i&&("default"===t.wa()||null!=ff(i,t))){o=i.kb(t,e,n);i.e()&&(this.sa=this.sa.remove(r));i=o.Hg;o=o.jg;e=-1!==Ua(i,function(t){return de(t.o)});var s=Ke(this.sa,r,function(t,e){return null!=df(e)});if(e&&!s&&(r=this.sa.subtree(r),!r.e()))for(var r=vf(r),u=0;u<r.length;++u){var a=r[u],c=a.V,a=wf(this,a);this.Mc.Xe(c,xf(this,c),a.ud,a.J)}if(!s&&0<i.length&&!n)if(e)this.Mc.Zd(t,null);else{var h=this;Oa(i,function(t){t.wa();var e=h.kc[sf(t)];h.Mc.Zd(t,e)})}yf(this,i)}return o};gf.prototype.ua=function(t,e){var n=this.Hb,r=Ke(this.sa,t,function(e,n){var r=N(e,t);if(r=n.hb(r))return r});return n.ua(t,r,e,!0)};function vf(t){return Ie(t,function(t,e,n){if(e&&null!=df(e))return[df(e)];var i=[];e&&(i=ef(e));r(n,function(t){i=i.concat(t)});return i})}function yf(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!de(r.o)){var r=sf(r),i=t.kc[r];delete t.kc[r];delete t.$e["_"+i]}}}function uf(t,e,n){var i=e.path,o=xf(t,e);n=wf(t,n);e=t.Mc.Xe(e,o,n.ud,n.J);i=t.sa.subtree(i);if(o)J(null==df(i.value),"If we're adding a query, it shouldn't be shadowed");else for(o=Ie(i,function(t,e,n){if(!t.e()&&e&&null!=df(e))return[ue(df(e))];var i=[];e&&(i=i.concat(Qa(ef(e),function(t){return t.V})));r(n,function(t){i=i.concat(t)});return i}),i=0;i<o.length;++i)n=o[i],t.Mc.Zd(n,xf(t,n));return e}function wf(t,e){var n=e.V,r=xf(t,n);return{ud:function(){return(e.u()||C).hash()},J:function(e){if("ok"===e){if(r){var i=n.path;if(e=of(t,r)){var o=pf(e);e=o.path;o=o.Ib;i=N(e,i);i=new Zb(new ye(!1,!0,o,!0),i);e=qf(t,e,i)}else e=[]}else e=jf(t,new Zb(ze,n.path));return e}i="Unknown Error";
"too_big"===e?i="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?i="Client doesn't have permission to access the desired data.":"unavailable"==e&&(i="The service is unavailable");i=Error(e+": "+i);i.code=e.toUpperCase();return t.kb(n,null,i)}}}function sf(t){return t.path.toString()+"$"+t.wa()}function pf(t){var e=t.indexOf("$");J(-1!==e&&e<t.length-1,"Bad queryKey.");return{Ib:t.substr(e+1),path:new K(t.substr(0,e))}}function of(t,e){var n=t.$e,r="_"+e;return r in n?n[r]:void 0}function xf(t,e){var n=sf(e);return w(t.kc,n)}var tf=1;function qf(t,e,n){var r=t.sa.get(e);J(r,"Missing sync point for query tag that we're tracking");return r.bb(n,new bf(e,t.Hb),null)}function jf(t,e){return zf(t,e,t.sa,null,new bf(F,t.Hb))}function zf(t,e,n,r,i){if(e.path.e())return Af(t,e,n,r,i);var o=n.get(F);null==r&&null!=o&&(r=o.hb(F));var s=[],u=O(e.path),a=e.Wc(u);if((n=n.children.get(u))&&a)var c=r?r.M(u):null,u=i.w(u),s=s.concat(zf(t,a,n,c,u));o&&(s=s.concat(o.bb(e,i,r)));return s}function Af(t,e,n,r,i){var o=n.get(F);null==r&&null!=o&&(r=o.hb(F));var s=[];n.children.ha(function(n,o){var u=r?r.M(n):null,a=i.w(n),c=e.Wc(n);c&&(s=s.concat(Af(t,c,o,u,a)))});o&&(s=s.concat(o.bb(e,i,r)));return s}function Bf(){this.children={};this.kd=0;this.value=null}function Cf(t,e,n){this.Dd=t?t:"";this.Yc=e?e:null;this.B=n?n:new Bf}function Df(t,e){for(var n=e instanceof K?e:new K(e),r=t,i;null!==(i=O(n));)r=new Cf(i,r,w(r.B.children,i)||new Bf),n=G(n);return r}h=Cf.prototype;h.Ba=function(){return this.B.value};function Ef(t,e){J("undefined"!==typeof e,"Cannot set value to undefined");t.B.value=e;Ff(t)}h.clear=function(){this.B.value=null;this.B.children={};this.B.kd=0;Ff(this)};h.td=function(){return 0<this.B.kd};h.e=function(){return null===this.Ba()&&!this.td()};h.U=function(t){var e=this;r(this.B.children,function(n,r){t(new Cf(r,e,n))})};function Gf(t,e,n,r){n&&!r&&e(t);t.U(function(t){Gf(t,e,!0,r)});n&&r&&e(t)}function Hf(t,e){for(var n=t.parent();null!==n&&!e(n);)n=n.parent()}h.path=function(){return new K(null===this.Yc?this.Dd:this.Yc.path()+"/"+this.Dd)};h.name=function(){return this.Dd};h.parent=function(){return this.Yc};function Ff(t){if(null!==t.Yc){var e=t.Yc,n=t.Dd,r=t.e(),i=u(e.B.children,n);r&&i?(delete e.B.children[n],e.B.kd--,Ff(e)):r||i||(e.B.children[n]=t.B,e.B.kd++,Ff(e))}}function If(t){J(ea(t)&&0<t.length,"Requires a non-empty array");this.Uf=t;this.Nc={}}If.prototype.de=function(t,e){for(var n=this.Nc[t]||[],r=0;r<n.length;r++)n[r].yc.apply(n[r].Ma,Array.prototype.slice.call(arguments,1))};If.prototype.Eb=function(t,e,n){Jf(this,t);this.Nc[t]=this.Nc[t]||[];this.Nc[t].push({yc:e,Ma:n});(t=this.ze(t))&&e.apply(n,t)};If.prototype.gc=function(t,e,n){Jf(this,t);t=this.Nc[t]||[];for(var r=0;r<t.length;r++)if(t[r].yc===e&&(!n||n===t[r].Ma)){t.splice(r,1);break}};function Jf(t,e){J(Ta(t.Uf,function(t){return t===e}),"Unknown event: "+e)}var Kf=function(){var t=0,e=[];return function(n){var r=n===t;t=n;for(var i=Array(8),o=7;0<=o;o--)i[o]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(n%64),n=Math.floor(n/64);J(0===n,"Cannot push at time == 0");n=i.join("");if(r){for(o=11;0<=o&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;12>o;o++)e[o]=Math.floor(64*Math.random());for(o=0;12>o;o++)n+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(e[o]);J(20===n.length,"nextPushId: Length should be 20.");return n}}();function Lf(){If.call(this,["online"]);this.ic=!0;if("undefined"!==typeof window&&"undefined"!==typeof window.addEventListener){var t=this;window.addEventListener("online",function(){t.ic||(t.ic=!0,t.de("online",!0))},!1);window.addEventListener("offline",function(){t.ic&&(t.ic=!1,t.de("online",!1))},!1)}}ma(Lf,If);Lf.prototype.ze=function(t){J("online"===t,"Unknown event type: "+t);return[this.ic]};ca(Lf);function Mf(){If.call(this,["visible"]);var t,e;"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(e="visibilitychange",t="hidden"):"undefined"!==typeof document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document.msHidden?(e="msvisibilitychange",t="msHidden"):"undefined"!==typeof document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden"));this.uc=!0;if(e){var n=this;document.addEventListener(e,function(){var e=!document[t];e!==n.uc&&(n.uc=e,n.de("visible",e))},!1)}}ma(Mf,If);Mf.prototype.ze=function(t){J("visible"===t,"Unknown event type: "+t);return[this.uc]};ca(Mf);var Nf=/[\[\].#$\/\u0000-\u001F\u007F]/,Of=/[\[\].#$\u0000-\u001F\u007F]/,Pf=/^[a-zA-Z][a-zA-Z._\-+]+$/;function Qf(t){return p(t)&&0!==t.length&&!Nf.test(t)}function Rf(t){return null===t||p(t)||ga(t)&&!Sc(t)||ia(t)&&u(t,".sv")}function Sf(t,e,r,i){i&&!n(e)||Tf(z(t,1,i),e,r)}function Tf(t,e,r){r instanceof K&&(r=new wc(r,t));if(!n(e))throw Error(t+"contains undefined "+zc(r));if(ha(e))throw Error(t+"contains a function "+zc(r)+" with contents: "+e.toString());if(Sc(e))throw Error(t+"contains "+e.toString()+" "+zc(r));if(p(e)&&e.length>10485760/3&&10485760<xc(e))throw Error(t+"contains a string greater than 10485760 utf8 bytes "+zc(r)+" ('"+e.substring(0,50)+"...')");if(ia(e)){var i=!1,o=!1;hb(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Qf(e)))throw Error(t+" contains an invalid key ("+e+") "+zc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e);Tf(t,n,r);r.pop()});if(i&&o)throw Error(t+' contains ".value" child '+zc(r)+" in addition to actual children.")}}function Uf(t,e,n){if(!ia(e)||ea(e))throw Error(z(t,1,!1)+" must be an Object containing the children to replace.");if(u(e,".value"))throw Error(z(t,1,!1)+' must not contain ".value".  To overwrite with a leaf value, just use .set() instead.');Sf(t,e,n,!1)}function Vf(t,e,n){if(Sc(n))throw Error(z(t,e,!1)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Rf(n))throw Error(z(t,e,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}function Wf(t,e,r){if(!r||n(e))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(z(t,1,r)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Xf(t,e,r,i){if((!i||n(r))&&!Qf(r))throw Error(z(t,e,i)+'was an invalid key: "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Yf(t,e){if(!p(e)||0===e.length||Of.test(e))throw Error(z(t,1,!1)+'was an invalid path: "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Zf(t,e){if(".info"===O(e))throw Error(t+" failed: Can't modify data under /.info/")}function $f(t,e){if(!p(e))throw Error(z(t,1,!1)+"must be a valid credential (a string).")}function ag(t,e,n){if(!p(n))throw Error(z(t,e,!1)+"must be a valid string.")}function bg(t,e){ag(t,1,e);if(!Pf.test(e))throw Error(z(t,1,!1)+"'"+e+"' is not a valid authentication provider.")}function cg(t,e,r,i){if(!i||n(r))if(!ia(r)||null===r)throw Error(z(t,e,i)+"must be a valid object.")}function dg(t,e,n){if(!ia(e)||!u(e,n))throw Error(z(t,1,!1)+'must contain the key "'+n+'"');if(!p(w(e,n)))throw Error(z(t,1,!1)+'must contain the key "'+n+'" with type "string"')}function eg(){this.set={}}h=eg.prototype;h.add=function(t,e){this.set[t]=null!==e?e:!0};h.contains=function(t){return u(this.set,t)};h.get=function(t){return this.contains(t)?this.set[t]:void 0};h.remove=function(t){delete this.set[t]};h.clear=function(){this.set={}};h.e=function(){return wa(this.set)};h.count=function(){return pa(this.set)};function fg(t,e){r(t.set,function(t,n){e(n,t)})}h.keys=function(){var t=[];r(this.set,function(e,n){t.push(n)});return t};function qc(){this.m=this.C=null}qc.prototype.find=function(t){if(null!=this.C)return this.C.oa(t);if(t.e()||null==this.m)return null;var e=O(t);t=G(t);return this.m.contains(e)?this.m.get(e).find(t):null};qc.prototype.mc=function(t,e){if(t.e())this.C=e,this.m=null;else if(null!==this.C)this.C=this.C.G(t,e);else{null==this.m&&(this.m=new eg);var n=O(t);this.m.contains(n)||this.m.add(n,new qc);n=this.m.get(n);t=G(t);n.mc(t,e)}};function gg(t,e){if(e.e())return t.C=null,t.m=null,!0;if(null!==t.C){if(t.C.N())return!1;var n=t.C;t.C=null;n.U(M,function(e,n){t.mc(new K(e),n)});return gg(t,e)}return null!==t.m?(n=O(e),e=G(e),t.m.contains(n)&&gg(t.m.get(n),e)&&t.m.remove(n),t.m.e()?(t.m=null,!0):!1):!0}function rc(t,e,n){null!==t.C?n(e,t.C):t.U(function(t,r){var i=new K(e.toString()+"/"+t);rc(r,i,n)})}qc.prototype.U=function(t){null!==this.m&&fg(this.m,function(e,n){t(e,n)})};var hg="auth.firebase.com";function ig(t,e,n){this.ld=t||{};this.ce=e||{};this.ab=n||{};this.ld.remember||(this.ld.remember="default")}var jg=["remember","redirectTo"];function kg(t){var e={},n={};hb(t||{},function(t,r){0<=Na(jg,t)?e[t]=r:n[t]=r});return new ig(e,{},n)}function lg(t,e){this.Pe=["session",t.Ld,t.Cb].join(":");this.$d=e}lg.prototype.set=function(t,e){if(!e)if(this.$d.length)e=this.$d[0];else throw Error("fb.login.SessionManager : No storage options available!");e.set(this.Pe,t)};lg.prototype.get=function(){var t=Qa(this.$d,q(this.ng,this)),t=Pa(t,function(t){return null!==t});Xa(t,function(t,e){return bd(e.token)-bd(t.token)});return 0<t.length?t.shift():null};lg.prototype.ng=function(t){try{var e=t.get(this.Pe);if(e&&e.token)return e}catch(n){}return null};lg.prototype.clear=function(){var t=this;Oa(this.$d,function(e){e.remove(t.Pe)})};function mg(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ng(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mg())}function og(){return"undefined"!==typeof location&&/^file:\//.test(location.href)}function pg(t){var e=mg();if(""===e)return!1;if("Microsoft Internet Explorer"===navigator.appName){if((e=e.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<e.length)return parseFloat(e[1])>=t}else if(-1<e.indexOf("Trident")&&(e=e.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<e.length)return parseFloat(e[1])>=t;return!1}function qg(){var t=window.opener.frames,e;for(e=t.length-1;0<=e;e--)try{if(t[e].location.protocol===window.location.protocol&&t[e].location.host===window.location.host&&"__winchan_relay_frame"===t[e].name)return t[e]}catch(n){}return null}function rg(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener&&t.addEventListener(e,n,!1)}function sg(t,e,n){t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener&&t.removeEventListener(e,n,!1)}function tg(t){/^https?:\/\//.test(t)||(t=window.location.href);var e=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(t);return e?e[1]:t}function ug(t){var e="";try{t=t.replace("#","");var n=kb(t);n&&u(n,"__firebase_request_key")&&(e=w(n,"__firebase_request_key"))}catch(r){}return e}function vg(){var t=Rc(hg);return t.scheme+"://"+t.host+"/v2"}function wg(t){return vg()+"/"+t+"/auth/channel"}function xg(t){var e=this;this.zc=t;this.ae="*";pg(8)?this.Qc=this.wd=qg():(this.Qc=window.opener,this.wd=window);if(!e.Qc)throw"Unable to find relay frame";rg(this.wd,"message",q(this.hc,this));rg(this.wd,"message",q(this.Af,this));try{yg(this,{a:"ready"})}catch(n){rg(this.Qc,"load",function(){yg(e,{a:"ready"})})}rg(window,"unload",q(this.yg,this))}function yg(t,e){e=B(e);pg(8)?t.Qc.doPost(e,t.ae):t.Qc.postMessage(e,t.ae)}xg.prototype.hc=function(t){var e=this,n;try{n=mb(t.data)}catch(r){}n&&"request"===n.a&&(sg(window,"message",this.hc),this.ae=t.origin,this.zc&&setTimeout(function(){e.zc(e.ae,n.d,function(t,n){e.ag=!n;e.zc=void 0;yg(e,{a:"response",d:t,forceKeepWindowOpen:n})})},0))};xg.prototype.yg=function(){try{sg(this.wd,"message",this.Af)}catch(t){}this.zc&&(yg(this,{a:"error",d:"unknown closed window"}),this.zc=void 0);try{window.close()}catch(e){}};xg.prototype.Af=function(t){if(this.ag&&"die"===t.data)try{window.close()}catch(e){}};function zg(t){this.oc=Ga()+Ga()+Ga();this.Df=t}zg.prototype.open=function(t,e){P.set("redirect_request_id",this.oc);P.set("redirect_request_id",this.oc);e.requestId=this.oc;e.redirectTo=e.redirectTo||window.location.href;t+=(/\?/.test(t)?"":"?")+jb(e);window.location=t};zg.isAvailable=function(){return!og()&&!ng()};zg.prototype.Bc=function(){return"redirect"};var Ag={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};function Bg(t){var e=Error(w(Ag,t),t);e.code=t;return e}function Cg(t){var e;(e=!t.window_features)||(e=mg(),e=-1!==e.indexOf("Fennec/")||-1!==e.indexOf("Firefox/")&&-1!==e.indexOf("Android"));e&&(t.window_features=void 0);t.window_name||(t.window_name="_blank");this.options=t}Cg.prototype.open=function(t,e,n){function r(t){s&&(document.body.removeChild(s),s=void 0);h&&(h=clearInterval(h));sg(window,"message",i);sg(window,"unload",r);if(c&&!t)try{c.close()}catch(e){u.postMessage("die",a)}c=u=void 0}function i(t){if(t.origin===a)try{var e=mb(t.data);"ready"===e.a?u.postMessage(f,a):"error"===e.a?(r(!1),n&&(n(e.d),n=null)):"response"===e.a&&(r(e.forceKeepWindowOpen),n&&(n(null,e.d),n=null))}catch(i){}}var o=pg(8),s,u;if(!this.options.relay_url)return n(Error("invalid arguments: origin of url and relay_url must match"));var a=tg(t);if(a!==tg(this.options.relay_url))n&&setTimeout(function(){n(Error("invalid arguments: origin of url and relay_url must match"))},0);else{o&&(s=document.createElement("iframe"),s.setAttribute("src",this.options.relay_url),s.style.display="none",s.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(s),u=s.contentWindow);t+=(/\?/.test(t)?"":"?")+jb(e);var c=window.open(t,this.options.window_name,this.options.window_features);u||(u=c);var h=setInterval(function(){c&&c.closed&&(r(!1),n&&(n(Bg("USER_CANCELLED")),n=null))},500),f=B({a:"request",d:e});rg(window,"unload",r);rg(window,"message",i)}};Cg.isAvailable=function(){var t;if(t="postMessage"in window&&!og())(t=ng()||"undefined"!==typeof navigator&&(!!mg().match(/Windows Phone/)||!!window.Windows&&/^ms-appx:/.test(location.href)))||(t=mg(),t="undefined"!==typeof navigator&&"undefined"!==typeof window&&!!(t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||t.match(/CriOS/)||t.match(/Twitter for iPhone/)||t.match(/FBAN\/FBIOS/)||window.navigator.standalone)),t=!t;return t&&!mg().match(/PhantomJS/)};Cg.prototype.Bc=function(){return"popup"};function Dg(t){t.method||(t.method="GET");t.headers||(t.headers={});t.headers.content_type||(t.headers.content_type="application/json");t.headers.content_type=t.headers.content_type.toLowerCase();this.options=t}Dg.prototype.open=function(t,e,n){function r(){n&&(n(Bg("REQUEST_INTERRUPTED")),n=null)}var i=new XMLHttpRequest,o=this.options.method.toUpperCase(),s;rg(window,"beforeunload",r);i.onreadystatechange=function(){if(n&&4===i.readyState){var t;if(200<=i.status&&300>i.status){try{t=mb(i.responseText)}catch(e){}n(null,t)}else 500<=i.status&&600>i.status?n(Bg("SERVER_ERROR")):n(Bg("NETWORK_ERROR"));n=null;sg(window,"beforeunload",r)}};if("GET"===o)t+=(/\?/.test(t)?"":"?")+jb(e),s=null;else{var u=this.options.headers.content_type;"application/json"===u&&(s=B(e));"application/x-www-form-urlencoded"===u&&(s=jb(e))}i.open(o,t,!0);t={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"};za(t,this.options.headers);for(var a in t)i.setRequestHeader(a,t[a]);i.send(s)};Dg.isAvailable=function(){var t;if(t=!!window.XMLHttpRequest)t=mg(),t=!(t.match(/MSIE/)||t.match(/Trident/))||pg(10);return t};Dg.prototype.Bc=function(){return"json"};function Eg(t){this.oc=Ga()+Ga()+Ga();this.Df=t}Eg.prototype.open=function(t,e,n){function r(){n&&(n(Bg("USER_CANCELLED")),n=null)}var i=this,o=Rc(hg),s;e.requestId=this.oc;e.redirectTo=o.scheme+"://"+o.host+"/blank/page.html";t+=/\?/.test(t)?"":"?";t+=jb(e);(s=window.open(t,"_blank","location=no"))&&ha(s.addEventListener)?(s.addEventListener("loadstart",function(t){var e;if(e=t&&t.url)t:{try{var u=document.createElement("a");u.href=t.url;e=u.host===o.host&&"/blank/page.html"===u.pathname;break t}catch(a){}e=!1}e&&(t=ug(t.url),s.removeEventListener("exit",r),s.close(),t=new ig(null,null,{requestId:i.oc,requestKey:t}),i.Df.requestWithCredential("/auth/session",t,n),n=null)}),s.addEventListener("exit",r)):n(Bg("TRANSPORT_UNAVAILABLE"))};Eg.isAvailable=function(){return ng()};Eg.prototype.Bc=function(){return"redirect"};function Fg(t){t.callback_parameter||(t.callback_parameter="callback");this.options=t;window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}Fg.prototype.open=function(t,e,n){function r(){n&&(n(Bg("REQUEST_INTERRUPTED")),n=null)}function i(){setTimeout(function(){window.__firebase_auth_jsonp[o]=void 0;wa(window.__firebase_auth_jsonp)&&(window.__firebase_auth_jsonp=void 0);try{var t=document.getElementById(o);t&&t.parentNode.removeChild(t)}catch(e){}},1);sg(window,"beforeunload",r)}var o="fn"+(new Date).getTime()+Math.floor(99999*Math.random());e[this.options.callback_parameter]="__firebase_auth_jsonp."+o;t+=(/\?/.test(t)?"":"?")+jb(e);rg(window,"beforeunload",r);window.__firebase_auth_jsonp[o]=function(t){n&&(n(null,t),n=null);i()};Gg(o,t,n)};function Gg(t,e,n){setTimeout(function(){try{var r=document.createElement("script");r.type="text/javascript";r.id=t;r.async=!0;r.src=e;r.onerror=function(){var e=document.getElementById(t);null!==e&&e.parentNode.removeChild(e);n&&n(Bg("NETWORK_ERROR"))};var i=document.getElementsByTagName("head");(i&&0!=i.length?i[0]:document.documentElement).appendChild(r)}catch(o){n&&n(Bg("NETWORK_ERROR"))}},0)}Fg.isAvailable=function(){return"undefined"!==typeof document&&null!=document.createElement};Fg.prototype.Bc=function(){return"json"};function Hg(t,e,n,r){If.call(this,["auth_status"]);this.H=t;this.df=e;this.Sg=n;this.Ke=r;this.rc=new lg(t,[Dc,P]);this.nb=null;this.Re=!1;Ig(this)}ma(Hg,If);h=Hg.prototype;h.we=function(){return this.nb||null};function Ig(t){P.get("redirect_request_id")&&Jg(t);var e=t.rc.get();e&&e.token?(Kg(t,e),t.df(e.token,function(n,r){Lg(t,n,r,!1,e.token,e)},function(e,n){Mg(t,"resumeSession()",e,n)})):Kg(t,null)}function Ng(t,e,n,r,i,o){"firebaseio-demo.com"===t.H.domain&&Q("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com.");t.df(e,function(o,s){Lg(t,o,s,!0,e,n,r||{},i)},function(e,n){Mg(t,"auth()",e,n,o)})}function Og(t,e){t.rc.clear();Kg(t,null);t.Sg(function(t,n){if("ok"===t)R(e,null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);i=Error(i);i.code=r;R(e,i)}})}function Lg(t,e,n,r,i,o,s,a){"ok"===e?(r&&(e=n.auth,o.auth=e,o.expires=n.expires,o.token=cd(i)?i:"",n=null,e&&u(e,"uid")?n=w(e,"uid"):u(o,"uid")&&(n=w(o,"uid")),o.uid=n,n="custom",e&&u(e,"provider")?n=w(e,"provider"):u(o,"provider")&&(n=w(o,"provider")),o.provider=n,t.rc.clear(),cd(i)&&(s=s||{},n=Dc,"sessionOnly"===s.remember&&(n=P),"none"!==s.remember&&t.rc.set(o,n)),Kg(t,o)),R(a,null,o)):(t.rc.clear(),Kg(t,null),o=t=(e||"error").toUpperCase(),n&&(o+=": "+n),o=Error(o),o.code=t,R(a,o))}function Mg(t,e,n,r,i){Q(e+" was canceled: "+r);t.rc.clear();Kg(t,null);t=Error(r);t.code=n.toUpperCase();R(i,t)}function Pg(t,e,n,r,i){Qg(t);n=new ig(r||{},{},n||{});Rg(t,[Dg,Fg],"/auth/"+e,n,i)}function Sg(t,e,n,r){Qg(t);var i=[Cg,Eg];n=kg(n);"anonymous"===e||"password"===e?setTimeout(function(){R(r,Bg("TRANSPORT_UNAVAILABLE"))},0):(n.ce.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width=625,top="+("object"===typeof screen?.5*(screen.height-625):0)+",left="+("object"===typeof screen?.5*(screen.width-625):0),n.ce.relay_url=wg(t.H.Cb),n.ce.requestWithCredential=q(t.pc,t),Rg(t,i,"/auth/"+e,n,r))}function Jg(t){var e=P.get("redirect_request_id");if(e){var n=P.get("redirect_client_options");P.remove("redirect_request_id");P.remove("redirect_client_options");var r=[Dg,Fg],e={requestId:e,requestKey:ug(document.location.hash)},n=new ig(n,{},e);t.Re=!0;try{document.location.hash=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,"")}catch(i){}Rg(t,r,"/auth/session",n,function(){this.Re=!1}.bind(t))}}h.re=function(t,e){Qg(this);var n=kg(t);n.ab._method="POST";this.pc("/users",n,function(t,n){t?R(e,t):R(e,t,n)})};h.Se=function(t,e){var n=this;Qg(this);var r="/users/"+encodeURIComponent(t.email),i=kg(t);i.ab._method="DELETE";this.pc(r,i,function(t,r){!t&&r&&r.uid&&n.nb&&n.nb.uid&&n.nb.uid===r.uid&&Og(n);R(e,t)})};h.oe=function(t,e){Qg(this);var n="/users/"+encodeURIComponent(t.email)+"/password",r=kg(t);r.ab._method="PUT";r.ab.password=t.newPassword;this.pc(n,r,function(t){R(e,t)})};h.ne=function(t,e){Qg(this);var n="/users/"+encodeURIComponent(t.oldEmail)+"/email",r=kg(t);r.ab._method="PUT";r.ab.email=t.newEmail;r.ab.password=t.password;this.pc(n,r,function(t){R(e,t)})};h.Ue=function(t,e){Qg(this);var n="/users/"+encodeURIComponent(t.email)+"/password",r=kg(t);r.ab._method="POST";this.pc(n,r,function(t){R(e,t)})};h.pc=function(t,e,n){Tg(this,[Dg,Fg],t,e,n)};function Rg(t,e,n,r,i){Tg(t,e,n,r,function(e,n){!e&&n&&n.token&&n.uid?Ng(t,n.token,n,r.ld,function(t,e){t?R(i,t):R(i,null,e)}):R(i,e||Bg("UNKNOWN_ERROR"))})}function Tg(t,e,n,r,i){e=Pa(e,function(t){return"function"===typeof t.isAvailable&&t.isAvailable()});0===e.length?setTimeout(function(){R(i,Bg("TRANSPORT_UNAVAILABLE"))},0):(e=new(e.shift())(r.ce),r=ib(r.ab),r.v="js-2.2.7",r.transport=e.Bc(),r.suppress_status_codes=!0,t=vg()+"/"+t.H.Cb+n,e.open(t,r,function(t,e){if(t)R(i,t);else if(e&&e.error){var n=Error(e.error.message);n.code=e.error.code;n.details=e.error.details;R(i,n)}else R(i,null,e)}))}function Kg(t,e){var n=null!==t.nb||null!==e;t.nb=e;n&&t.de("auth_status",e);t.Ke(null!==e)}h.ze=function(t){J("auth_status"===t,'initial event must be of type "auth_status"');return this.Re?null:[this.nb]};function Qg(t){var e=t.H;if("firebaseio.com"!==e.domain&&"firebaseio-demo.com"!==e.domain&&"auth.firebase.com"===hg)throw Error("This custom Firebase server ('"+t.H.domain+"') does not support delegated login.")}function Ug(t){this.hc=t;this.Kd=[];this.Qb=0;this.pe=-1;this.Fb=null}function Vg(t,e,n){t.pe=e;t.Fb=n;t.pe<t.Qb&&(t.Fb(),t.Fb=null)}function Wg(t,e,n){for(t.Kd[e]=n;t.Kd[t.Qb];){var r=t.Kd[t.Qb];delete t.Kd[t.Qb];for(var i=0;i<r.length;++i)if(r[i]){var o=t;Cb(function(){o.hc(r[i])})}if(t.Qb===t.pe){t.Fb&&(clearTimeout(t.Fb),t.Fb(),t.Fb=null);break}t.Qb++}}function Xg(t,e,n){this.qe=t;this.f=Oc(t);this.ob=this.pb=0;this.Va=Ob(e);this.Vd=n;this.Gc=!1;this.gd=function(t){e.host!==e.Oa&&(t.ns=e.Cb);var n=[],r;for(r in t)t.hasOwnProperty(r)&&n.push(r+"="+t[r]);return(e.lb?"https://":"http://")+e.Oa+"/.lp?"+n.join("&")}}var Yg,Zg;Xg.prototype.open=function(t,e){this.gf=0;this.ka=e;this.zf=new Ug(t);this.zb=!1;var n=this;this.rb=setTimeout(function(){n.f("Timed out trying to connect.");n.ib();n.rb=null},Math.floor(3e4));Tc(function(){if(!n.zb){n.Ta=new $g(function(t,e,r,i,o){ah(n,arguments);if(n.Ta)if(n.rb&&(clearTimeout(n.rb),n.rb=null),n.Gc=!0,"start"==t)n.id=e,n.Ff=r;else if("close"===t)e?(n.Ta.Td=!1,Vg(n.zf,e,function(){n.ib()})):n.ib();else throw Error("Unrecognized command received: "+t)},function(t,e){ah(n,arguments);Wg(n.zf,t,e)},function(){n.ib()},n.gd);var t={start:"t"};t.ser=Math.floor(1e8*Math.random());n.Ta.fe&&(t.cb=n.Ta.fe);t.v="5";n.Vd&&(t.s=n.Vd);"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");t=n.gd(t);n.f("Connecting via long-poll to "+t);bh(n.Ta,t,function(){})}})};Xg.prototype.start=function(){var t=this.Ta,e=this.Ff;t.rg=this.id;t.sg=e;for(t.ke=!0;ch(t););t=this.id;e=this.Ff;this.fc=document.createElement("iframe");var n={dframe:"t"};n.id=t;n.pw=e;this.fc.src=this.gd(n);this.fc.style.display="none";document.body.appendChild(this.fc)};Xg.isAvailable=function(){return Yg||!Zg&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.Ug)};h=Xg.prototype;h.Bd=function(){};h.cd=function(){this.zb=!0;this.Ta&&(this.Ta.close(),this.Ta=null);this.fc&&(document.body.removeChild(this.fc),this.fc=null);this.rb&&(clearTimeout(this.rb),this.rb=null)};h.ib=function(){this.zb||(this.f("Longpoll is closing itself"),this.cd(),this.ka&&(this.ka(this.Gc),this.ka=null))};h.close=function(){this.zb||(this.f("Longpoll is being closed."),this.cd())};h.send=function(t){t=B(t);this.pb+=t.length;Lb(this.Va,"bytes_sent",t.length);t=Kc(t);t=fb(t,!0);t=Xc(t,1840);for(var e=0;e<t.length;e++){var n=this.Ta;n.$c.push({Jg:this.gf,Rg:t.length,jf:t[e]});n.ke&&ch(n);this.gf++}};function ah(t,e){var n=B(e).length;t.ob+=n;Lb(t.Va,"bytes_received",n)}function $g(t,e,n,r){this.gd=r;this.jb=n;this.Oe=new eg;this.$c=[];this.se=Math.floor(1e8*Math.random());this.Td=!0;this.fe=Gc();window["pLPCommand"+this.fe]=t;window["pRTLPCB"+this.fe]=e;t=document.createElement("iframe");t.style.display="none";if(document.body){document.body.appendChild(t);try{t.contentWindow.document||Bb("No IE domain setting required")}catch(i){t.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";t.contentDocument?t.gb=t.contentDocument:t.contentWindow?t.gb=t.contentWindow.document:t.document&&(t.gb=t.document);this.Ca=t;t="";this.Ca.src&&"javascript:"===this.Ca.src.substr(0,11)&&(t='<script>document.domain="'+document.domain+'";</script>');t="<html><body>"+t+"</body></html>";try{this.Ca.gb.open(),this.Ca.gb.write(t),this.Ca.gb.close()}catch(o){Bb("frame writing exception"),o.stack&&Bb(o.stack),Bb(o)}}$g.prototype.close=function(){this.ke=!1;if(this.Ca){this.Ca.gb.body.innerHTML="";var t=this;setTimeout(function(){null!==t.Ca&&(document.body.removeChild(t.Ca),t.Ca=null)},Math.floor(0))}var e=this.jb;e&&(this.jb=null,e())};function ch(t){if(t.ke&&t.Td&&t.Oe.count()<(0<t.$c.length?2:1)){t.se++;var e={};e.id=t.rg;e.pw=t.sg;e.ser=t.se;for(var e=t.gd(e),n="",r=0;0<t.$c.length;)if(1870>=t.$c[0].jf.length+30+n.length){var i=t.$c.shift(),n=n+"&seg"+r+"="+i.Jg+"&ts"+r+"="+i.Rg+"&d"+r+"="+i.jf;r++}else break;dh(t,e+n,t.se);return!0}return!1}function dh(t,e,n){function r(){t.Oe.remove(n);ch(t)}t.Oe.add(n,1);var i=setTimeout(r,Math.floor(25e3));bh(t,e,function(){clearTimeout(i);r()})}function bh(t,e,n){setTimeout(function(){try{if(t.Td){var r=t.Ca.gb.createElement("script");r.type="text/javascript";r.async=!0;r.src=e;r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())};r.onerror=function(){Bb("Long-poll script failed to load: "+e);t.Td=!1;t.close()};t.Ca.gb.body.appendChild(r)}}catch(i){}},Math.floor(1))}var eh=null;"undefined"!==typeof MozWebSocket?eh=MozWebSocket:"undefined"!==typeof WebSocket&&(eh=WebSocket);function fh(t,e,n){this.qe=t;this.f=Oc(this.qe);this.frames=this.Jc=null;this.ob=this.pb=this.bf=0;this.Va=Ob(e);this.fb=(e.lb?"wss://":"ws://")+e.Oa+"/.ws?v=5";"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(this.fb+="&r=f");e.host!==e.Oa&&(this.fb=this.fb+"&ns="+e.Cb);n&&(this.fb=this.fb+"&s="+n)}var gh;fh.prototype.open=function(t,e){this.jb=e;this.wg=t;this.f("Websocket connecting to "+this.fb);this.Gc=!1;Dc.set("previous_websocket_failure",!0);try{this.va=new eh(this.fb)}catch(n){this.f("Error instantiating WebSocket.");var r=n.message||n.data;r&&this.f(r);this.ib();return}var i=this;this.va.onopen=function(){i.f("Websocket connected.");i.Gc=!0};this.va.onclose=function(){i.f("Websocket connection was disconnected.");i.va=null;i.ib()};this.va.onmessage=function(t){if(null!==i.va)if(t=t.data,i.ob+=t.length,Lb(i.Va,"bytes_received",t.length),hh(i),null!==i.frames)ih(i,t);else{t:{J(null===i.frames,"We already have a frame buffer");if(6>=t.length){var e=Number(t);if(!isNaN(e)){i.bf=e;i.frames=[];t=null;break t}}i.bf=1;i.frames=[]}null!==t&&ih(i,t)}};this.va.onerror=function(t){i.f("WebSocket error.  Closing connection.");(t=t.message||t.data)&&i.f(t);i.ib()}};fh.prototype.start=function(){};fh.isAvailable=function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&4.4>parseFloat(e[1])&&(t=!0)}return!t&&null!==eh&&!gh};fh.responsesRequiredToBeHealthy=2;fh.healthyTimeout=3e4;h=fh.prototype;h.Bd=function(){Dc.remove("previous_websocket_failure")};function ih(t,e){t.frames.push(e);if(t.frames.length==t.bf){var n=t.frames.join("");t.frames=null;n=mb(n);t.wg(n)}}h.send=function(t){hh(this);t=B(t);this.pb+=t.length;Lb(this.Va,"bytes_sent",t.length);t=Xc(t,16384);1<t.length&&this.va.send(String(t.length));for(var e=0;e<t.length;e++)this.va.send(t[e])};h.cd=function(){this.zb=!0;this.Jc&&(clearInterval(this.Jc),this.Jc=null);this.va&&(this.va.close(),this.va=null)};h.ib=function(){this.zb||(this.f("WebSocket is closing itself"),this.cd(),this.jb&&(this.jb(this.Gc),this.jb=null))};h.close=function(){this.zb||(this.f("WebSocket is being closed"),this.cd())};function hh(t){clearInterval(t.Jc);t.Jc=setInterval(function(){t.va&&t.va.send("0");hh(t)},Math.floor(45e3))}function jh(t){kh(this,t)}var lh=[Xg,fh];function kh(t,e){var n=fh&&fh.isAvailable(),r=n&&!(Dc.uf||!0===Dc.get("previous_websocket_failure"));e.Tg&&(n||Q("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0);if(r)t.ed=[fh];else{var i=t.ed=[];Yc(lh,function(t,e){e&&e.isAvailable()&&i.push(e)})}}function mh(t){if(0<t.ed.length)return t.ed[0];throw Error("No transports available")}function nh(t,e,n,r,i,o){this.id=t;this.f=Oc("c:"+this.id+":");this.hc=n;this.Vc=r;this.ka=i;this.Me=o;this.H=e;this.Jd=[];this.ef=0;this.Nf=new jh(e);this.Ua=0;this.f("Connection created");oh(this)}function oh(t){var e=mh(t.Nf);t.L=new e("c:"+t.id+":"+t.ef++,t.H);t.Qe=e.responsesRequiredToBeHealthy||0;var n=ph(t,t.L),r=qh(t,t.L);t.fd=t.L;t.bd=t.L;t.F=null;t.Ab=!1;setTimeout(function(){t.L&&t.L.open(n,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(t.vd=setTimeout(function(){t.vd=null;t.Ab||(t.L&&102400<t.L.ob?(t.f("Connection exceeded healthy timeout but has received "+t.L.ob+" bytes.  Marking connection healthy."),t.Ab=!0,t.L.Bd()):t.L&&10240<t.L.pb?t.f("Connection exceeded healthy timeout but has sent "+t.L.pb+" bytes.  Leaving connection alive."):(t.f("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))}function qh(t,e){return function(n){e===t.L?(t.L=null,n||0!==t.Ua?1===t.Ua&&t.f("Realtime connection lost."):(t.f("Realtime connection failed."),"s-"===t.H.Oa.substr(0,2)&&(Dc.remove("host:"+t.H.host),t.H.Oa=t.H.host)),t.close()):e===t.F?(t.f("Secondary connection lost."),n=t.F,t.F=null,t.fd!==n&&t.bd!==n||t.close()):t.f("closing an old connection")}}function ph(t,e){return function(n){if(2!=t.Ua)if(e===t.bd){var r=Vc("t",n);n=Vc("d",n);if("c"==r){if(r=Vc("t",n),"d"in n)if(n=n.d,"h"===r){var r=n.ts,i=n.v,o=n.h;t.Vd=n.s;Fc(t.H,o);0==t.Ua&&(t.L.start(),rh(t,t.L,r),"5"!==i&&Q("Protocol version mismatch detected"),n=t.Nf,(n=1<n.ed.length?n.ed[1]:null)&&sh(t,n))}else if("n"===r){t.f("recvd end transmission on primary");t.bd=t.F;for(n=0;n<t.Jd.length;++n)t.Fd(t.Jd[n]);t.Jd=[];th(t)}else"s"===r?(t.f("Connection shutdown command received. Shutting down..."),t.Me&&(t.Me(n),t.Me=null),t.ka=null,t.close()):"r"===r?(t.f("Reset packet received.  New host: "+n),Fc(t.H,n),1===t.Ua?t.close():(uh(t),
oh(t))):"e"===r?Pc("Server Error: "+n):"o"===r?(t.f("got pong on primary."),vh(t),wh(t)):Pc("Unknown control packet command: "+r)}else"d"==r&&t.Fd(n)}else if(e===t.F)if(r=Vc("t",n),n=Vc("d",n),"c"==r)"t"in n&&(n=n.t,"a"===n?xh(t):"r"===n?(t.f("Got a reset on secondary, closing it"),t.F.close(),t.fd!==t.F&&t.bd!==t.F||t.close()):"o"===n&&(t.f("got pong on secondary."),t.Lf--,xh(t)));else if("d"==r)t.Jd.push(n);else throw Error("Unknown protocol layer: "+r);else t.f("message on old connection")}}nh.prototype.Da=function(t){yh(this,{t:"d",d:t})};function th(t){t.fd===t.F&&t.bd===t.F&&(t.f("cleaning up and promoting a connection: "+t.F.qe),t.L=t.F,t.F=null)}function xh(t){0>=t.Lf?(t.f("Secondary connection is healthy."),t.Ab=!0,t.F.Bd(),t.F.start(),t.f("sending client ack on secondary"),t.F.send({t:"c",d:{t:"a",d:{}}}),t.f("Ending transmission on primary"),t.L.send({t:"c",d:{t:"n",d:{}}}),t.fd=t.F,th(t)):(t.f("sending ping on secondary."),t.F.send({t:"c",d:{t:"p",d:{}}}))}nh.prototype.Fd=function(t){vh(this);this.hc(t)};function vh(t){t.Ab||(t.Qe--,0>=t.Qe&&(t.f("Primary connection is healthy."),t.Ab=!0,t.L.Bd()))}function sh(t,e){t.F=new e("c:"+t.id+":"+t.ef++,t.H,t.Vd);t.Lf=e.responsesRequiredToBeHealthy||0;t.F.open(ph(t,t.F),qh(t,t.F));setTimeout(function(){t.F&&(t.f("Timed out trying to upgrade."),t.F.close())},Math.floor(6e4))}function rh(t,e,n){t.f("Realtime connection established.");t.L=e;t.Ua=1;t.Vc&&(t.Vc(n),t.Vc=null);0===t.Qe?(t.f("Primary connection is healthy."),t.Ab=!0):setTimeout(function(){wh(t)},Math.floor(5e3))}function wh(t){t.Ab||1!==t.Ua||(t.f("sending ping on primary."),yh(t,{t:"c",d:{t:"p",d:{}}}))}function yh(t,e){if(1!==t.Ua)throw"Connection is not connected";t.fd.send(e)}nh.prototype.close=function(){2!==this.Ua&&(this.f("Closing realtime connection."),this.Ua=2,uh(this),this.ka&&(this.ka(),this.ka=null))};function uh(t){t.f("Shutting down all connections");t.L&&(t.L.close(),t.L=null);t.F&&(t.F.close(),t.F=null);t.vd&&(clearTimeout(t.vd),t.vd=null)}function zh(t,e,n,r){this.id=Ah++;this.f=Oc("p:"+this.id+":");this.wf=this.De=!1;this.aa={};this.pa=[];this.Xc=0;this.Uc=[];this.ma=!1;this.$a=1e3;this.Cd=3e5;this.Gb=e;this.Tc=n;this.Ne=r;this.H=t;this.We=null;this.Qd={};this.Ig=0;this.mf=!0;this.Kc=this.Fe=null;Bh(this,0);Mf.ub().Eb("visible",this.zg,this);-1===t.host.indexOf("fblocal")&&Lf.ub().Eb("online",this.xg,this)}var Ah=0,Ch=0;h=zh.prototype;h.Da=function(t,e,n){var r=++this.Ig;t={r:r,a:t,b:e};this.f(B(t));J(this.ma,"sendRequest call when we're not connected not allowed.");this.Sa.Da(t);n&&(this.Qd[r]=n)};h.xf=function(t,e,n,r){var i=t.wa(),o=t.path.toString();this.f("Listen called for "+o+" "+i);this.aa[o]=this.aa[o]||{};J(!this.aa[o][i],"listen() called twice for same path/queryId.");t={J:r,ud:e,Fg:t,tag:n};this.aa[o][i]=t;this.ma&&Dh(this,t)};function Dh(t,e){var n=e.Fg,r=n.path.toString(),i=n.wa();t.f("Listen on "+r+" for "+i);var o={p:r};e.tag&&(o.q=ce(n.o),o.t=e.tag);o.h=e.ud();t.Da("q",o,function(o){var s=o.d,a=o.s;if(s&&"object"===typeof s&&u(s,"w")){var c=w(s,"w");ea(c)&&0<=Na(c,"no_index")&&Q("Using an unspecified index. Consider adding "+('".indexOn": "'+n.o.g.toString()+'"')+" at "+n.path.toString()+" to your security rules for better performance")}(t.aa[r]&&t.aa[r][i])===e&&(t.f("listen response",o),"ok"!==a&&Eh(t,r,i),e.J&&e.J(a,s))})}h.P=function(t,e,n){this.Fa={fg:t,nf:!1,yc:e,jd:n};this.f("Authenticating using credential: "+t);Fh(this);(e=40==t.length)||(t=ad(t).Ac,e="object"===typeof t&&!0===w(t,"admin"));e&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.Cd=3e4)};h.ee=function(t){delete this.Fa;this.ma&&this.Da("unauth",{},function(e){t(e.s,e.d)})};function Fh(t){var e=t.Fa;t.ma&&e&&t.Da("auth",{cred:e.fg},function(n){var r=n.s;n=n.d||"error";"ok"!==r&&t.Fa===e&&delete t.Fa;e.nf?"ok"!==r&&e.jd&&e.jd(r,n):(e.nf=!0,e.yc&&e.yc(r,n))})}h.Of=function(t,e){var n=t.path.toString(),r=t.wa();this.f("Unlisten called for "+n+" "+r);if(Eh(this,n,r)&&this.ma){var i=ce(t.o);this.f("Unlisten on "+n+" for "+r);n={p:n};e&&(n.q=i,n.t=e);this.Da("n",n)}};h.Le=function(t,e,n){this.ma?Gh(this,"o",t,e,n):this.Uc.push({Zc:t,action:"o",data:e,J:n})};h.Bf=function(t,e,n){this.ma?Gh(this,"om",t,e,n):this.Uc.push({Zc:t,action:"om",data:e,J:n})};h.Gd=function(t,e){this.ma?Gh(this,"oc",t,null,e):this.Uc.push({Zc:t,action:"oc",data:null,J:e})};function Gh(t,e,n,r,i){n={p:n,d:r};t.f("onDisconnect "+e,n);t.Da(e,n,function(t){i&&setTimeout(function(){i(t.s,t.d)},Math.floor(0))})}h.put=function(t,e,n,r){Hh(this,"p",t,e,n,r)};h.yf=function(t,e,n,r){Hh(this,"m",t,e,n,r)};function Hh(t,e,r,i,o,s){i={p:r,d:i};n(s)&&(i.h=s);t.pa.push({action:e,If:i,J:o});t.Xc++;e=t.pa.length-1;t.ma?Ih(t,e):t.f("Buffering put: "+r)}function Ih(t,e){var n=t.pa[e].action,r=t.pa[e].If,i=t.pa[e].J;t.pa[e].Gg=t.ma;t.Da(n,r,function(r){t.f(n+" response",r);delete t.pa[e];t.Xc--;0===t.Xc&&(t.pa=[]);i&&i(r.s,r.d)})}h.Te=function(t){this.ma&&(t={c:t},this.f("reportStats",t),this.Da("s",t,function(t){"ok"!==t.s&&this.f("reportStats","Error sending stats: "+t.d)}))};h.Fd=function(t){if("r"in t){this.f("from server: "+B(t));var e=t.r,n=this.Qd[e];n&&(delete this.Qd[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&(e=t.a,n=t.b,this.f("handleServerMessage",e,n),"d"===e?this.Gb(n.p,n.d,!1,n.t):"m"===e?this.Gb(n.p,n.d,!0,n.t):"c"===e?Jh(this,n.p,n.q):"ac"===e?(t=n.s,e=n.d,n=this.Fa,delete this.Fa,n&&n.jd&&n.jd(t,e)):"sd"===e?this.We?this.We(n):"msg"in n&&"undefined"!==typeof console&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: ")):Pc("Unrecognized action received from server: "+B(e)+"\nAre you using the latest client?"))}};h.Vc=function(t){this.f("connection ready");this.ma=!0;this.Kc=(new Date).getTime();this.Ne({serverTimeOffset:t-(new Date).getTime()});this.mf&&(t={},t["sdk.js."+"2.2.7".replace(/\./g,"-")]=1,ng()&&(t["framework.cordova"]=1),this.Te(t));Kh(this);this.mf=!1;this.Tc(!0)};function Bh(t,e){J(!t.Sa,"Scheduling a connect when we're already connected/ing?");t.Sb&&clearTimeout(t.Sb);t.Sb=setTimeout(function(){t.Sb=null;Lh(t)},Math.floor(e))}h.zg=function(t){t&&!this.uc&&this.$a===this.Cd&&(this.f("Window became visible.  Reducing delay."),this.$a=1e3,this.Sa||Bh(this,0));this.uc=t};h.xg=function(t){t?(this.f("Browser went online."),this.$a=1e3,this.Sa||Bh(this,0)):(this.f("Browser went offline.  Killing connection."),this.Sa&&this.Sa.close())};h.Cf=function(){this.f("data client disconnected");this.ma=!1;this.Sa=null;for(var t=0;t<this.pa.length;t++){var e=this.pa[t];e&&"h"in e.If&&e.Gg&&(e.J&&e.J("disconnect"),delete this.pa[t],this.Xc--)}0===this.Xc&&(this.pa=[]);this.Qd={};Mh(this)&&(this.uc?this.Kc&&(3e4<(new Date).getTime()-this.Kc&&(this.$a=1e3),this.Kc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.$a=this.Cd,this.Fe=(new Date).getTime()),t=Math.max(0,this.$a-((new Date).getTime()-this.Fe)),t*=Math.random(),this.f("Trying to reconnect in "+t+"ms"),Bh(this,t),this.$a=Math.min(this.Cd,1.3*this.$a));this.Tc(!1)};function Lh(t){if(Mh(t)){t.f("Making a connection attempt");t.Fe=(new Date).getTime();t.Kc=null;var e=q(t.Fd,t),n=q(t.Vc,t),r=q(t.Cf,t),i=t.id+":"+Ch++;t.Sa=new nh(i,t.H,e,n,r,function(e){Q(e+" ("+t.H.toString()+")");t.wf=!0})}}h.yb=function(){this.De=!0;this.Sa?this.Sa.close():(this.Sb&&(clearTimeout(this.Sb),this.Sb=null),this.ma&&this.Cf())};h.qc=function(){this.De=!1;this.$a=1e3;this.Sa||Bh(this,0)};function Jh(t,e,n){n=n?Qa(n,function(t){return Wc(t)}).join("$"):"default";(t=Eh(t,e,n))&&t.J&&t.J("permission_denied")}function Eh(t,e,r){e=new K(e).toString();var i;n(t.aa[e])?(i=t.aa[e][r],delete t.aa[e][r],0===pa(t.aa[e])&&delete t.aa[e]):i=void 0;return i}function Kh(t){Fh(t);r(t.aa,function(e){r(e,function(e){Dh(t,e)})});for(var e=0;e<t.pa.length;e++)t.pa[e]&&Ih(t,e);for(;t.Uc.length;)e=t.Uc.shift(),Gh(t,e.action,e.Zc,e.data,e.J)}function Mh(t){var e;e=Lf.ub().ic;return!t.wf&&!t.De&&e}var V={lg:function(){Yg=gh=!0}};V.forceLongPolling=V.lg;V.mg=function(){Zg=!0};V.forceWebSockets=V.mg;V.Mg=function(t,e){t.k.Ra.We=e};V.setSecurityDebugCallback=V.Mg;V.Ye=function(t,e){t.k.Ye(e)};V.stats=V.Ye;V.Ze=function(t,e){t.k.Ze(e)};V.statsIncrementCounter=V.Ze;V.pd=function(t){return t.k.pd};V.dataUpdateCount=V.pd;V.pg=function(t,e){t.k.Ce=e};V.interceptServerData=V.pg;V.vg=function(t){new xg(t)};V.onPopupOpen=V.vg;V.Kg=function(t){hg=t};V.setAuthenticationServer=V.Kg;function S(t,e,n){this.B=t;this.V=e;this.g=n}S.prototype.K=function(){x("Firebase.DataSnapshot.val",0,0,arguments.length);return this.B.K()};S.prototype.val=S.prototype.K;S.prototype.lf=function(){x("Firebase.DataSnapshot.exportVal",0,0,arguments.length);return this.B.K(!0)};S.prototype.exportVal=S.prototype.lf;S.prototype.kg=function(){x("Firebase.DataSnapshot.exists",0,0,arguments.length);return!this.B.e()};S.prototype.exists=S.prototype.kg;S.prototype.w=function(t){x("Firebase.DataSnapshot.child",0,1,arguments.length);ga(t)&&(t=String(t));Yf("Firebase.DataSnapshot.child",t);var e=new K(t),n=this.V.w(e);return new S(this.B.oa(e),n,M)};S.prototype.child=S.prototype.w;S.prototype.Ha=function(t){x("Firebase.DataSnapshot.hasChild",1,1,arguments.length);Yf("Firebase.DataSnapshot.hasChild",t);var e=new K(t);return!this.B.oa(e).e()};S.prototype.hasChild=S.prototype.Ha;S.prototype.A=function(){x("Firebase.DataSnapshot.getPriority",0,0,arguments.length);return this.B.A().K()};S.prototype.getPriority=S.prototype.A;S.prototype.forEach=function(t){x("Firebase.DataSnapshot.forEach",1,1,arguments.length);A("Firebase.DataSnapshot.forEach",1,t,!1);if(this.B.N())return!1;var e=this;return!!this.B.U(this.g,function(n,r){return t(new S(r,e.V.w(n),M))})};S.prototype.forEach=S.prototype.forEach;S.prototype.td=function(){x("Firebase.DataSnapshot.hasChildren",0,0,arguments.length);return this.B.N()?!1:!this.B.e()};S.prototype.hasChildren=S.prototype.td;S.prototype.name=function(){Q("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead.");x("Firebase.DataSnapshot.name",0,0,arguments.length);return this.key()};S.prototype.name=S.prototype.name;S.prototype.key=function(){x("Firebase.DataSnapshot.key",0,0,arguments.length);return this.V.key()};S.prototype.key=S.prototype.key;S.prototype.Db=function(){x("Firebase.DataSnapshot.numChildren",0,0,arguments.length);return this.B.Db()};S.prototype.numChildren=S.prototype.Db;S.prototype.lc=function(){x("Firebase.DataSnapshot.ref",0,0,arguments.length);return this.V};S.prototype.ref=S.prototype.lc;function Nh(t,e){this.H=t;this.Va=Ob(t);this.ea=new ub;this.Ed=1;this.Ra=null;e||0<=("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)?(this.ca=new Ae(this.H,q(this.Gb,this)),setTimeout(q(this.Tc,this,!0),0)):this.ca=this.Ra=new zh(this.H,q(this.Gb,this),q(this.Tc,this),q(this.Ne,this));this.Pg=Pb(t,q(function(){return new Jb(this.Va,this.ca)},this));this.tc=new Cf;this.Be=new nb;var n=this;this.zd=new gf({Xe:function(t,e,r,i){e=[];r=n.Be.j(t.path);r.e()||(e=jf(n.zd,new Ub(ze,t.path,r)),setTimeout(function(){i("ok")},0));return e},Zd:ba});Oh(this,"connected",!1);this.ka=new qc;this.P=new Hg(t,q(this.ca.P,this.ca),q(this.ca.ee,this.ca),q(this.Ke,this));this.pd=0;this.Ce=null;this.O=new gf({Xe:function(t,e,r,i){n.ca.xf(t,r,e,function(e,r){var o=i(e,r);zb(n.ea,t.path,o)});return[]},Zd:function(t,e){n.ca.Of(t,e)}})}h=Nh.prototype;h.toString=function(){return(this.H.lb?"https://":"http://")+this.H.host};h.name=function(){return this.H.Cb};function Ph(t){t=t.Be.j(new K(".info/serverTimeOffset")).K()||0;return(new Date).getTime()+t}function Qh(t){t=t={timestamp:Ph(t)};t.timestamp=t.timestamp||(new Date).getTime();return t}h.Gb=function(t,e,n,r){this.pd++;var i=new K(t);e=this.Ce?this.Ce(t,e):e;t=[];r?n?(e=na(e,function(t){return L(t)}),t=rf(this.O,i,e,r)):(e=L(e),t=nf(this.O,i,e,r)):n?(r=na(e,function(t){return L(t)}),t=mf(this.O,i,r)):(r=L(e),t=jf(this.O,new Ub(ze,i,r)));r=i;0<t.length&&(r=Rh(this,i));zb(this.ea,r,t)};h.Tc=function(t){Oh(this,"connected",t);!1===t&&Sh(this)};h.Ne=function(t){var e=this;Yc(t,function(t,n){Oh(e,n,t)})};h.Ke=function(t){Oh(this,"authenticated",t)};function Oh(t,e,n){e=new K("/.info/"+e);n=L(n);var r=t.Be;r.Sd=r.Sd.G(e,n);n=jf(t.zd,new Ub(ze,e,n));zb(t.ea,e,n)}h.Kb=function(t,e,n,r){this.f("set",{path:t.toString(),value:e,Xg:n});var i=Qh(this);e=L(e,n);var i=sc(e,i),o=this.Ed++,i=hf(this.O,t,i,o,!0);vb(this.ea,i);var s=this;this.ca.put(t.toString(),e.K(!0),function(e,n){var i="ok"===e;i||Q("set at "+t+" failed: "+e);i=lf(s.O,o,!i);zb(s.ea,t,i);Th(r,e,n)});i=Uh(this,t);Rh(this,i);zb(this.ea,i,[])};h.update=function(t,e,n){this.f("update",{path:t.toString(),value:e});var i=!0,o=Qh(this),s={};r(e,function(t,e){i=!1;var n=L(t);s[e]=sc(n,o)});if(i)Bb("update() called with empty data.  Don't do anything."),Th(n,"ok");else{var u=this.Ed++,a=kf(this.O,t,s,u);vb(this.ea,a);var c=this;this.ca.yf(t.toString(),e,function(e,r){var i="ok"===e;i||Q("update at "+t+" failed: "+e);var i=lf(c.O,u,!i),o=t;0<i.length&&(o=Rh(c,t));zb(c.ea,o,i);Th(n,e,r)});e=Uh(this,t);Rh(this,e);zb(this.ea,t,[])}};function Sh(t){t.f("onDisconnectEvents");var e=Qh(t),n=[];rc(pc(t.ka,e),F,function(e,r){n=n.concat(jf(t.O,new Ub(ze,e,r)));var i=Uh(t,e);Rh(t,i)});t.ka=new qc;zb(t.ea,F,n)}h.Gd=function(t,e){var n=this;this.ca.Gd(t.toString(),function(r,i){"ok"===r&&gg(n.ka,t);Th(e,r,i)})};function Vh(t,e,n,r){var i=L(n);t.ca.Le(e.toString(),i.K(!0),function(n,o){"ok"===n&&t.ka.mc(e,i);Th(r,n,o)})}function Wh(t,e,n,r,i){var o=L(n,r);t.ca.Le(e.toString(),o.K(!0),function(n,r){"ok"===n&&t.ka.mc(e,o);Th(i,n,r)})}function Xh(t,e,n,r){var i=!0,o;for(o in n)i=!1;i?(Bb("onDisconnect().update() called with empty data.  Don't do anything."),Th(r,"ok")):t.ca.Bf(e.toString(),n,function(i,o){if("ok"===i)for(var s in n){var u=L(n[s]);t.ka.mc(e.w(s),u)}Th(r,i,o)})}function Yh(t,e,n){n=".info"===O(e.path)?t.zd.Ob(e,n):t.O.Ob(e,n);xb(t.ea,e.path,n)}h.yb=function(){this.Ra&&this.Ra.yb()};h.qc=function(){this.Ra&&this.Ra.qc()};h.Ye=function(t){if("undefined"!==typeof console){t?(this.Yd||(this.Yd=new Ib(this.Va)),t=this.Yd.get()):t=this.Va.get();var e=Ra(sa(t),function(t,e){return Math.max(e.length,t)},0),n;for(n in t){for(var r=t[n],i=n.length;i<e+2;i++)n+=" ";console.log(n+r)}}};h.Ze=function(t){Lb(this.Va,t);this.Pg.Mf[t]=!0};h.f=function(t){var e="";this.Ra&&(e=this.Ra.id+":");Bb(e,arguments)};function Th(t,e,n){t&&Cb(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);i=Error(i);i.code=r;t(i)}})}function Zh(t,e,r,i,o){function s(){}t.f("transaction on "+e);var a=new U(t,e);a.Eb("value",s);r={path:e,update:r,J:i,status:null,Ef:Gc(),cf:o,Kf:0,ge:function(){a.gc("value",s)},je:null,Aa:null,md:null,nd:null,od:null};i=t.O.ua(e,void 0)||C;r.md=i;i=r.update(i.K());if(n(i)){Tf("transaction failed: Data returned ",i,r.path);r.status=1;o=Df(t.tc,e);var c=o.Ba()||[];c.push(r);Ef(o,c);"object"===typeof i&&null!==i&&u(i,".priority")?(c=w(i,".priority"),J(Rf(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(t.O.ua(e)||C).A().K();o=Qh(t);i=L(i,c);o=sc(i,o);r.nd=i;r.od=o;r.Aa=t.Ed++;r=hf(t.O,e,o,r.Aa,r.cf);zb(t.ea,e,r);$h(t)}else r.ge(),r.nd=null,r.od=null,r.J&&(t=new S(r.md,new U(t,r.path),M),r.J(null,!1,t))}function $h(t,e){var n=e||t.tc;e||ai(t,n);if(null!==n.Ba()){var r=bi(t,n);J(0<r.length,"Sending zero length transaction queue");Sa(r,function(t){return 1===t.status})&&ci(t,n.path(),r)}else n.td()&&n.U(function(e){$h(t,e)})}function ci(t,e,n){for(var r=Qa(n,function(t){return t.Aa}),i=t.O.ua(e,r)||C,r=i,i=i.hash(),o=0;o<n.length;o++){var s=n[o];J(1===s.status,"tryToSendTransactionQueue_: items in queue should all be run.");s.status=2;s.Kf++;var u=N(e,s.path),r=r.G(u,s.nd)}r=r.K(!0);t.ca.put(e.toString(),r,function(r){t.f("transaction put response",{path:e.toString(),status:r});var i=[];if("ok"===r){r=[];for(o=0;o<n.length;o++){n[o].status=3;i=i.concat(lf(t.O,n[o].Aa));if(n[o].J){var s=n[o].od,u=new U(t,n[o].path);r.push(q(n[o].J,null,null,!0,new S(s,u,M)))}n[o].ge()}ai(t,Df(t.tc,e));$h(t);zb(t.ea,e,i);for(o=0;o<r.length;o++)Cb(r[o])}else{if("datastale"===r)for(o=0;o<n.length;o++)n[o].status=4===n[o].status?5:1;else for(Q("transaction at "+e.toString()+" failed: "+r),o=0;o<n.length;o++)n[o].status=5,n[o].je=r;Rh(t,e)}},i)}function Rh(t,e){var n=di(t,e),r=n.path(),n=bi(t,n);ei(t,n,r);return r}function ei(t,e,r){if(0!==e.length){for(var i=[],o=[],s=Qa(e,function(t){return t.Aa}),a=0;a<e.length;a++){var c=e[a],h=N(r,c.path),f=!1,l;J(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===c.status)f=!0,l=c.je,o=o.concat(lf(t.O,c.Aa,!0));else if(1===c.status)if(25<=c.Kf)f=!0,l="maxretry",o=o.concat(lf(t.O,c.Aa,!0));else{var p=t.O.ua(c.path,s)||C;c.md=p;var d=e[a].update(p.K());n(d)?(Tf("transaction failed: Data returned ",d,c.path),h=L(d),"object"===typeof d&&null!=d&&u(d,".priority")||(h=h.da(p.A())),p=c.Aa,d=Qh(t),d=sc(h,d),c.nd=h,c.od=d,c.Aa=t.Ed++,Va(s,p),o=o.concat(hf(t.O,c.path,d,c.Aa,c.cf)),o=o.concat(lf(t.O,p,!0))):(f=!0,l="nodata",o=o.concat(lf(t.O,c.Aa,!0)))}zb(t.ea,r,o);o=[];f&&(e[a].status=3,setTimeout(e[a].ge,Math.floor(0)),e[a].J&&("nodata"===l?(c=new U(t,e[a].path),i.push(q(e[a].J,null,null,!1,new S(e[a].md,c,M)))):i.push(q(e[a].J,null,Error(l),!1,null))))}ai(t,t.tc);for(a=0;a<i.length;a++)Cb(i[a]);$h(t)}}function di(t,e){for(var n,r=t.tc;null!==(n=O(e))&&null===r.Ba();)r=Df(r,n),e=G(e);return r}function bi(t,e){var n=[];fi(t,e,n);n.sort(function(t,e){return t.Ef-e.Ef});return n}function fi(t,e,n){var r=e.Ba();if(null!==r)for(var i=0;i<r.length;i++)n.push(r[i]);e.U(function(e){fi(t,e,n)})}function ai(t,e){var n=e.Ba();if(n){for(var r=0,i=0;i<n.length;i++)3!==n[i].status&&(n[r]=n[i],r++);n.length=r;Ef(e,0<n.length?n:null)}e.U(function(e){ai(t,e)})}function Uh(t,e){var n=di(t,e).path(),r=Df(t.tc,e);Hf(r,function(e){gi(t,e)});gi(t,r);Gf(r,function(e){gi(t,e)});return n}function gi(t,e){var n=e.Ba();if(null!==n){for(var r=[],i=[],o=-1,s=0;s<n.length;s++)4!==n[s].status&&(2===n[s].status?(J(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=4,n[s].je="set"):(J(1===n[s].status,"Unexpected transaction status in abort"),n[s].ge(),i=i.concat(lf(t.O,n[s].Aa,!0)),n[s].J&&r.push(q(n[s].J,null,Error("set"),!1,null))));-1===o?Ef(e,null):n.length=o+1;zb(t.ea,e.path(),i);for(s=0;s<r.length;s++)Cb(r[s])}}function W(){this.nc={};this.Pf=!1}ca(W);W.prototype.yb=function(){for(var t in this.nc)this.nc[t].yb()};W.prototype.interrupt=W.prototype.yb;W.prototype.qc=function(){for(var t in this.nc)this.nc[t].qc()};W.prototype.resume=W.prototype.qc;W.prototype.ue=function(){this.Pf=!0};function X(t,e){this.ad=t;this.qa=e}X.prototype.cancel=function(t){x("Firebase.onDisconnect().cancel",0,1,arguments.length);A("Firebase.onDisconnect().cancel",1,t,!0);this.ad.Gd(this.qa,t||null)};X.prototype.cancel=X.prototype.cancel;X.prototype.remove=function(t){x("Firebase.onDisconnect().remove",0,1,arguments.length);Zf("Firebase.onDisconnect().remove",this.qa);A("Firebase.onDisconnect().remove",1,t,!0);Vh(this.ad,this.qa,null,t)};X.prototype.remove=X.prototype.remove;X.prototype.set=function(t,e){x("Firebase.onDisconnect().set",1,2,arguments.length);Zf("Firebase.onDisconnect().set",this.qa);Sf("Firebase.onDisconnect().set",t,this.qa,!1);A("Firebase.onDisconnect().set",2,e,!0);Vh(this.ad,this.qa,t,e)};X.prototype.set=X.prototype.set;X.prototype.Kb=function(t,e,n){x("Firebase.onDisconnect().setWithPriority",2,3,arguments.length);Zf("Firebase.onDisconnect().setWithPriority",this.qa);Sf("Firebase.onDisconnect().setWithPriority",t,this.qa,!1);Vf("Firebase.onDisconnect().setWithPriority",2,e);A("Firebase.onDisconnect().setWithPriority",3,n,!0);Wh(this.ad,this.qa,t,e,n)};X.prototype.setWithPriority=X.prototype.Kb;X.prototype.update=function(t,e){x("Firebase.onDisconnect().update",1,2,arguments.length);Zf("Firebase.onDisconnect().update",this.qa);if(ea(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n;Q("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Uf("Firebase.onDisconnect().update",t,this.qa);A("Firebase.onDisconnect().update",2,e,!0);Xh(this.ad,this.qa,t,e)};X.prototype.update=X.prototype.update;function Y(t,e,n,r){this.k=t;this.path=e;this.o=n;this.jc=r}function hi(t){var e=null,n=null;t.la&&(e=od(t));t.na&&(n=qd(t));if(t.g===Vd){if(t.la){if("[MIN_NAME]"!=nd(t))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof e)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}if(t.na){if("[MAX_NAME]"!=pd(t))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof n)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}}else if(t.g===M){if(null!=e&&!Rf(e)||null!=n&&!Rf(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(J(t.g instanceof Rd||t.g===Yd,"unknown index type."),null!=e&&"object"===typeof e||null!=n&&"object"===typeof n)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}function ii(t){if(t.la&&t.na&&t.ia&&(!t.ia||""===t.Nb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")}function ji(t,e){if(!0===t.jc)throw Error(e+": You can't combine multiple orderBy calls.")}Y.prototype.lc=function(){x("Query.ref",0,0,arguments.length);return new U(this.k,this.path)};Y.prototype.ref=Y.prototype.lc;Y.prototype.Eb=function(t,e,n,r){x("Query.on",2,4,arguments.length);Wf("Query.on",t,!1);A("Query.on",2,e,!1);var i=ki("Query.on",n,r);if("value"===t)Yh(this.k,this,new jd(e,i.cancel||null,i.Ma||null));else{var o={};o[t]=e;Yh(this.k,this,new kd(o,i.cancel,i.Ma))}return e};Y.prototype.on=Y.prototype.Eb;Y.prototype.gc=function(t,e,n){x("Query.off",0,3,arguments.length);Wf("Query.off",t,!0);A("Query.off",2,e,!0);lb("Query.off",3,n);var r=null,i=null;"value"===t?r=new jd(e||null,null,n||null):t&&(e&&(i={},i[t]=e),r=new kd(i,null,n||null));i=this.k;r=".info"===O(this.path)?i.zd.kb(this,r):i.O.kb(this,r);xb(i.ea,this.path,r)};Y.prototype.off=Y.prototype.gc;Y.prototype.Ag=function(t,e){function n(s){o&&(o=!1,i.gc(t,n),e.call(r.Ma,s))}x("Query.once",2,4,arguments.length);Wf("Query.once",t,!1);A("Query.once",2,e,!1);var r=ki("Query.once",arguments[2],arguments[3]),i=this,o=!0;this.Eb(t,n,function(e){i.gc(t,n);r.cancel&&r.cancel.call(r.Ma,e)})};Y.prototype.once=Y.prototype.Ag;Y.prototype.Ge=function(t){Q("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead.");x("Query.limit",1,1,arguments.length);if(!ga(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limit: First argument must be a positive integer.");if(this.o.ia)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var e=this.o.Ge(t);ii(e);return new Y(this.k,this.path,e,this.jc)};Y.prototype.limit=Y.prototype.Ge;Y.prototype.He=function(t){x("Query.limitToFirst",1,1,arguments.length);if(!ga(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.o.ia)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.o.He(t),this.jc)};Y.prototype.limitToFirst=Y.prototype.He;Y.prototype.Ie=function(t){x("Query.limitToLast",1,1,arguments.length);if(!ga(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.o.ia)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.o.Ie(t),this.jc)};Y.prototype.limitToLast=Y.prototype.Ie;Y.prototype.Bg=function(t){x("Query.orderByChild",1,1,arguments.length);if("$key"===t)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Xf("Query.orderByChild",1,t,!1);ji(this,"Query.orderByChild");var e=be(this.o,new Rd(t));hi(e);return new Y(this.k,this.path,e,!0)};Y.prototype.orderByChild=Y.prototype.Bg;Y.prototype.Cg=function(){x("Query.orderByKey",0,0,arguments.length);ji(this,"Query.orderByKey");var t=be(this.o,Vd);hi(t);return new Y(this.k,this.path,t,!0)};Y.prototype.orderByKey=Y.prototype.Cg;Y.prototype.Dg=function(){x("Query.orderByPriority",0,0,arguments.length);ji(this,"Query.orderByPriority");var t=be(this.o,M);hi(t);return new Y(this.k,this.path,t,!0)};Y.prototype.orderByPriority=Y.prototype.Dg;Y.prototype.Eg=function(){x("Query.orderByValue",0,0,arguments.length);ji(this,"Query.orderByValue");var t=be(this.o,Yd);hi(t);return new Y(this.k,this.path,t,!0)};Y.prototype.orderByValue=Y.prototype.Eg;Y.prototype.Xd=function(t,e){x("Query.startAt",0,2,arguments.length);Sf("Query.startAt",t,this.path,!0);Xf("Query.startAt",2,e,!0);var r=this.o.Xd(t,e);ii(r);hi(r);if(this.o.la)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");n(t)||(e=t=null);return new Y(this.k,this.path,r,this.jc)};Y.prototype.startAt=Y.prototype.Xd;Y.prototype.qd=function(t,e){x("Query.endAt",0,2,arguments.length);Sf("Query.endAt",t,this.path,!0);Xf("Query.endAt",2,e,!0);var n=this.o.qd(t,e);ii(n);hi(n);if(this.o.na)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Y(this.k,this.path,n,this.jc)};Y.prototype.endAt=Y.prototype.qd;Y.prototype.hg=function(t,e){x("Query.equalTo",1,2,arguments.length);Sf("Query.equalTo",t,this.path,!1);Xf("Query.equalTo",2,e,!0);if(this.o.la)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.o.na)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Xd(t,e).qd(t,e)};Y.prototype.equalTo=Y.prototype.hg;Y.prototype.toString=function(){x("Query.toString",0,0,arguments.length);for(var t=this.path,e="",n=t.Y;n<t.n.length;n++)""!==t.n[n]&&(e+="/"+encodeURIComponent(String(t.n[n])));return this.k.toString()+(e||"/")};Y.prototype.toString=Y.prototype.toString;Y.prototype.wa=function(){var t=Wc(ce(this.o));return"{}"===t?"default":t};function ki(t,e,n){var r={cancel:null,Ma:null};if(e&&n)r.cancel=e,A(t,3,r.cancel,!0),r.Ma=n,lb(t,4,r.Ma);else if(e)if("object"===typeof e&&null!==e)r.Ma=e;else if("function"===typeof e)r.cancel=e;else throw Error(z(t,3,!0)+" must either be a cancel callback or a context object.");return r}var Z={};Z.vc=zh;Z.DataConnection=Z.vc;zh.prototype.Og=function(t,e){this.Da("q",{p:t},e)};Z.vc.prototype.simpleListen=Z.vc.prototype.Og;zh.prototype.gg=function(t,e){this.Da("echo",{d:t},e)};Z.vc.prototype.echo=Z.vc.prototype.gg;zh.prototype.interrupt=zh.prototype.yb;Z.Sf=nh;Z.RealTimeConnection=Z.Sf;nh.prototype.sendRequest=nh.prototype.Da;nh.prototype.close=nh.prototype.close;Z.og=function(t){var e=zh.prototype.put;zh.prototype.put=function(r,i,o,s){n(s)&&(s=t());e.call(this,r,i,o,s)};return function(){zh.prototype.put=e}};Z.hijackHash=Z.og;Z.Rf=Ec;Z.ConnectionTarget=Z.Rf;Z.wa=function(t){return t.wa()};Z.queryIdentifier=Z.wa;Z.qg=function(t){return t.k.Ra.aa};Z.listens=Z.qg;Z.ue=function(t){t.ue()};Z.forceRestClient=Z.ue;function U(t,e){var n,r,i;if(t instanceof Nh)n=t,r=e;else{x("new Firebase",1,2,arguments.length);r=Rc(arguments[0]);n=r.Qg;"firebase"===r.domain&&Qc(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");n&&"undefined"!=n||Qc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com");r.lb||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Q("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");n=new Ec(r.host,r.lb,n,"ws"===r.scheme||"wss"===r.scheme);r=new K(r.Zc);i=r.toString();var o;!(o=!p(n.host)||0===n.host.length||!Qf(n.Cb))&&(o=0!==i.length)&&(i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),o=!(p(i)&&0!==i.length&&!Of.test(i)));if(o)throw Error(z("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(e)if(e instanceof W)i=e;else if(p(e))i=W.ub(),n.Ld=e;else throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");else i=W.ub();o=n.toString();var s=w(i.nc,o);s||(s=new Nh(n,i.Pf),i.nc[o]=s);n=s}Y.call(this,n,r,$d,!1)}ma(U,Y);var li=U,mi=["Firebase"],ni=aa;mi[0]in ni||!ni.execScript||ni.execScript("var "+mi[0]);for(var oi;mi.length&&(oi=mi.shift());)!mi.length&&n(li)?ni[oi]=li:ni=ni[oi]?ni[oi]:ni[oi]={};U.prototype.name=function(){Q("Firebase.name() being deprecated. Please use Firebase.key() instead.");x("Firebase.name",0,0,arguments.length);return this.key()};U.prototype.name=U.prototype.name;U.prototype.key=function(){x("Firebase.key",0,0,arguments.length);return this.path.e()?null:vc(this.path)};U.prototype.key=U.prototype.key;U.prototype.w=function(t){x("Firebase.child",1,1,arguments.length);if(ga(t))t=String(t);else if(!(t instanceof K))if(null===O(this.path)){var e=t;e&&(e=e.replace(/^\/*\.info(\/|$)/,"/"));Yf("Firebase.child",e)}else Yf("Firebase.child",t);return new U(this.k,this.path.w(t))};U.prototype.child=U.prototype.w;U.prototype.parent=function(){x("Firebase.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new U(this.k,t)};U.prototype.parent=U.prototype.parent;U.prototype.root=function(){x("Firebase.ref",0,0,arguments.length);for(var t=this;null!==t.parent();)t=t.parent();return t};U.prototype.root=U.prototype.root;U.prototype.set=function(t,e){x("Firebase.set",1,2,arguments.length);Zf("Firebase.set",this.path);Sf("Firebase.set",t,this.path,!1);A("Firebase.set",2,e,!0);this.k.Kb(this.path,t,null,e||null)};U.prototype.set=U.prototype.set;U.prototype.update=function(t,e){x("Firebase.update",1,2,arguments.length);Zf("Firebase.update",this.path);if(ea(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n;Q("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Uf("Firebase.update",t,this.path);A("Firebase.update",2,e,!0);this.k.update(this.path,t,e||null)};U.prototype.update=U.prototype.update;U.prototype.Kb=function(t,e,n){x("Firebase.setWithPriority",2,3,arguments.length);Zf("Firebase.setWithPriority",this.path);Sf("Firebase.setWithPriority",t,this.path,!1);Vf("Firebase.setWithPriority",2,e);A("Firebase.setWithPriority",3,n,!0);if(".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";this.k.Kb(this.path,t,e,n||null)};U.prototype.setWithPriority=U.prototype.Kb;U.prototype.remove=function(t){x("Firebase.remove",0,1,arguments.length);Zf("Firebase.remove",this.path);A("Firebase.remove",1,t,!0);this.set(null,t)};U.prototype.remove=U.prototype.remove;U.prototype.transaction=function(t,e,r){x("Firebase.transaction",1,3,arguments.length);Zf("Firebase.transaction",this.path);A("Firebase.transaction",1,t,!1);A("Firebase.transaction",2,e,!0);if(n(r)&&"boolean"!=typeof r)throw Error(z("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";
"undefined"===typeof r&&(r=!0);Zh(this.k,this.path,t,e||null,r)};U.prototype.transaction=U.prototype.transaction;U.prototype.Lg=function(t,e){x("Firebase.setPriority",1,2,arguments.length);Zf("Firebase.setPriority",this.path);Vf("Firebase.setPriority",1,t);A("Firebase.setPriority",2,e,!0);this.k.Kb(this.path.w(".priority"),t,null,e)};U.prototype.setPriority=U.prototype.Lg;U.prototype.push=function(t,e){x("Firebase.push",0,2,arguments.length);Zf("Firebase.push",this.path);Sf("Firebase.push",t,this.path,!0);A("Firebase.push",2,e,!0);var n=Ph(this.k),n=Kf(n),n=this.w(n);"undefined"!==typeof t&&null!==t&&n.set(t,e);return n};U.prototype.push=U.prototype.push;U.prototype.jb=function(){Zf("Firebase.onDisconnect",this.path);return new X(this.k,this.path)};U.prototype.onDisconnect=U.prototype.jb;U.prototype.P=function(t,e,n){Q("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead.");x("Firebase.auth",1,3,arguments.length);$f("Firebase.auth",t);A("Firebase.auth",2,e,!0);A("Firebase.auth",3,e,!0);Ng(this.k.P,t,{},{remember:"none"},e,n)};U.prototype.auth=U.prototype.P;U.prototype.ee=function(t){x("Firebase.unauth",0,1,arguments.length);A("Firebase.unauth",1,t,!0);Og(this.k.P,t)};U.prototype.unauth=U.prototype.ee;U.prototype.we=function(){x("Firebase.getAuth",0,0,arguments.length);return this.k.P.we()};U.prototype.getAuth=U.prototype.we;U.prototype.ug=function(t,e){x("Firebase.onAuth",1,2,arguments.length);A("Firebase.onAuth",1,t,!1);lb("Firebase.onAuth",2,e);this.k.P.Eb("auth_status",t,e)};U.prototype.onAuth=U.prototype.ug;U.prototype.tg=function(t,e){x("Firebase.offAuth",1,2,arguments.length);A("Firebase.offAuth",1,t,!1);lb("Firebase.offAuth",2,e);this.k.P.gc("auth_status",t,e)};U.prototype.offAuth=U.prototype.tg;U.prototype.Wf=function(t,e,n){x("Firebase.authWithCustomToken",2,3,arguments.length);$f("Firebase.authWithCustomToken",t);A("Firebase.authWithCustomToken",2,e,!1);cg("Firebase.authWithCustomToken",3,n,!0);Ng(this.k.P,t,{},n||{},e)};U.prototype.authWithCustomToken=U.prototype.Wf;U.prototype.Xf=function(t,e,n){x("Firebase.authWithOAuthPopup",2,3,arguments.length);bg("Firebase.authWithOAuthPopup",t);A("Firebase.authWithOAuthPopup",2,e,!1);cg("Firebase.authWithOAuthPopup",3,n,!0);Sg(this.k.P,t,n,e)};U.prototype.authWithOAuthPopup=U.prototype.Xf;U.prototype.Yf=function(t,e,n){x("Firebase.authWithOAuthRedirect",2,3,arguments.length);bg("Firebase.authWithOAuthRedirect",t);A("Firebase.authWithOAuthRedirect",2,e,!1);cg("Firebase.authWithOAuthRedirect",3,n,!0);var r=this.k.P;Qg(r);var i=[zg],o=kg(n);"anonymous"===t||"firebase"===t?R(e,Bg("TRANSPORT_UNAVAILABLE")):(P.set("redirect_client_options",o.ld),Rg(r,i,"/auth/"+t,o,e))};U.prototype.authWithOAuthRedirect=U.prototype.Yf;U.prototype.Zf=function(t,e,n,r){x("Firebase.authWithOAuthToken",3,4,arguments.length);bg("Firebase.authWithOAuthToken",t);A("Firebase.authWithOAuthToken",3,n,!1);cg("Firebase.authWithOAuthToken",4,r,!0);p(e)?(ag("Firebase.authWithOAuthToken",2,e),Pg(this.k.P,t+"/token",{access_token:e},r,n)):(cg("Firebase.authWithOAuthToken",2,e,!1),Pg(this.k.P,t+"/token",e,r,n))};U.prototype.authWithOAuthToken=U.prototype.Zf;U.prototype.Vf=function(t,e){x("Firebase.authAnonymously",1,2,arguments.length);A("Firebase.authAnonymously",1,t,!1);cg("Firebase.authAnonymously",2,e,!0);Pg(this.k.P,"anonymous",{},e,t)};U.prototype.authAnonymously=U.prototype.Vf;U.prototype.$f=function(t,e,n){x("Firebase.authWithPassword",2,3,arguments.length);cg("Firebase.authWithPassword",1,t,!1);dg("Firebase.authWithPassword",t,"email");dg("Firebase.authWithPassword",t,"password");A("Firebase.authWithPassword",2,e,!1);cg("Firebase.authWithPassword",3,n,!0);Pg(this.k.P,"password",t,n,e)};U.prototype.authWithPassword=U.prototype.$f;U.prototype.re=function(t,e){x("Firebase.createUser",2,2,arguments.length);cg("Firebase.createUser",1,t,!1);dg("Firebase.createUser",t,"email");dg("Firebase.createUser",t,"password");A("Firebase.createUser",2,e,!1);this.k.P.re(t,e)};U.prototype.createUser=U.prototype.re;U.prototype.Se=function(t,e){x("Firebase.removeUser",2,2,arguments.length);cg("Firebase.removeUser",1,t,!1);dg("Firebase.removeUser",t,"email");dg("Firebase.removeUser",t,"password");A("Firebase.removeUser",2,e,!1);this.k.P.Se(t,e)};U.prototype.removeUser=U.prototype.Se;U.prototype.oe=function(t,e){x("Firebase.changePassword",2,2,arguments.length);cg("Firebase.changePassword",1,t,!1);dg("Firebase.changePassword",t,"email");dg("Firebase.changePassword",t,"oldPassword");dg("Firebase.changePassword",t,"newPassword");A("Firebase.changePassword",2,e,!1);this.k.P.oe(t,e)};U.prototype.changePassword=U.prototype.oe;U.prototype.ne=function(t,e){x("Firebase.changeEmail",2,2,arguments.length);cg("Firebase.changeEmail",1,t,!1);dg("Firebase.changeEmail",t,"oldEmail");dg("Firebase.changeEmail",t,"newEmail");dg("Firebase.changeEmail",t,"password");A("Firebase.changeEmail",2,e,!1);this.k.P.ne(t,e)};U.prototype.changeEmail=U.prototype.ne;U.prototype.Ue=function(t,e){x("Firebase.resetPassword",2,2,arguments.length);cg("Firebase.resetPassword",1,t,!1);dg("Firebase.resetPassword",t,"email");A("Firebase.resetPassword",2,e,!1);this.k.P.Ue(t,e)};U.prototype.resetPassword=U.prototype.Ue;U.goOffline=function(){x("Firebase.goOffline",0,0,arguments.length);W.ub().yb()};U.goOnline=function(){x("Firebase.goOnline",0,0,arguments.length);W.ub().qc()};function Nc(t,e){J(!e||!0===t||!1===t,"Can't turn on custom loggers persistently.");!0===t?("undefined"!==typeof console&&("function"===typeof console.log?Ab=q(console.log,console):"object"===typeof console.log&&(Ab=function(t){console.log(t)})),e&&P.set("logging_enabled",!0)):t?Ab=t:(Ab=null,P.remove("logging_enabled"))}U.enableLogging=Nc;U.ServerValue={TIMESTAMP:{".sv":"timestamp"}};U.SDK_VERSION="2.2.7";U.INTERNAL=V;U.Context=W;U.TEST_ACCESS=Z})();module.exports=Firebase},{}],3:[function(t,e,n){var r=t("lodash._arraycopy"),i=t("lodash._arrayeach"),o=t("lodash._createassigner"),s=t("lodash.isarguments"),u=t("lodash.isarray"),a=t("lodash.isplainobject"),c=t("lodash.istypedarray"),h=t("lodash.keys"),f=t("lodash.toplainobject");function l(t){return!!t&&typeof t=="object"}var p=9007199254740991;function d(t,e,n,r,o){if(!w(t)){return t}var s=y(e)&&(u(e)||c(e)),a=s?null:h(e);i(a||e,function(i,u){if(a){u=i;i=e[u]}if(l(i)){r||(r=[]);o||(o=[]);v(t,e,u,d,n,r,o)}else{var c=t[u],h=n?n(c,i,u,t,e):undefined,f=h===undefined;if(f){h=i}if((h!==undefined||s&&!(u in t))&&(f||(h===h?h!==c:c===c))){t[u]=h}}});return t}function v(t,e,n,i,o,h,l){var p=h.length,d=e[n];while(p--){if(h[p]==d){t[n]=l[p];return}}var v=t[n],b=o?o(v,d,n,t,e):undefined,g=b===undefined;if(g){b=d;if(y(d)&&(u(d)||c(d))){b=u(v)?v:y(v)?r(v):[]}else if(a(d)||s(d)){b=s(v)?f(v):a(v)?v:{}}else{g=false}}h.push(d);l.push(b);if(g){t[n]=i(b,d,o,h,l)}else if(b===b?b!==v:v===v){t[n]=b}}function b(t){return function(e){return e==null?undefined:e[t]}}var g=b("length");function y(t){return t!=null&&m(g(t))}function m(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=p}function w(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}var E=o(d);e.exports=E},{"lodash._arraycopy":4,"lodash._arrayeach":5,"lodash._createassigner":6,"lodash.isarguments":11,"lodash.isarray":12,"lodash.isplainobject":13,"lodash.istypedarray":15,"lodash.keys":16,"lodash.toplainobject":18}],4:[function(t,e,n){function r(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r){e[n]=t[n]}return e}e.exports=r},{}],5:[function(t,e,n){function r(t,e){var n=-1,r=t.length;while(++n<r){if(e(t[n],n,t)===false){break}}return t}e.exports=r},{}],6:[function(t,e,n){var r=t("lodash._bindcallback"),i=t("lodash._isiterateecall"),o=t("lodash.restparam");function s(t){return o(function(e,n){var o=-1,s=e==null?0:n.length,u=s>2?n[s-2]:undefined,a=s>2?n[2]:undefined,c=s>1?n[s-1]:undefined;if(typeof u=="function"){u=r(u,c,5);s-=2}else{u=typeof c=="function"?c:undefined;s-=u?1:0}if(a&&i(n[0],n[1],a)){u=s<3?undefined:u;s=1}while(++o<s){var h=n[o];if(h){t(e,h,u)}}return e})}e.exports=s},{"lodash._bindcallback":7,"lodash._isiterateecall":8,"lodash.restparam":9}],7:[function(t,e,n){function r(t,e,n){if(typeof t!="function"){return i}if(e===undefined){return t}switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,s){return t.call(e,n,r,i,o,s)}}return function(){return t.apply(e,arguments)}}function i(t){return t}e.exports=r},{}],8:[function(t,e,n){var r=/^\d+$/;var i=9007199254740991;function o(t){return function(e){return e==null?undefined:e[t]}}var s=o("length");function u(t){return t!=null&&h(s(t))}function a(t,e){t=typeof t=="number"||r.test(t)?+t:-1;e=e==null?i:e;return t>-1&&t%1==0&&t<e}function c(t,e,n){if(!f(n)){return false}var r=typeof e;if(r=="number"?u(n)&&a(e,n.length):r=="string"&&e in n){var i=n[e];return t===t?t===i:i!==i}return false}function h(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=i}function f(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}e.exports=c},{}],9:[function(t,e,n){var r="Expected a function";var i=Math.max;function o(t,e){if(typeof t!="function"){throw new TypeError(r)}e=i(e===undefined?t.length-1:+e||0,0);return function(){var n=arguments,r=-1,o=i(n.length-e,0),s=Array(o);while(++r<o){s[r]=n[e+r]}switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var u=Array(e+1);r=-1;while(++r<e){u[r]=n[r]}u[e]=s;return t.apply(this,u)}}e.exports=o},{}],10:[function(t,e,n){var r="[object Function]";var i=/[.*+?^${}()|[\]\/\\]/g,o=RegExp(i.source);var s=/^\[object .+?Constructor\]$/;function u(t){if(typeof t=="string"){return t}return t==null?"":t+""}function a(t){return!!t&&typeof t=="object"}var c=Object.prototype;var h=Function.prototype.toString;var f=c.hasOwnProperty;var l=c.toString;var p=RegExp("^"+b(h.call(f)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(t,e){var n=t==null?undefined:t[e];return v(n)?n:undefined}function v(t){if(t==null){return false}if(l.call(t)==r){return p.test(h.call(t))}return a(t)&&s.test(t)}function b(t){t=u(t);return t&&o.test(t)?t.replace(i,"\\$&"):t}e.exports=d},{}],11:[function(t,e,n){var r="[object Arguments]";function i(t){return!!t&&typeof t=="object"}var o=Object.prototype;var s=o.toString;var u=9007199254740991;function a(t){return function(e){return e==null?undefined:e[t]}}var c=a("length");function h(t){return t!=null&&f(c(t))}function f(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=u}function l(t){return i(t)&&h(t)&&s.call(t)==r}e.exports=l},{}],12:[function(t,e,n){var r="[object Array]",i="[object Function]";var o=/[.*+?^${}()|[\]\/\\]/g,s=RegExp(o.source);var u=/^\[object .+?Constructor\]$/;function a(t){if(typeof t=="string"){return t}return t==null?"":t+""}function c(t){return!!t&&typeof t=="object"}var h=Object.prototype;var f=Function.prototype.toString;var l=h.hasOwnProperty;var p=h.toString;var d=RegExp("^"+E(f.call(l)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var v=g(Array,"isArray");var b=9007199254740991;function g(t,e){var n=t==null?undefined:t[e];return w(n)?n:undefined}function y(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=b}var m=v||function(t){return c(t)&&y(t.length)&&p.call(t)==r};function w(t){if(t==null){return false}if(p.call(t)==i){return d.test(f.call(t))}return c(t)&&u.test(t)}function E(t){t=a(t);return t&&s.test(t)?t.replace(o,"\\$&"):t}e.exports=m},{}],13:[function(t,e,n){var r=t("lodash._basefor"),i=t("lodash._getnative"),o=t("lodash.keysin");var s="[object Object]";function u(t){return!!t&&typeof t=="object"}var a=Object.prototype;var c=a.hasOwnProperty;var h=a.toString;var f=i(Object,"getPrototypeOf");function l(t,e){return r(t,e,o)}function p(t){var e;if(!(u(t)&&h.call(t)==s)||!c.call(t,"constructor")&&(e=t.constructor,typeof e=="function"&&!(e instanceof e))){return false}var n;l(t,function(t,e){n=e});return n===undefined||c.call(t,n)}var d=!f?p:function(t){if(!(t&&h.call(t)==s)){return false}var e=i(t,"valueOf"),n=e&&(n=f(e))&&f(n);return n?t==n||f(t)==n:p(t)};e.exports=d},{"lodash._basefor":14,"lodash._getnative":10,"lodash.keysin":17}],14:[function(t,e,n){var r=i();function i(t){return function(e,n,r){var i=o(e),s=r(e),u=s.length,a=t?u:-1;while(t?a--:++a<u){var c=s[a];if(n(i[c],c,i)===false){break}}return e}}function o(t){return s(t)?t:Object(t)}function s(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}e.exports=r},{}],15:[function(t,e,n){var r="[object Arguments]",i="[object Array]",o="[object Boolean]",s="[object Date]",u="[object Error]",a="[object Function]",c="[object Map]",h="[object Number]",f="[object Object]",l="[object RegExp]",p="[object Set]",d="[object String]",v="[object WeakMap]";var b="[object ArrayBuffer]",g="[object Float32Array]",y="[object Float64Array]",m="[object Int8Array]",w="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",x="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]";var k={};k[g]=k[y]=k[m]=k[w]=k[E]=k[S]=k[x]=k[C]=k[A]=true;k[r]=k[i]=k[b]=k[o]=k[s]=k[u]=k[a]=k[c]=k[h]=k[f]=k[l]=k[p]=k[d]=k[v]=false;function N(t){return!!t&&typeof t=="object"}var O=Object.prototype;var D=O.toString;var _=9007199254740991;function F(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=_}function j(t){return N(t)&&F(t.length)&&!!k[D.call(t)]}e.exports=j},{}],16:[function(t,e,n){var r=t("lodash._getnative"),i=t("lodash.isarguments"),o=t("lodash.isarray");var s=/^\d+$/;var u=Object.prototype;var a=u.hasOwnProperty;var c=r(Object,"keys");var h=9007199254740991;function f(t){return function(e){return e==null?undefined:e[t]}}var l=f("length");function p(t){return t!=null&&v(l(t))}function d(t,e){t=typeof t=="number"||s.test(t)?+t:-1;e=e==null?h:e;return t>-1&&t%1==0&&t<e}function v(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=h}function b(t){var e=m(t),n=e.length,r=n&&t.length;var s=!!r&&v(r)&&(o(t)||i(t));var u=-1,c=[];while(++u<n){var h=e[u];if(s&&d(h,r)||a.call(t,h)){c.push(h)}}return c}function g(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}var y=!c?b:function(t){var e=t==null?null:t.constructor;if(typeof e=="function"&&e.prototype===t||typeof t!="function"&&p(t)){return b(t)}return g(t)?c(t):[]};function m(t){if(t==null){return[]}if(!g(t)){t=Object(t)}var e=t.length;e=e&&v(e)&&(o(t)||i(t))&&e||0;var n=t.constructor,r=-1,s=typeof n=="function"&&n.prototype===t,u=Array(e),c=e>0;while(++r<e){u[r]=r+""}for(var h in t){if(!(c&&d(h,e))&&!(h=="constructor"&&(s||!a.call(t,h)))){u.push(h)}}return u}e.exports=y},{"lodash._getnative":10,"lodash.isarguments":11,"lodash.isarray":12}],17:[function(t,e,n){var r=t("lodash.isarguments"),i=t("lodash.isarray");var o=/^\d+$/;var s=Object.prototype;var u=s.hasOwnProperty;var a=9007199254740991;function c(t,e){t=typeof t=="number"||o.test(t)?+t:-1;e=e==null?a:e;return t>-1&&t%1==0&&t<e}function h(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=a}function f(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function l(t){if(t==null){return[]}if(!f(t)){t=Object(t)}var e=t.length;e=e&&h(e)&&(i(t)||r(t))&&e||0;var n=t.constructor,o=-1,s=typeof n=="function"&&n.prototype===t,a=Array(e),l=e>0;while(++o<e){a[o]=o+""}for(var p in t){if(!(l&&c(p,e))&&!(p=="constructor"&&(s||!u.call(t,p)))){a.push(p)}}return a}e.exports=l},{"lodash.isarguments":11,"lodash.isarray":12}],18:[function(t,e,n){var r=t("lodash._basecopy"),i=t("lodash.keysin");function o(t){return r(t,i(t))}e.exports=o},{"lodash._basecopy":19,"lodash.keysin":17}],19:[function(t,e,n){function r(t,e,n){n||(n={});var r=-1,i=e.length;while(++r<i){var o=e[r];n[o]=t[o]}return n}e.exports=r},{}],20:[function(t,e,n){(function(t,r){(function(i){var o={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};var u=o[typeof window]&&window||this,a=o[typeof n]&&n&&!n.nodeType&&n,c=o[typeof e]&&e&&!e.nodeType&&e,h=c&&c.exports===a&&a,f=o[typeof r]&&r;if(f&&(f.global===f||f.window===f)){u=f}var l={internals:{},config:{Promise:u.Promise},helpers:{}};var p=l.helpers.noop=function(){},d=l.helpers.notDefined=function(t){return typeof t==="undefined"},v=l.helpers.identity=function(t){return t},b=l.helpers.pluck=function(t){return function(e){return e[t]}},g=l.helpers.just=function(t){return function(){return t}},y=l.helpers.defaultNow=Date.now,m=l.helpers.defaultComparer=function(t,e){return At(t,e)},w=l.helpers.defaultSubComparer=function(t,e){return t>e?1:t<e?-1:0},E=l.helpers.defaultKeySerializer=function(t){return t.toString()},S=l.helpers.defaultError=function(t){throw t},x=l.helpers.isPromise=function(t){return!!t&&typeof t.then==="function"},C=l.helpers.asArray=function(){return Array.prototype.slice.call(arguments)},A=l.helpers.not=function(t){return!t},k=l.helpers.isFunction=function(){var t=function(t){return typeof t=="function"||false};if(t(/x/)){t=function(t){return typeof t=="function"&&ct.call(t)=="[object Function]"}}return t}();function N(t){for(var e=[],n=0,r=t.length;n<r;n++){e.push(t[n])}return e}l.config.longStackSupport=false;var O=false;try{throw new Error}catch(D){O=!!D.stack}var _=M(),F;var j="From previous event:";function T(t,e){if(O&&e.stack&&typeof t==="object"&&t!==null&&t.stack&&t.stack.indexOf(j)===-1){var n=[];for(var r=e;!!r;r=r.source){if(r.stack){n.unshift(r.stack)}}n.unshift(t.stack);var i=n.join("\n"+j+"\n");t.stack=R(i)}}function R(t){var e=t.split("\n"),n=[];for(var r=0,i=e.length;r<i;r++){var o=e[r];if(!W(o)&&!U(o)&&o){n.push(o)}}return n.join("\n")}function W(t){var e=P(t);if(!e){return false}var n=e[0],r=e[1];return n===F&&r>=_&&r<=Br}function U(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function M(){if(!O){return}try{throw new Error}catch(t){var e=t.stack.split("\n");var n=e[0].indexOf("@")>0?e[1]:e[2];var r=P(n);if(!r){return}F=r[0];return r[1]}}function P(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e){return[e[1],Number(e[2])]}var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n){return[n[1],Number(n[2])]}var r=/.*@(.+):(\d+)$/.exec(t);if(r){return[r[1],Number(r[2])]}}var q=l.EmptyError=function(){this.message="Sequence contains no elements.";Error.call(this)};q.prototype=Error.prototype;var L=l.ObjectDisposedError=function(){this.message="Object has been disposed";Error.call(this)};L.prototype=Error.prototype;var I=l.ArgumentOutOfRangeError=function(){this.message="Argument out of range";Error.call(this)};I.prototype=Error.prototype;var B=l.NotSupportedError=function(t){this.message=t||"This operation is not supported";Error.call(this)};B.prototype=Error.prototype;var Q=l.NotImplementedError=function(t){this.message=t||"This operation is not implemented";Error.call(this)};Q.prototype=Error.prototype;var J=l.helpers.notImplemented=function(){throw new Q};var z=l.helpers.notSupported=function(){throw new B};var V=typeof Symbol==="function"&&Symbol.iterator||"_es6shim_iterator_";if(u.Set&&typeof(new u.Set)["@@iterator"]==="function"){V="@@iterator"}var H=l.doneEnumerator={done:true,value:i};var Y=l.helpers.isIterable=function(t){return t[V]!==i};var K=l.helpers.isArrayLike=function(t){return t&&t.length!==i};l.helpers.iterator=V;var G=l.internals.bindCallback=function(t,e,n){if(typeof e==="undefined"){return t}switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}};var Z=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],$=Z.length;var X="[object Arguments]",tt="[object Array]",et="[object Boolean]",nt="[object Date]",rt="[object Error]",it="[object Function]",ot="[object Number]",st="[object Object]",ut="[object RegExp]",at="[object String]";var ct=Object.prototype.toString,ht=Object.prototype.hasOwnProperty,ft=ct.call(arguments)==X,lt,pt=Error.prototype,dt=Object.prototype,vt=String.prototype,bt=dt.propertyIsEnumerable;try{lt=!(ct.call(document)==st&&!({toString:0}+""))}catch(D){lt=true}var gt={};gt[tt]=gt[nt]=gt[ot]={constructor:true,toLocaleString:true,toString:true,valueOf:true};gt[et]=gt[at]={constructor:true,toString:true,valueOf:true};gt[rt]=gt[it]=gt[ut]={constructor:true,toString:true};gt[st]={constructor:true};var yt={};(function(){var t=function(){this.x=1},e=[];t.prototype={valueOf:1,y:1};for(var n in new t){e.push(n)}for(n in arguments){}yt.enumErrorProps=bt.call(pt,"message")||bt.call(pt,"name");yt.enumPrototypes=bt.call(t,"prototype");yt.nonEnumArgs=n!=0;yt.nonEnumShadows=!/valueOf/.test(e)})(1);var mt=l.internals.isObject=function(t){var e=typeof t;return t&&(e=="function"||e=="object")||false};function wt(t){var e=[];if(!mt(t)){return e}if(yt.nonEnumArgs&&t.length&&Ct(t)){t=Ot.call(t)}var n=yt.enumPrototypes&&typeof t=="function",r=yt.enumErrorProps&&(t===pt||t instanceof Error);for(var i in t){if(!(n&&i=="prototype")&&!(r&&(i=="message"||i=="name"))){e.push(i)}}if(yt.nonEnumShadows&&t!==dt){var o=t.constructor,s=-1,u=$;if(t===(o&&o.prototype)){var a=t===vt?at:t===pt?rt:ct.call(t),c=gt[a]}while(++s<u){i=Z[s];if(!(c&&c[i])&&ht.call(t,i)){e.push(i)}}}return e}function Et(t,e,n){var r=-1,i=n(t),o=i.length;while(++r<o){var s=i[r];if(e(t[s],s,t)===false){break}}return t}function St(t,e){return Et(t,e,wt)}function xt(t){return typeof t.toString!="function"&&typeof(t+"")=="string"}var Ct=function(t){return t&&typeof t=="object"?ct.call(t)==X:false};if(!ft){Ct=function(t){return t&&typeof t=="object"?ht.call(t,"callee"):false}}var At=l.internals.isEqual=function(t,e){return kt(t,e,[],[])};function kt(t,e,n,r){if(t===e){return t!==0||1/t==1/e}var i=typeof t,o=typeof e;if(t===t&&(t==null||e==null||i!="function"&&i!="object"&&o!="function"&&o!="object")){return false}var s=ct.call(t),u=ct.call(e);if(s==X){s=st}if(u==X){u=st}if(s!=u){return false}switch(s){case et:case nt:return+t==+e;case ot:return t!=+t?e!=+e:t==0?1/t==1/e:t==+e;case ut:case at:return t==String(e)}var a=s==tt;if(!a){if(s!=st||!yt.nodeClass&&(xt(t)||xt(e))){return false}var c=!yt.argsObject&&Ct(t)?Object:t.constructor,h=!yt.argsObject&&Ct(e)?Object:e.constructor;if(c!=h&&!(ht.call(t,"constructor")&&ht.call(e,"constructor"))&&!(k(c)&&c instanceof c&&k(h)&&h instanceof h)&&("constructor"in t&&"constructor"in e)){return false}}var f=!n;n||(n=[]);r||(r=[]);var l=n.length;while(l--){if(n[l]==t){return r[l]==e}}var p=0;var d=true;n.push(t);r.push(e);if(a){l=t.length;p=e.length;d=p==l;if(d){while(p--){var v=l,b=e[p];if(!(d=kt(t[p],b,n,r))){break}}}}else{St(e,function(e,i,o){if(ht.call(o,i)){p++;return d=ht.call(t,i)&&kt(t[i],e,n,r)}});if(d){St(t,function(t,e,n){if(ht.call(n,e)){return d=--p>-1}})}}n.pop();r.pop();return d}var Nt={}.hasOwnProperty,Ot=Array.prototype.slice;var Dt=this.inherits=l.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype;t.prototype=new n};var _t=l.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;n<r;n++){e.push(arguments[n])}for(var i=0,o=e.length;i<o;i++){var s=e[i];for(var u in s){t[u]=s[u]}}};var Ft=l.internals.addRef=function(t,e){return new Ur(function(n){return new It(e.getDisposable(),t.subscribe(n))})};function jt(t,e){var n=new Array(t);for(var r=0;r<t;r++){n[r]=e()}return n}var Tt={e:{}};var Rt;function Wt(){try{return Rt.apply(this,arguments)}catch(t){Tt.e=t;return Tt}}function Ut(t){if(!k(t)){throw new TypeError("fn must be a function")}Rt=t;return Wt}function Mt(t){throw t}function Pt(t,e){this.id=t;this.value=e}Pt.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);e===0&&(e=this.id-t.id);return e};var qt=l.internals.PriorityQueue=function(t){this.items=new Array(t);this.length=0};var Lt=qt.prototype;Lt.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0};Lt.percolate=function(t){if(t>=this.length||t<0){return}var e=t-1>>1;if(e<0||e===t){return}if(this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e];this.items[e]=n;this.percolate(e)}};Lt.heapify=function(t){+t||(t=0);if(t>=this.length||t<0){return}var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)){r=e}if(n<this.length&&this.isHigherPriority(n,r)){r=n}if(r!==t){var i=this.items[t];this.items[t]=this.items[r];this.items[r]=i;this.heapify(r)}};Lt.peek=function(){return this.items[0].value};Lt.removeAt=function(t){this.items[t]=this.items[--this.length];this.items[this.length]=i;this.heapify()};Lt.dequeue=function(){var t=this.peek();this.removeAt(0);return t};Lt.enqueue=function(t){var e=this.length++;this.items[e]=new Pt(qt.count++,t);this.percolate(e)};Lt.remove=function(t){for(var e=0;e<this.length;e++){if(this.items[e].value===t){this.removeAt(e);return true}}return false};qt.count=0;var It=l.CompositeDisposable=function(){var t=[],e,n;if(Array.isArray(arguments[0])){t=arguments[0];n=t.length}else{n=arguments.length;t=new Array(n);for(e=0;e<n;e++){t[e]=arguments[e]}}for(e=0;e<n;e++){if(!Vt(t[e])){throw new TypeError("Not a disposable")}}this.disposables=t;this.isDisposed=false;this.length=t.length};var Bt=It.prototype;Bt.add=function(t){if(this.isDisposed){t.dispose()}else{this.disposables.push(t);this.length++}};Bt.remove=function(t){var e=false;if(!this.isDisposed){var n=this.disposables.indexOf(t);if(n!==-1){e=true;this.disposables.splice(n,1);this.length--;t.dispose()}}return e};Bt.dispose=function(){if(!this.isDisposed){this.isDisposed=true;var t=this.disposables.length,e=new Array(t);for(var n=0;n<t;n++){e[n]=this.disposables[n]}this.disposables=[];this.length=0;for(n=0;n<t;n++){e[n].dispose()}}};var Qt=l.Disposable=function(t){this.isDisposed=false;this.action=t||p};Qt.prototype.dispose=function(){if(!this.isDisposed){this.action();this.isDisposed=true}};var Jt=Qt.create=function(t){return new Qt(t)};var zt=Qt.empty={dispose:p};var Vt=Qt.isDisposable=function(t){return t&&k(t.dispose)};var Ht=Qt.checkDisposed=function(t){if(t.isDisposed){throw new L}};var Yt=l.SingleAssignmentDisposable=function(){this.isDisposed=false;this.current=null};Yt.prototype.getDisposable=function(){return this.current};Yt.prototype.setDisposable=function(t){if(this.current){throw new Error("Disposable has already been assigned")}var e=this.isDisposed;!e&&(this.current=t);e&&t&&t.dispose()};Yt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=true;var t=this.current;this.current=null}t&&t.dispose()};var Kt=l.SerialDisposable=function(){this.isDisposed=false;this.current=null};Kt.prototype.getDisposable=function(){return this.current};Kt.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose();e&&t&&t.dispose()};Kt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=true;var t=this.current;this.current=null}t&&t.dispose()};var Gt=l.RefCountDisposable=function(){function t(t){this.disposable=t;this.disposable.count++;this.isInnerDisposed=false}t.prototype.dispose=function(){if(!this.disposable.isDisposed&&!this.isInnerDisposed){this.isInnerDisposed=true;this.disposable.count--;if(this.disposable.count===0&&this.disposable.isPrimaryDisposed){this.disposable.isDisposed=true;this.disposable.underlyingDisposable.dispose()}}};function e(t){this.underlyingDisposable=t;this.isDisposed=false;this.isPrimaryDisposed=false;this.count=0}e.prototype.dispose=function(){if(!this.isDisposed&&!this.isPrimaryDisposed){this.isPrimaryDisposed=true;if(this.count===0){this.isDisposed=true;this.underlyingDisposable.dispose()}}};e.prototype.getDisposable=function(){return this.isDisposed?zt:new t(this)};return e}();function Zt(t,e){this.scheduler=t;this.disposable=e;this.isDisposed=false}function $t(t,e){if(!e.isDisposed){e.isDisposed=true;e.disposable.dispose()}}Zt.prototype.dispose=function(){this.scheduler.scheduleWithState(this,$t)};var Xt=l.internals.ScheduledItem=function(t,e,n,r,i){this.scheduler=t;this.state=e;this.action=n;this.dueTime=r;this.comparer=i||w;this.disposable=new Yt};Xt.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())};Xt.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)};Xt.prototype.isCancelled=function(){return this.disposable.isDisposed};Xt.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var te=l.Scheduler=function(){function t(t,e,n,r){this.now=t;this._schedule=e;this._scheduleRelative=n;this._scheduleAbsolute=r}t.isScheduler=function(e){return e instanceof t};function e(t,e){e();return zt}var n=t.prototype;n.schedule=function(t){return this._schedule(t,e)};n.scheduleWithState=function(t,e){return this._schedule(t,e)};n.scheduleWithRelative=function(t,n){return this._scheduleRelative(n,t,e)};n.scheduleWithRelativeAndState=function(t,e,n){return this._scheduleRelative(t,e,n)};n.scheduleWithAbsolute=function(t,n){return this._scheduleAbsolute(n,t,e)};n.scheduleWithAbsoluteAndState=function(t,e,n){return this._scheduleAbsolute(t,e,n)};t.now=y;t.normalize=function(t){t<0&&(t=0);return t};return t}();var ee=te.normalize,ne=te.isScheduler;(function(t){function e(t,e){var n=e[0],r=e[1],i=new It;function o(e){r(e,function(e){var n=false,r=false,s=t.scheduleWithState(e,function(t,e){if(n){i.remove(s)}else{r=true}o(e);return zt});if(!r){i.add(s);n=true}})}o(n);return i}function n(t,e,n){var r=e[0],i=e[1],o=new It;function s(e){i(e,function(e,r){var i=false,u=false,a=t[n](e,r,function(t,e){if(i){o.remove(a)}else{u=true}s(e);return zt});if(!u){o.add(a);i=true}})}s(r);return o}function r(t,e){t(function(n){e(t,n)})}t.scheduleRecursive=function(t){return this.scheduleRecursiveWithState(t,function(t,e){t(function(){e(t)})})};t.scheduleRecursiveWithState=function(t,n){return this.scheduleWithState([t,n],e)};t.scheduleRecursiveWithRelative=function(t,e){return this.scheduleRecursiveWithRelativeAndState(e,t,r)};t.scheduleRecursiveWithRelativeAndState=function(t,e,r){return this._scheduleRelative([t,r],e,function(t,e){return n(t,e,"scheduleWithRelativeAndState")})};t.scheduleRecursiveWithAbsolute=function(t,e){return this.scheduleRecursiveWithAbsoluteAndState(e,t,r)};t.scheduleRecursiveWithAbsoluteAndState=function(t,e,r){return this._scheduleAbsolute([t,r],e,function(t,e){return n(t,e,"scheduleWithAbsoluteAndState")})}})(te.prototype);(function(t){te.prototype.schedulePeriodic=function(t,e){return this.schedulePeriodicWithState(null,t,e)};te.prototype.schedulePeriodicWithState=function(t,e,n){if(typeof u.setInterval==="undefined"){throw new B}e=ee(e);var r=t,i=u.setInterval(function(){r=n(r)},e);return Jt(function(){u.clearInterval(i)})}})(te.prototype);(function(t){t.catchError=t["catch"]=function(t){return new le(this,t)}})(te.prototype);var re=l.internals.SchedulePeriodicRecursive=function(){function t(t,e){e(0,this._period);try{this._state=this._action(this._state)}catch(n){this._cancel.dispose();throw n}}function e(t,e,n,r){this._scheduler=t;this._state=e;this._period=n;this._action=r}e.prototype.start=function(){var e=new Yt;this._cancel=e;e.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,t.bind(this)));return e};return e}();var ie=te.immediate=function(){function t(t,e){return e(this,t)}return new te(y,t,z,z)}();var oe=te.currentThread=function(){var t;function e(){while(t.length>0){var e=t.dequeue();!e.isCancelled()&&e.invoke()}}function n(n,r){var i=new Xt(this,n,r,this.now());if(!t){t=new qt(4);t.enqueue(i);var o=Ut(e)();t=null;if(o===Tt){return Mt(o.e)}}else{t.enqueue(i)}return i.disposable}var r=new te(y,n,z,z);r.scheduleRequired=function(){return!t};return r}();var se,ue;var ae=function(){var t,e=p;if(!!u.setTimeout){t=u.setTimeout;e=u.clearTimeout}else if(!!u.WScript){t=function(t,e){u.WScript.Sleep(e);t()}}else{throw new B}return{setTimeout:t,clearTimeout:e}}();var ce=ae.setTimeout,he=ae.clearTimeout;(function(){var e=1,n={},r=false;ue=function(t){delete n[t]};function i(t){if(r){ce(function(){i(t)},0)}else{var e=n[t];if(e){r=true;var o=Ut(e)();ue(t);r=false;if(o===Tt){
return Mt(o.e)}}}}var o=RegExp("^"+String(ct).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");var s=typeof(s=f&&h&&f.setImmediate)=="function"&&!o.test(s)&&s;function a(){if(!u.postMessage||u.importScripts){return false}var t=false,e=u.onmessage;u.onmessage=function(){t=true};u.postMessage("","*");u.onmessage=e;return t}if(k(s)){se=function(t){var r=e++;n[r]=t;s(function(){i(r)});return r}}else if(typeof t!=="undefined"&&{}.toString.call(t)==="[object process]"){se=function(r){var o=e++;n[o]=r;t.nextTick(function(){i(o)});return o}}else if(a()){var c="ms.rx.schedule"+Math.random();function l(t){if(typeof t.data==="string"&&t.data.substring(0,c.length)===c){i(t.data.substring(c.length))}}if(u.addEventListener){u.addEventListener("message",l,false)}else if(u.attachEvent){u.attachEvent("onmessage",l)}else{u.onmessage=l}se=function(t){var r=e++;n[r]=t;u.postMessage(c+currentId,"*");return r}}else if(!!u.MessageChannel){var p=new u.MessageChannel;p.port1.onmessage=function(t){i(t.data)};se=function(t){var r=e++;n[r]=t;p.port2.postMessage(r);return r}}else if("document"in u&&"onreadystatechange"in u.document.createElement("script")){se=function(t){var r=u.document.createElement("script");var o=e++;n[o]=t;r.onreadystatechange=function(){i(o);r.onreadystatechange=null;r.parentNode.removeChild(r);r=null};u.document.documentElement.appendChild(r);return o}}else{se=function(t){var r=e++;n[r]=t;ce(function(){i(r)},0);return r}}})();var fe=te.timeout=te["default"]=function(){function t(t,e){var n=this,r=new Yt;var i=se(function(){!r.isDisposed&&r.setDisposable(e(n,t))});return new It(r,Jt(function(){ue(i)}))}function e(t,e,n){var r=this,i=te.normalize(e),o=new Yt;if(i===0){return r.scheduleWithState(t,n)}var s=ce(function(){!o.isDisposed&&o.setDisposable(n(r,t))},i);return new It(o,Jt(function(){he(s)}))}function n(t,e,n){return this.scheduleWithRelativeAndState(t,e-this.now(),n)}return new te(y,t,e,n)}();var le=function(t){function e(t,e){return this._scheduler.scheduleWithState(t,this._wrap(e))}function n(t,e,n){return this._scheduler.scheduleWithRelativeAndState(t,e,this._wrap(n))}function r(t,e,n){return this._scheduler.scheduleWithAbsoluteAndState(t,e,this._wrap(n))}Dt(i,t);function i(i,o){this._scheduler=i;this._handler=o;this._recursiveOriginal=null;this._recursiveWrapper=null;t.call(this,this._scheduler.now.bind(this._scheduler),e,n,r)}i.prototype._clone=function(t){return new i(t,this._handler)};i.prototype._wrap=function(t){var e=this;return function(n,r){try{return t(e._getRecursiveWrapper(n),r)}catch(i){if(!e._handler(i)){throw i}return zt}}};i.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t;e._recursiveWrapper=e;this._recursiveWrapper=e}return this._recursiveWrapper};i.prototype.schedulePeriodicWithState=function(t,e,n){var r=this,i=false,o=new Yt;o.setDisposable(this._scheduler.schedulePeriodicWithState(t,e,function(t){if(i){return null}try{return n(t)}catch(e){i=true;if(!r._handler(e)){throw e}o.dispose();return null}}));return o};return i}(te);var pe=l.Notification=function(){function t(t,e,n,r,i,o){this.kind=t;this.value=e;this.exception=n;this._accept=r;this._acceptObservable=i;this.toString=o}t.prototype.accept=function(t,e,n){return t&&typeof t==="object"?this._acceptObservable(t):this._accept(t,e,n)};t.prototype.toObservable=function(t){var e=this;ne(t)||(t=ie);return new Ur(function(n){return t.scheduleWithState(e,function(t,e){e._acceptObservable(n);e.kind==="N"&&n.onCompleted()})})};return t}();var de=pe.createOnNext=function(){function t(t){return t(this.value)}function e(t){return t.onNext(this.value)}function n(){return"OnNext("+this.value+")"}return function(r){return new pe("N",r,null,t,e,n)}}();var ve=pe.createOnError=function(){function t(t,e){return e(this.exception)}function e(t){return t.onError(this.exception)}function n(){return"OnError("+this.exception+")"}return function(r){return new pe("E",null,r,t,e,n)}}();var be=pe.createOnCompleted=function(){function t(t,e,n){return n()}function e(t){return t.onCompleted()}function n(){return"OnCompleted()"}return function(){return new pe("C",null,null,t,e,n)}}();var ge=l.internals.Enumerator=function(t){this._next=t};ge.prototype.next=function(){return this._next()};ge.prototype[V]=function(){return this};var ye=l.internals.Enumerable=function(t){this._iterator=t};ye.prototype[V]=function(){return this._iterator()};ye.prototype.concat=function(){var t=this;return new Ur(function(e){var n=t[V]();var r,i=new Kt;var o=ie.scheduleRecursive(function(t){if(r){return}try{var o=n.next()}catch(s){return e.onError(s)}if(o.done){return e.onCompleted()}var u=o.value;x(u)&&(u=Fe(u));var a=new Yt;i.setDisposable(a);a.setDisposable(u.subscribe(function(t){e.onNext(t)},function(t){e.onError(t)},t))});return new It(i,o,Jt(function(){r=true}))})};ye.prototype.catchError=function(){var t=this;return new Ur(function(e){var n=t[V]();var r,i=new Kt;var o=ie.scheduleRecursiveWithState(null,function(t,o){if(r){return}try{var s=n.next()}catch(u){return observer.onError(u)}if(s.done){if(t!==null){e.onError(t)}else{e.onCompleted()}return}var a=s.value;x(a)&&(a=Fe(a));var c=new Yt;i.setDisposable(c);c.setDisposable(a.subscribe(function(t){e.onNext(t)},o,function(){e.onCompleted()}))});return new It(i,o,Jt(function(){r=true}))})};ye.prototype.catchErrorWhen=function(t){var e=this;return new Ur(function(n){var r=new qr,i=new qr,o=t(r),s=o.subscribe(i);var u=e[V]();var a,c,h=new Kt;var f=ie.scheduleRecursive(function(t){if(a){return}try{var e=u.next()}catch(o){return n.onError(o)}if(e.done){if(c){n.onError(c)}else{n.onCompleted()}return}var s=e.value;x(s)&&(s=Fe(s));var f=new Yt;var l=new Yt;h.setDisposable(new It(l,f));f.setDisposable(s.subscribe(function(t){n.onNext(t)},function(e){l.setDisposable(i.subscribe(t,function(t){n.onError(t)},function(){n.onCompleted()}));r.onNext(e)},function(){n.onCompleted()}))});return new It(s,h,f,Jt(function(){a=true}))})};var me=ye.repeat=function(t,e){if(e==null){e=-1}return new ye(function(){var n=e;return new ge(function(){if(n===0){return H}if(n>0){n--}return{done:false,value:t}})})};var we=ye.of=function(t,e,n){if(e){var r=G(e,n,3)}return new ye(function(){var n=-1;return new ge(function(){return++n<t.length?{done:false,value:!e?t[n]:r(t[n],n,t)}:H})})};var Ee=l.Observer=function(){};Ee.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}};Ee.prototype.asObserver=function(){return new Ce(this.onNext.bind(this),this.onError.bind(this),this.onCompleted.bind(this))};Ee.prototype.checked=function(){return new Ae(this)};var Se=Ee.create=function(t,e,n){t||(t=p);e||(e=S);n||(n=p);return new Ce(t,e,n)};Ee.fromNotifier=function(t,e){return new Ce(function(n){return t.call(e,de(n))},function(n){return t.call(e,ve(n))},function(){return t.call(e,be())})};Ee.prototype.notifyOn=function(t){return new Ne(t,this)};Ee.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var xe=l.internals.AbstractObserver=function(t){Dt(e,t);function e(){this.isStopped=false;t.call(this)}e.prototype.next=J;e.prototype.error=J;e.prototype.completed=J;e.prototype.onNext=function(t){if(!this.isStopped){this.next(t)}};e.prototype.onError=function(t){if(!this.isStopped){this.isStopped=true;this.error(t)}};e.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=true;this.completed()}};e.prototype.dispose=function(){this.isStopped=true};e.prototype.fail=function(t){if(!this.isStopped){this.isStopped=true;this.error(t);return true}return false};return e}(Ee);var Ce=l.AnonymousObserver=function(t){Dt(e,t);function e(e,n,r){t.call(this);this._onNext=e;this._onError=n;this._onCompleted=r}e.prototype.next=function(t){this._onNext(t)};e.prototype.error=function(t){this._onError(t)};e.prototype.completed=function(){this._onCompleted()};return e}(xe);var Ae=function(t){Dt(e,t);function e(e){t.call(this);this._observer=e;this._state=0}var n=e.prototype;n.onNext=function(t){this.checkAccess();var e=Ut(this._observer.onNext).call(this._observer,t);this._state=0;e===Tt&&Mt(e.e)};n.onError=function(t){this.checkAccess();var e=Ut(this._observer.onError).call(this._observer,t);this._state=2;e===Tt&&Mt(e.e)};n.onCompleted=function(){this.checkAccess();var t=Ut(this._observer.onCompleted).call(this._observer);this._state=2;t===Tt&&Mt(t.e)};n.checkAccess=function(){if(this._state===1){throw new Error("Re-entrancy detected")}if(this._state===2){throw new Error("Observer completed")}if(this._state===0){this._state=1}};return e}(Ee);var ke=l.internals.ScheduledObserver=function(t){Dt(e,t);function e(e,n){t.call(this);this.scheduler=e;this.observer=n;this.isAcquired=false;this.hasFaulted=false;this.queue=[];this.disposable=new Kt}e.prototype.next=function(t){var e=this;this.queue.push(function(){e.observer.onNext(t)})};e.prototype.error=function(t){var e=this;this.queue.push(function(){e.observer.onError(t)})};e.prototype.completed=function(){var t=this;this.queue.push(function(){t.observer.onCompleted()})};e.prototype.ensureActive=function(){var t=false,e=this;if(!this.hasFaulted&&this.queue.length>0){t=!this.isAcquired;this.isAcquired=true}if(t){this.disposable.setDisposable(this.scheduler.scheduleRecursive(function(t){var n;if(e.queue.length>0){n=e.queue.shift()}else{e.isAcquired=false;return}try{n()}catch(r){e.queue=[];e.hasFaulted=true;throw r}t()}))}};e.prototype.dispose=function(){t.prototype.dispose.call(this);this.disposable.dispose()};return e}(xe);var Ne=function(t){Dt(e,t);function e(e,n,r){t.call(this,e,n);this._cancel=r}e.prototype.next=function(e){t.prototype.next.call(this,e);this.ensureActive()};e.prototype.error=function(e){t.prototype.error.call(this,e);this.ensureActive()};e.prototype.completed=function(){t.prototype.completed.call(this);this.ensureActive()};e.prototype.dispose=function(){t.prototype.dispose.call(this);this._cancel&&this._cancel.dispose();this._cancel=null};return e}(ke);var Oe;var De=l.Observable=function(){function t(t){if(l.config.longStackSupport&&O){try{throw new Error}catch(e){this.stack=e.stack.substring(e.stack.indexOf("\n")+1)}var n=this;this._subscribe=function(e){var r=e.onError.bind(e);e.onError=function(t){T(t,n);r(t)};return t.call(n,e)}}else{this._subscribe=t}}Oe=t.prototype;Oe.subscribe=Oe.forEach=function(t,e,n){return this._subscribe(typeof t==="object"?t:Se(t,e,n))};Oe.subscribeOnNext=function(t,e){return this._subscribe(Se(typeof e!=="undefined"?function(n){t.call(e,n)}:t))};Oe.subscribeOnError=function(t,e){return this._subscribe(Se(null,typeof e!=="undefined"?function(n){t.call(e,n)}:t))};Oe.subscribeOnCompleted=function(t,e){return this._subscribe(Se(null,null,typeof e!=="undefined"?function(){t.call(e)}:t))};return t}();var _e=l.ObservableBase=function(t){Dt(i,t);function e(t){return t&&k(t.dispose)?t:k(t)?Jt(t):zt}function n(t,n){var r=n[0],i=n[1];var o=Ut(i.subscribeCore).call(i,r);if(o===Tt){if(!r.fail(Tt.e)){return Mt(Tt.e)}}r.setDisposable(e(o))}function r(t){var e=new Mr(t),r=[e,this];if(oe.scheduleRequired()){oe.scheduleWithState(r,n)}else{n(null,r)}return e}function i(){t.call(this,r)}i.prototype.subscribeCore=J;return i}(De);Oe.observeOn=function(t){var e=this;return new Ur(function(n){return e.subscribe(new Ne(t,n))},e)};Oe.subscribeOn=function(t){var e=this;return new Ur(function(n){var r=new Yt,i=new Kt;i.setDisposable(r);r.setDisposable(t.schedule(function(){i.setDisposable(new Zt(t,e.subscribe(n)))}));return i},e)};var Fe=De.fromPromise=function(t){return Re(function(){var e=new l.AsyncSubject;t.then(function(t){e.onNext(t);e.onCompleted()},e.onError.bind(e));return e})};Oe.toPromise=function(t){t||(t=l.config.Promise);if(!t){throw new B("Promise type not provided nor in Rx.config.Promise")}var e=this;return new t(function(t,n){var r,i=false;e.subscribe(function(t){r=t;i=true},n,function(){i&&t(r)})})};var je=function(t){Dt(e,t);function e(e){this.source=e;t.call(this)}e.prototype.subscribeCore=function(t){return this.source.subscribe(new Te(t))};return e}(_e);function Te(t){this.observer=t;this.a=[];this.isStopped=false}Te.prototype.onNext=function(t){if(!this.isStopped){this.a.push(t)}};Te.prototype.onError=function(t){if(!this.isStopped){this.isStopped=true;this.observer.onError(t)}};Te.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=true;this.observer.onNext(this.a);this.observer.onCompleted()}};Te.prototype.dispose=function(){this.isStopped=true};Te.prototype.fail=function(t){if(!this.isStopped){this.isStopped=true;this.observer.onError(t);return true}return false};Oe.toArray=function(){return new je(this)};De.create=De.createWithDisposable=function(t,e){return new Ur(t,e)};var Re=De.defer=function(t){return new Ur(function(e){var n;try{n=t()}catch(r){return ln(r).subscribe(e)}x(n)&&(n=Fe(n));return n.subscribe(e)})};var We=function(t){Dt(e,t);function e(e){this.scheduler=e;t.call(this)}e.prototype.subscribeCore=function(t){var e=new n(t,this);return e.run()};function n(t,e){this.observer=t;this.parent=e}function r(t,e){e.onCompleted()}n.prototype.run=function(){return this.parent.scheduler.scheduleWithState(this.observer,r)};return e}(_e);var Ue=De.empty=function(t){ne(t)||(t=ie);return new We(t)};var Me=function(t){Dt(e,t);function e(e,n,r){this.iterable=e;this.mapper=n;this.scheduler=r;t.call(this)}e.prototype.subscribeCore=function(t){var e=new Pe(t,this);return e.run()};return e}(_e);var Pe=function(){function t(t,e){this.observer=t;this.parent=e}t.prototype.run=function(){var t=Object(this.parent.iterable),e=Ve(t),n=this.observer,r=this.parent.mapper;function i(t,i){try{var o=e.next()}catch(s){return n.onError(s)}if(o.done){return n.onCompleted()}var u=o.value;if(r){try{u=r(u,t)}catch(s){return n.onError(s)}}n.onNext(u);i(t+1)}return this.parent.scheduler.scheduleRecursiveWithState(0,i)};return t}();var qe=Math.pow(2,53)-1;function Le(t){this._s=s}Le.prototype[V]=function(){return new Ie(this._s)};function Ie(t){this._s=s;this._l=s.length;this._i=0}Ie.prototype[V]=function(){return this};Ie.prototype.next=function(){return this._i<this._l?{done:false,value:this._s.charAt(this._i++)}:H};function Be(t){this._a=t}Be.prototype[V]=function(){return new Qe(this._a)};function Qe(t){this._a=t;this._l=Ye(t);this._i=0}Qe.prototype[V]=function(){return this};Qe.prototype.next=function(){return this._i<this._l?{done:false,value:this._a[this._i++]}:H};function Je(t){return typeof t==="number"&&u.isFinite(t)}function ze(t){return t!==t}function Ve(t){var e=t[V],n;if(!e&&typeof t==="string"){n=new Le(t);return n[V]()}if(!e&&t.length!==i){n=new Be(t);return n[V]()}if(!e){throw new TypeError("Object is not iterable")}return t[V]()}function He(t){var e=+t;if(e===0){return e}if(isNaN(e)){return e}return e<0?-1:1}function Ye(t){var e=+t.length;if(isNaN(e)){return 0}if(e===0||!Je(e)){return e}e=He(e)*Math.floor(Math.abs(e));if(e<=0){return 0}if(e>qe){return qe}return e}var Ke=De.from=function(t,e,n,r){if(t==null){throw new Error("iterable cannot be null.")}if(e&&!k(e)){throw new Error("mapFn when provided must be a function")}if(e){var i=G(e,n,2)}ne(r)||(r=oe);return new Me(t,i,r)};var Ge=function(t){Dt(e,t);function e(e,n){this.args=e;this.scheduler=n;t.call(this)}e.prototype.subscribeCore=function(t){var e=new Ze(t,this);return e.run()};return e}(_e);function Ze(t,e){this.observer=t;this.parent=e}Ze.prototype.run=function(){var t=this.observer,e=this.parent.args,n=e.length;function r(r,i){if(r<n){t.onNext(e[r]);i(r+1)}else{t.onCompleted()}}return this.parent.scheduler.scheduleRecursiveWithState(0,r)};var $e=De.fromArray=function(t,e){ne(e)||(e=oe);return new Ge(t,e)};De.generate=function(t,e,n,r,i){ne(i)||(i=oe);return new Ur(function(o){var s=true;return i.scheduleRecursiveWithState(t,function(t,i){var u,a;try{if(s){s=false}else{t=n(t)}u=e(t);u&&(a=r(t))}catch(c){return o.onError(c)}if(u){o.onNext(a);i(t)}else{o.onCompleted()}})})};function Xe(t,e){ne(t)||(t=oe);return new Ge(e,t)}De.of=function(){var t=arguments.length,e=new Array(t);for(var n=0;n<t;n++){e[n]=arguments[n]}return new Ge(e,oe)};De.ofWithScheduler=function(t){var e=arguments.length,n=new Array(e-1);for(var r=1;r<e;r++){n[r-1]=arguments[r]}return new Ge(n,t)};De.ofArrayChanges=function(t){if(!Array.isArray(t)){throw new TypeError("Array.observe only accepts arrays.")}if(typeof Array.observe!=="function"&&typeof Array.unobserve!=="function"){throw new TypeError("Array.observe is not supported on your platform")}return new Ur(function(e){function n(t){for(var n=0,r=t.length;n<r;n++){e.onNext(t[n])}}Array.observe(t,n);return function(){Array.unobserve(t,n)}})};De.ofObjectChanges=function(t){if(t==null){throw new TypeError("object must not be null or undefined.")}if(typeof Object.observe!=="function"&&typeof Object.unobserve!=="function"){throw new TypeError("Array.observe is not supported on your platform")}return new Ur(function(e){function n(t){for(var n=0,r=t.length;n<r;n++){e.onNext(t[n])}}Object.observe(t,n);return function(){Object.unobserve(t,n)}})};var tn=function(t){Dt(e,t);function e(){t.call(this)}e.prototype.subscribeCore=function(t){return zt};return e}(_e);var en=De.never=function(){return new tn};var nn=function(t){Dt(e,t);function e(e,n){this.obj=e;this.keys=Object.keys(e);this.scheduler=n;t.call(this)}e.prototype.subscribeCore=function(t){var e=new rn(t,this);return e.run()};return e}(_e);function rn(t,e){this.observer=t;this.parent=e}rn.prototype.run=function(){var t=this.observer,e=this.parent.obj,n=this.parent.keys,r=n.length;function i(i,o){if(i<r){var s=n[i];t.onNext([s,e[s]]);o(i+1)}else{t.onCompleted()}}return this.parent.scheduler.scheduleRecursiveWithState(0,i)};De.pairs=function(t,e){e||(e=oe);return new nn(t,e)};var on=function(t){Dt(e,t);function e(e,n,r){this.start=e;this.count=n;this.scheduler=r;t.call(this)}e.prototype.subscribeCore=function(t){var e=new sn(t,this);return e.run()};return e}(_e);var sn=function(){function t(t,e){this.observer=t;this.parent=e}t.prototype.run=function(){var t=this.parent.start,e=this.parent.count,n=this.observer;function r(r,i){if(r<e){n.onNext(t+r);i(r+1)}else{n.onCompleted()}}return this.parent.scheduler.scheduleRecursiveWithState(0,r)};return t}();De.range=function(t,e,n){ne(n)||(n=oe);return new on(t,e,n)};var un=function(t){Dt(e,t);function e(e,n,r){this.value=e;this.repeatCount=n==null?-1:n;this.scheduler=r;t.call(this)}e.prototype.subscribeCore=function(t){var e=new an(t,this);return e.run()};return e}(_e);function an(t,e){this.observer=t;this.parent=e}an.prototype.run=function(){var t=this.observer,e=this.parent.value;function n(n,r){if(n===-1||n>0){t.onNext(e);n>0&&n--}if(n===0){return t.onCompleted()}r(n)}return this.parent.scheduler.scheduleRecursiveWithState(this.parent.repeatCount,n)};De.repeat=function(t,e,n){ne(n)||(n=oe);return new un(t,e,n)};var cn=function(t){Dt(e,t);function e(e,n){this.value=e;this.scheduler=n;t.call(this)}e.prototype.subscribeCore=function(t){var e=new n(t,this);return e.run()};function n(t,e){this.observer=t;this.parent=e}function r(t,e){var n=e[0],r=e[1];r.onNext(n);r.onCompleted()}n.prototype.run=function(){return this.parent.scheduler.scheduleWithState([this.parent.value,this.observer],r)};return e}(_e);var hn=De["return"]=De.just=De.returnValue=function(t,e){ne(e)||(e=ie);return new cn(t,e)};var fn=function(t){Dt(e,t);function e(e,n){this.error=e;this.scheduler=n;t.call(this)}e.prototype.subscribeCore=function(t){var e=new n(t,this);return e.run()};function n(t,e){this.observer=t;this.parent=e}function r(t,e){var n=e[0],r=e[1];r.onError(n)}n.prototype.run=function(){return this.parent.scheduler.scheduleWithState([this.parent.error,this.observer],r)};return e}(_e);var ln=De["throw"]=De.throwError=De.throwException=function(t,e){ne(e)||(e=ie);return new fn(t,e)};De.using=function(t,e){return new Ur(function(n){var r=zt,i,o;try{i=t();i&&(r=i);o=e(i)}catch(s){return new It(ln(s).subscribe(n),r)}return new It(o.subscribe(n),r)})};Oe.amb=function(t){var e=this;return new Ur(function(n){var r,i="L",o="R",s=new Yt,u=new Yt;x(t)&&(t=Fe(t));function a(){if(!r){r=i;u.dispose()}}function c(){if(!r){r=o;s.dispose()}}s.setDisposable(e.subscribe(function(t){a();if(r===i){n.onNext(t)}},function(t){a();if(r===i){n.onError(t)}},function(){a();if(r===i){n.onCompleted()}}));u.setDisposable(t.subscribe(function(t){c();if(r===o){n.onNext(t)}},function(t){c();if(r===o){n.onError(t)}},function(){c();if(r===o){n.onCompleted()}}));return new It(s,u)})};De.amb=function(){var t=en(),e=[];if(Array.isArray(arguments[0])){e=arguments[0]}else{for(var n=0,r=arguments.length;n<r;n++){e.push(arguments[n])}}function i(t,e){return t.amb(e)}for(var n=0,r=e.length;n<r;n++){t=i(t,e[n])}return t};function pn(t,e){return new Ur(function(n){var r=new Yt,i=new Kt;i.setDisposable(r);r.setDisposable(t.subscribe(function(t){n.onNext(t)},function(t){try{var r=e(t)}catch(o){return n.onError(o)}x(r)&&(r=Fe(r));var s=new Yt;i.setDisposable(s);s.setDisposable(r.subscribe(n))},function(t){n.onCompleted(t)}));return i},t)}Oe["catch"]=Oe.catchError=Oe.catchException=function(t){return typeof t==="function"?pn(this,t):dn([this,t])};var dn=De.catchError=De["catch"]=De.catchException=function(){var t=[];if(Array.isArray(arguments[0])){t=arguments[0]}else{for(var e=0,n=arguments.length;e<n;e++){t.push(arguments[e])}}return we(t).catchError()};Oe.combineLatest=function(){var t=arguments.length,e=new Array(t);for(var n=0;n<t;n++){e[n]=arguments[n]}if(Array.isArray(e[0])){e[0].unshift(this)}else{e.unshift(this)}return vn.apply(this,e)};var vn=De.combineLatest=function(){var t=arguments.length,e=new Array(t);for(var n=0;n<t;n++){e[n]=arguments[n]}var r=e.pop();Array.isArray(e[0])&&(e=e[0]);return new Ur(function(t){var n=e.length,i=function(){return false},o=jt(n,i),s=false,u=jt(n,i),a=new Array(n);function c(e){o[e]=true;if(s||(s=o.every(v))){try{var n=r.apply(null,a)}catch(i){return t.onError(i)}t.onNext(n)}else if(u.filter(function(t,n){return n!==e}).every(v)){t.onCompleted()}}function h(e){u[e]=true;u.every(v)&&t.onCompleted()}var f=new Array(n);for(var l=0;l<n;l++){(function(n){var r=e[n],i=new Yt;x(r)&&(r=Fe(r));i.setDisposable(r.subscribe(function(t){a[n]=t;c(n)},function(e){t.onError(e)},function(){h(n)}));f[n]=i})(l)}return new It(f)},this)};Oe.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++){t.push(arguments[e])}t.unshift(this);return bn.apply(null,t)};var bn=De.concat=function(){var t;if(Array.isArray(arguments[0])){t=arguments[0]}else{t=new Array(arguments.length);for(var e=0,n=arguments.length;e<n;e++){t[e]=arguments[e]}}return we(t).concat()};Oe.concatAll=Oe.concatObservable=function(){return this.merge(1)};var gn=function(t){Dt(e,t);function e(e,n){this.source=e;this.maxConcurrent=n;t.call(this)}e.prototype.subscribeCore=function(t){var e=new It;e.add(this.source.subscribe(new yn(t,this.maxConcurrent,e)));return e};return e}(_e);var yn=function(){function t(t,e,n){this.o=t;this.max=e;this.g=n;this.done=false;this.q=[];this.activeCount=0;this.isStopped=false}t.prototype.handleSubscribe=function(t){var n=new Yt;this.g.add(n);x(t)&&(t=Fe(t));n.setDisposable(t.subscribe(new e(this,n)))};t.prototype.onNext=function(t){if(this.isStopped){return}if(this.activeCount<this.max){this.activeCount++;this.handleSubscribe(t)}else{this.q.push(t)}};t.prototype.onError=function(t){if(!this.isStopped){this.isStopped=true;this.o.onError(t)}};t.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=true;this.done=true;this.activeCount===0&&this.o.onCompleted()}};t.prototype.dispose=function(){this.isStopped=true};t.prototype.fail=function(t){if(!this.isStopped){this.isStopped=true;this.o.onError(t);return true}return false};function e(t,e){this.parent=t;this.sad=e;this.isStopped=false}e.prototype.onNext=function(t){if(!this.isStopped){this.parent.o.onNext(t)}};e.prototype.onError=function(t){if(!this.isStopped){this.isStopped=true;this.parent.o.onError(t)}};e.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=true;var t=this.parent;t.g.remove(this.sad);if(t.q.length>0){t.handleSubscribe(t.q.shift())}else{t.activeCount--;t.done&&t.activeCount===0&&t.o.onCompleted()}}};e.prototype.dispose=function(){this.isStopped=true};e.prototype.fail=function(t){if(!this.isStopped){this.isStopped=true;this.parent.o.onError(t);return true}return false};return t}();Oe.merge=function(t){return typeof t!=="number"?mn(this,t):new gn(this,t)};var mn=De.merge=function(){var t,e=[],n,r=arguments.length;if(!arguments[0]){t=ie;for(n=1;n<r;n++){e.push(arguments[n])}}else if(ne(arguments[0])){t=arguments[0];for(n=1;n<r;n++){e.push(arguments[n])}}else{t=ie;for(n=0;n<r;n++){e.push(arguments[n])}}if(Array.isArray(e[0])){e=e[0]}return Xe(t,e).mergeAll()};var wn=function(t){Dt(e,t);function e(e){this.source=e;t.call(this)}e.prototype.subscribeCore=function(t){var e=new It,n=new Yt;e.add(n);n.setDisposable(this.source.subscribe(new En(t,e)));return e};return e}(_e);var En=function(){function t(t,e){this.o=t;this.g=e;this.isStopped=false;this.done=false}t.prototype.onNext=function(t){if(this.isStopped){return}var n=new Yt;this.g.add(n);x(t)&&(t=Fe(t));n.setDisposable(t.subscribe(new e(this,this.g,n)))};t.prototype.onError=function(t){if(!this.isStopped){this.isStopped=true;this.o.onError(t)}};t.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=true;this.done=true;this.g.length===1&&this.o.onCompleted()}};t.prototype.dispose=function(){this.isStopped=true};t.prototype.fail=function(t){if(!this.isStopped){this.isStopped=true;this.o.onError(t);return true}return false};function e(t,e,n){this.parent=t;this.g=e;this.sad=n;this.isStopped=false}e.prototype.onNext=function(t){if(!this.isStopped){this.parent.o.onNext(t)}};e.prototype.onError=function(t){if(!this.isStopped){this.isStopped=true;this.parent.o.onError(t)}};e.prototype.onCompleted=function(){if(!this.isStopped){var t=this.parent;this.isStopped=true;t.g.remove(this.sad);t.done&&t.g.length===1&&t.o.onCompleted()}};e.prototype.dispose=function(){this.isStopped=true};e.prototype.fail=function(t){if(!this.isStopped){this.isStopped=true;this.parent.o.onError(t);return true}return false};return t}();Oe.mergeAll=Oe.mergeObservable=function(){return new wn(this)};var Sn=l.CompositeError=function(t){this.name="NotImplementedError";this.innerErrors=t;this.message="This contains multiple errors. Check the innerErrors";Error.call(this)};Sn.prototype=Error.prototype;De.mergeDelayError=function(){var t;if(Array.isArray(arguments[0])){t=arguments[0]}else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++){t[n]=arguments[n]}}var r=Xe(null,t);return new Ur(function(t){var e=new It,n=new Yt,i=false,o=[];function s(){if(o.length===0){t.onCompleted()}else if(o.length===1){t.onError(o[0])}else{t.onError(new Sn(o))}}e.add(n);n.setDisposable(r.subscribe(function(n){var r=new Yt;e.add(r);x(n)&&(n=Fe(n));r.setDisposable(n.subscribe(function(e){t.onNext(e)},function(t){o.push(t);e.remove(r);i&&e.length===1&&s()},function(){e.remove(r);i&&e.length===1&&s()}))},function(t){o.push(t);i=true;e.length===1&&s()},function(){i=true;e.length===1&&s()}));return e})};Oe.onErrorResumeNext=function(t){if(!t){throw new Error("Second observable is required")}return xn([this,t])};var xn=De.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0])){t=arguments[0]}else{for(var e=0,n=arguments.length;e<n;e++){t.push(arguments[e])}}return new Ur(function(e){var n=0,r=new Kt,i=ie.scheduleRecursive(function(i){var o,s;if(n<t.length){o=t[n++];x(o)&&(o=Fe(o));s=new Yt;r.setDisposable(s);s.setDisposable(o.subscribe(e.onNext.bind(e),i,i))}else{e.onCompleted()}});return new It(r,i)})};Oe.skipUntil=function(t){var e=this;return new Ur(function(n){var r=false;var i=new It(e.subscribe(function(t){r&&n.onNext(t)},function(t){n.onError(t)},function(){r&&n.onCompleted()}));x(t)&&(t=Fe(t));var o=new Yt;i.add(o);o.setDisposable(t.subscribe(function(){r=true;o.dispose()},function(t){n.onError(t)},function(){o.dispose()}));return i},e)};Oe["switch"]=Oe.switchLatest=function(){var t=this;return new Ur(function(e){var n=false,r=new Kt,i=false,o=0,s=t.subscribe(function(t){var s=new Yt,u=++o;n=true;r.setDisposable(s);x(t)&&(t=Fe(t));s.setDisposable(t.subscribe(function(t){o===u&&e.onNext(t)},function(t){o===u&&e.onError(t)},function(){if(o===u){n=false;i&&e.onCompleted()}}))},function(t){e.onError(t)},function(){i=true;!n&&e.onCompleted()});return new It(s,r)},t)};Oe.takeUntil=function(t){var e=this;return new Ur(function(n){x(t)&&(t=Fe(t));return new It(e.subscribe(n),t.subscribe(function(){n.onCompleted()},function(t){n.onError(t)},p))},e)};Oe.withLatestFrom=function(){var t=arguments.length,e=new Array(t);for(var n=0;n<t;n++){e[n]=arguments[n]}var r=e.pop(),i=this;if(typeof i==="undefined"){throw new Error("Source observable not found for withLatestFrom().")}if(typeof r!=="function"){throw new Error("withLatestFrom() expects a resultSelector function.")}if(Array.isArray(e[0])){e=e[0]}return new Ur(function(t){var n=function(){return false},o=e.length,s=jt(o,n),u=false,a=new Array(o);var c=new Array(o+1);for(var h=0;h<o;h++){(function(n){var r=e[n],i=new Yt;x(r)&&(r=Fe(r));i.setDisposable(r.subscribe(function(t){a[n]=t;s[n]=true;u=s.every(v)},t.onError.bind(t),function(){}));c[n]=i})(h)}var f=new Yt;f.setDisposable(i.subscribe(function(e){var n;var i=[e].concat(a);if(!u)return;try{n=r.apply(null,i)}catch(o){t.onError(o);return}t.onNext(n)},t.onError.bind(t),function(){t.onCompleted()}));c[o]=f;return new It(c)},this)};function Cn(t,e){var n=this;return new Ur(function(r){var i=0,o=t.length;return n.subscribe(function(n){if(i<o){var s=t[i++],u;try{u=e(n,s)}catch(a){return r.onError(a)}r.onNext(u)}else{r.onCompleted()}},function(t){r.onError(t)},function(){r.onCompleted()})},n)}function An(){return false}function kn(){return[]}Oe.zip=function(){if(Array.isArray(arguments[0])){return Cn.apply(this,arguments)}var t=arguments.length,e=new Array(t);for(var n=0;n<t;n++){e[n]=arguments[n]}var r=this,i=e.pop();e.unshift(r);return new Ur(function(t){var n=e.length,o=jt(n,kn),s=jt(n,An);function u(e){var n,u;if(o.every(function(t){return t.length>0})){try{u=o.map(function(t){return t.shift()});n=i.apply(r,u)}catch(a){t.onError(a);return}t.onNext(n)}else if(s.filter(function(t,n){return n!==e}).every(v)){t.onCompleted()}}function a(e){s[e]=true;if(s.every(function(t){return t})){t.onCompleted()}}var c=new Array(n);for(var h=0;h<n;h++){(function(n){var r=e[n],i=new Yt;x(r)&&(r=Fe(r));i.setDisposable(r.subscribe(function(t){o[n].push(t);u(n)},function(e){t.onError(e)},function(){a(n)}));c[n]=i})(h)}return new It(c)},r)};De.zip=function(){var t=arguments.length,e=new Array(t);for(var n=0;n<t;n++){e[n]=arguments[n]}var r=e.shift();return r.zip.apply(r,e)};De.zipArray=function(){var t;if(Array.isArray(arguments[0])){t=arguments[0]}else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++){t[n]=arguments[n]}}return new Ur(function(e){var n=t.length,r=jt(n,function(){return[]}),i=jt(n,function(){return false});function o(t){if(r.every(function(t){return t.length>0})){var n=r.map(function(t){return t.shift()});e.onNext(n)}else if(i.filter(function(e,n){return n!==t}).every(v)){e.onCompleted();return}}function s(t){i[t]=true;if(i.every(v)){e.onCompleted();return}}var u=new Array(n);for(var a=0;a<n;a++){(function(n){u[n]=new Yt;u[n].setDisposable(t[n].subscribe(function(t){r[n].push(t);o(n)},function(t){e.onError(t)},function(){s(n)}))})(a)}return new It(u)})};Oe.asObservable=function(){var t=this;return new Ur(function(e){return t.subscribe(e)},this)};Oe.bufferWithCount=function(t,e){if(typeof e!=="number"){e=t}return this.windowWithCount(t,e).selectMany(function(t){return t.toArray()}).where(function(t){return t.length>0})};Oe.dematerialize=function(){var t=this;return new Ur(function(e){return t.subscribe(function(t){return t.accept(e)},function(t){e.onError(t)},function(){e.onCompleted()})},this)};Oe.distinctUntilChanged=function(t,e){
var n=this;e||(e=m);return new Ur(function(r){var i=false,o;return n.subscribe(function(n){var s=n;if(t){try{s=t(n)}catch(u){r.onError(u);return}}if(i){try{var a=e(o,s)}catch(u){r.onError(u);return}}if(!i||!a){i=true;o=s;r.onNext(n)}},function(t){r.onError(t)},function(){r.onCompleted()})},this)};Oe["do"]=Oe.tap=Oe.doAction=function(t,e,n){var r=this;return new Ur(function(i){var o=!t||k(t)?Se(t||p,e||p,n||p):t;return r.subscribe(function(t){try{o.onNext(t)}catch(e){i.onError(e)}i.onNext(t)},function(t){try{o.onError(t)}catch(e){i.onError(e)}i.onError(t)},function(){try{o.onCompleted()}catch(t){i.onError(t)}i.onCompleted()})},this)};Oe.doOnNext=Oe.tapOnNext=function(t,e){return this.tap(typeof e!=="undefined"?function(n){t.call(e,n)}:t)};Oe.doOnError=Oe.tapOnError=function(t,e){return this.tap(p,typeof e!=="undefined"?function(n){t.call(e,n)}:t)};Oe.doOnCompleted=Oe.tapOnCompleted=function(t,e){return this.tap(p,null,typeof e!=="undefined"?function(){t.call(e)}:t)};Oe["finally"]=Oe.ensure=function(t){var e=this;return new Ur(function(n){var r;try{r=e.subscribe(n)}catch(i){t();throw i}return Jt(function(){try{r.dispose()}catch(e){throw e}finally{t()}})},this)};Oe.finallyAction=function(t){return this.ensure(t)};Oe.ignoreElements=function(){var t=this;return new Ur(function(e){return t.subscribe(p,function(t){e.onError(t)},function(){e.onCompleted()})},t)};Oe.materialize=function(){var t=this;return new Ur(function(e){return t.subscribe(function(t){e.onNext(de(t))},function(t){e.onNext(ve(t));e.onCompleted()},function(){e.onNext(be());e.onCompleted()})},t)};Oe.repeat=function(t){return me(this,t).concat()};Oe.retry=function(t){return me(this,t).catchError()};Oe.retryWhen=function(t){return me(this).catchErrorWhen(t)};Oe.scan=function(){var t=false,e,n,r=this;if(arguments.length===2){t=true;e=arguments[0];n=arguments[1]}else{n=arguments[0]}return new Ur(function(i){var o,s,u;return r.subscribe(function(r){!u&&(u=true);try{if(o){s=n(s,r)}else{s=t?n(e,r):r;o=true}}catch(a){i.onError(a);return}i.onNext(s)},function(t){i.onError(t)},function(){!u&&t&&i.onNext(e);i.onCompleted()})},r)};Oe.skipLast=function(t){if(t<0){throw new I}var e=this;return new Ur(function(n){var r=[];return e.subscribe(function(e){r.push(e);r.length>t&&n.onNext(r.shift())},function(t){n.onError(t)},function(){n.onCompleted()})},e)};Oe.startWith=function(){var t,e,n=0;if(!!arguments.length&&ne(arguments[0])){e=arguments[0];n=1}else{e=ie}for(var r=[],i=n,o=arguments.length;i<o;i++){r.push(arguments[i])}return we([$e(r,e),this]).concat()};Oe.takeLast=function(t){if(t<0){throw new I}var e=this;return new Ur(function(n){var r=[];return e.subscribe(function(e){r.push(e);r.length>t&&r.shift()},function(t){n.onError(t)},function(){while(r.length>0){n.onNext(r.shift())}n.onCompleted()})},e)};Oe.takeLastBuffer=function(t){var e=this;return new Ur(function(n){var r=[];return e.subscribe(function(e){r.push(e);r.length>t&&r.shift()},function(t){n.onError(t)},function(){n.onNext(r);n.onCompleted()})},e)};Oe.windowWithCount=function(t,e){var n=this;+t||(t=0);Math.abs(t)===Infinity&&(t=0);if(t<=0){throw new I}e==null&&(e=t);+e||(e=0);Math.abs(e)===Infinity&&(e=0);if(e<=0){throw new I}return new Ur(function(r){var i=new Yt,o=new Gt(i),s=0,u=[];function a(){var t=new qr;u.push(t);r.onNext(Ft(t,o))}a();i.setDisposable(n.subscribe(function(n){for(var r=0,i=u.length;r<i;r++){u[r].onNext(n)}var o=s-t+1;o>=0&&o%e===0&&u.shift().onCompleted();++s%e===0&&a()},function(t){while(u.length>0){u.shift().onError(t)}r.onError(t)},function(){while(u.length>0){u.shift().onCompleted()}r.onCompleted()}));return o},n)};function Nn(t,e,n){var r=G(e,n,3);return t.map(function(e,n){var i=r(e,n,t);x(i)&&(i=Fe(i));(K(i)||Y(i))&&(i=Ke(i));return i}).concatAll()}Oe.selectConcat=Oe.concatMap=function(t,e,n){if(k(t)&&k(e)){return this.concatMap(function(n,r){var i=t(n,r);x(i)&&(i=Fe(i));(K(i)||Y(i))&&(i=Ke(i));return i.map(function(t,i){return e(n,t,r,i)})})}return k(t)?Nn(this,t,n):Nn(this,function(){return t})};Oe.concatMapObserver=Oe.selectConcatObserver=function(t,e,n,r){var i=this,o=G(t,r,2),s=G(e,r,1),u=G(n,r,0);return new Ur(function(t){var e=0;return i.subscribe(function(n){var r;try{r=o(n,e++)}catch(i){t.onError(i);return}x(r)&&(r=Fe(r));t.onNext(r)},function(e){var n;try{n=s(e)}catch(r){t.onError(r);return}x(n)&&(n=Fe(n));t.onNext(n);t.onCompleted()},function(){var e;try{e=u()}catch(n){t.onError(n);return}x(e)&&(e=Fe(e));t.onNext(e);t.onCompleted()})},this).concatAll()};Oe.defaultIfEmpty=function(t){var e=this;t===i&&(t=null);return new Ur(function(n){var r=false;return e.subscribe(function(t){r=true;n.onNext(t)},function(t){n.onError(t)},function(){!r&&n.onNext(t);n.onCompleted()})},e)};function On(t,e,n){for(var r=0,i=t.length;r<i;r++){if(n(t[r],e)){return r}}return-1}function Dn(t){this.comparer=t;this.set=[]}Dn.prototype.push=function(t){var e=On(this.set,t,this.comparer)===-1;e&&this.set.push(t);return e};Oe.distinct=function(t,e){var n=this;e||(e=m);return new Ur(function(r){var i=new Dn(e);return n.subscribe(function(e){var n=e;if(t){try{n=t(e)}catch(o){r.onError(o);return}}i.push(n)&&r.onNext(e)},function(t){r.onError(t)},function(){r.onCompleted()})},this)};Oe.groupBy=function(t,e,n){return this.groupByUntil(t,e,en,n)};Oe.groupByUntil=function(t,e,n,r){var i=this;e||(e=v);r||(r=m);return new Ur(function(o){function s(t){return function(e){e.onError(t)}}var u=new dr(0,r),a=new It,c=new Gt(a);a.add(i.subscribe(function(r){var i;try{i=t(r)}catch(h){u.getValues().forEach(s(h));o.onError(h);return}var f=false,l=u.tryGetValue(i);if(!l){l=new qr;u.set(i,l);f=true}if(f){var d=new Pr(i,l,c),v=new Pr(i,l);try{duration=n(v)}catch(h){u.getValues().forEach(s(h));o.onError(h);return}o.onNext(d);var b=new Yt;a.add(b);var g=function(){u.remove(i)&&l.onCompleted();a.remove(b)};b.setDisposable(duration.take(1).subscribe(p,function(t){u.getValues().forEach(s(t));o.onError(t)},g))}var y;try{y=e(r)}catch(h){u.getValues().forEach(s(h));o.onError(h);return}l.onNext(y)},function(t){u.getValues().forEach(s(t));o.onError(t)},function(){u.getValues().forEach(function(t){t.onCompleted()});o.onCompleted()}));return c},i)};var _n=function(t){Dt(e,t);function e(e,n,r){this.source=e;this.selector=G(n,r,3);t.call(this)}e.prototype.internalMap=function(t,n){var r=this;return new e(this.source,function(e,n,i){return t.call(this,r.selector(e,n,i),n,i)},n)};e.prototype.subscribeCore=function(t){return this.source.subscribe(new Fn(t,this.selector,this))};return e}(_e);function Fn(t,e,n){this.observer=t;this.selector=e;this.source=n;this.i=0;this.isStopped=false}Fn.prototype.onNext=function(t){if(this.isStopped){return}var e=Ut(this.selector).call(this,t,this.i++,this.source);if(e===Tt){return this.observer.onError(e.e)}this.observer.onNext(e)};Fn.prototype.onError=function(t){if(!this.isStopped){this.isStopped=true;this.observer.onError(t)}};Fn.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=true;this.observer.onCompleted()}};Fn.prototype.dispose=function(){this.isStopped=true};Fn.prototype.fail=function(t){if(!this.isStopped){this.isStopped=true;this.observer.onError(t);return true}return false};Oe.map=Oe.select=function(t,e){var n=typeof t==="function"?t:function(){return t};return this instanceof _n?this.internalMap(n,e):new _n(this,n,e)};Oe.pluck=function(){var t=arguments,e=arguments.length;if(e===0){throw new Error("List of properties cannot be empty.")}return this.map(function(n){var r=n;for(var o=0;o<e;o++){var s=r[t[o]];if(typeof s!=="undefined"){r=s}else{return i}}return r})};function jn(t,e,n){var r=G(e,n,3);return t.map(function(e,n){var i=r(e,n,t);x(i)&&(i=Fe(i));(K(i)||Y(i))&&(i=Ke(i));return i}).mergeAll()}Oe.selectMany=Oe.flatMap=function(t,e,n){if(k(t)&&k(e)){return this.flatMap(function(n,r){var i=t(n,r);x(i)&&(i=Fe(i));(K(i)||Y(i))&&(i=Ke(i));return i.map(function(t,i){return e(n,t,r,i)})},n)}return k(t)?jn(this,t,n):jn(this,function(){return t})};Oe.flatMapObserver=Oe.selectManyObserver=function(t,e,n,r){var i=this;return new Ur(function(o){var s=0;return i.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(i){o.onError(i);return}x(n)&&(n=Fe(n));o.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(i){o.onError(i);return}x(n)&&(n=Fe(n));o.onNext(n);o.onCompleted()},function(){var t;try{t=n.call(r)}catch(e){o.onError(e);return}x(t)&&(t=Fe(t));o.onNext(t);o.onCompleted()})},i).mergeAll()};Oe.selectSwitch=Oe.flatMapLatest=Oe.switchMap=function(t,e){return this.select(t,e).switchLatest()};Oe.skip=function(t){if(t<0){throw new I}var e=this;return new Ur(function(n){var r=t;return e.subscribe(function(t){if(r<=0){n.onNext(t)}else{r--}},function(t){n.onError(t)},function(){n.onCompleted()})},e)};Oe.skipWhile=function(t,e){var n=this,r=G(t,e,3);return new Ur(function(t){var e=0,i=false;return n.subscribe(function(o){if(!i){try{i=!r(o,e++,n)}catch(s){t.onError(s);return}}i&&t.onNext(o)},function(e){t.onError(e)},function(){t.onCompleted()})},n)};Oe.take=function(t,e){if(t<0){throw new I}if(t===0){return Ue(e)}var n=this;return new Ur(function(e){var r=t;return n.subscribe(function(t){if(r-->0){e.onNext(t);r===0&&e.onCompleted()}},function(t){e.onError(t)},function(){e.onCompleted()})},n)};Oe.takeWhile=function(t,e){var n=this,r=G(t,e,3);return new Ur(function(t){var e=0,i=true;return n.subscribe(function(o){if(i){try{i=r(o,e++,n)}catch(s){t.onError(s);return}if(i){t.onNext(o)}else{t.onCompleted()}}},function(e){t.onError(e)},function(){t.onCompleted()})},n)};var Tn=function(t){Dt(e,t);function e(e,n,r){this.source=e;this.predicate=G(n,r,3);t.call(this)}e.prototype.subscribeCore=function(t){return this.source.subscribe(new Rn(t,this.predicate,this))};e.prototype.internalFilter=function(t,n){var r=this;return new e(this.source,function(e,n,i){return r.predicate(e,n,i)&&t.call(this,e,n,i)},n)};return e}(_e);function Rn(t,e,n){this.observer=t;this.predicate=e;this.source=n;this.i=0;this.isStopped=false}Rn.prototype.onNext=function(t){if(this.isStopped){return}var e=Ut(this.predicate).call(this,t,this.i++,this.source);if(e===Tt){return this.observer.onError(e.e)}e&&this.observer.onNext(t)};Rn.prototype.onError=function(t){if(!this.isStopped){this.isStopped=true;this.observer.onError(t)}};Rn.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=true;this.observer.onCompleted()}};Rn.prototype.dispose=function(){this.isStopped=true};Rn.prototype.fail=function(t){if(!this.isStopped){this.isStopped=true;this.observer.onError(t);return true}return false};Oe.filter=Oe.where=function(t,e){return this instanceof Tn?this.internalFilter(t,e):new Tn(this,t,e)};function Wn(t,e,n){return new Ur(function(r){var i=false,o=null,s=[];return t.subscribe(function(t){var u,a;try{a=e(t)}catch(c){r.onError(c);return}u=0;if(!i){i=true;o=a}else{try{u=n(a,o)}catch(h){r.onError(h);return}}if(u>0){o=a;s=[]}if(u>=0){s.push(t)}},function(t){r.onError(t)},function(){r.onNext(s);r.onCompleted()})},t)}function Un(t){if(t.length===0){throw new q}return t[0]}Oe.aggregate=function(){var t=false,e,n,r=this;if(arguments.length===2){t=true;n=arguments[0];e=arguments[1]}else{e=arguments[0]}return new Ur(function(i){var o,s,u;return r.subscribe(function(r){!u&&(u=true);try{if(o){s=e(s,r)}else{s=t?e(n,r):r;o=true}}catch(a){return i.onError(a)}},function(t){i.onError(t)},function(){u&&i.onNext(s);!u&&t&&i.onNext(n);!u&&!t&&i.onError(new q);i.onCompleted()})},r)};Oe.reduce=function(t){var e=false,n,r=this;if(arguments.length===2){e=true;n=arguments[1]}return new Ur(function(i){var o,s,u;return r.subscribe(function(r){!u&&(u=true);try{if(o){s=t(s,r)}else{s=e?t(n,r):r;o=true}}catch(a){return i.onError(a)}},function(t){i.onError(t)},function(){u&&i.onNext(s);!u&&e&&i.onNext(n);!u&&!e&&i.onError(new q);i.onCompleted()})},r)};Oe.some=function(t,e){var n=this;return t?n.filter(t,e).some():new Ur(function(t){return n.subscribe(function(){t.onNext(true);t.onCompleted()},function(e){t.onError(e)},function(){t.onNext(false);t.onCompleted()})},n)};Oe.any=function(){return this.some.apply(this,arguments)};Oe.isEmpty=function(){return this.any().map(A)};Oe.every=function(t,e){return this.filter(function(e){return!t(e)},e).some().map(A)};Oe.all=function(){return this.every.apply(this,arguments)};Oe.includes=function(t,e){var n=this;function r(t,e){return t===0&&e===0||(t===e||isNaN(t)&&isNaN(e))}return new Ur(function(i){var o=0,s=+e||0;Math.abs(s)===Infinity&&(s=0);if(s<0){i.onNext(false);i.onCompleted();return zt}return n.subscribe(function(e){if(o++>=s&&r(e,t)){i.onNext(true);i.onCompleted()}},function(t){i.onError(t)},function(){i.onNext(false);i.onCompleted()})},this)};Oe.contains=function(t,e){Oe.includes(t,e)};Oe.count=function(t,e){return t?this.filter(t,e).count():this.reduce(function(t){return t+1},0)};Oe.indexOf=function(t,e){var n=this;return new Ur(function(r){var i=0,o=+e||0;Math.abs(o)===Infinity&&(o=0);if(o<0){r.onNext(-1);r.onCompleted();return zt}return n.subscribe(function(e){if(i>=o&&e===t){r.onNext(i);r.onCompleted()}i++},function(t){r.onError(t)},function(){r.onNext(-1);r.onCompleted()})},n)};Oe.sum=function(t,e){return t&&k(t)?this.map(t,e).sum():this.reduce(function(t,e){return t+e},0)};Oe.minBy=function(t,e){e||(e=w);return Wn(this,t,function(t,n){return e(t,n)*-1})};Oe.min=function(t){return this.minBy(v,t).map(function(t){return Un(t)})};Oe.maxBy=function(t,e){e||(e=w);return Wn(this,t,e)};Oe.max=function(t){return this.maxBy(v,t).map(function(t){return Un(t)})};Oe.average=function(t,e){return t&&k(t)?this.map(t,e).average():this.reduce(function(t,e){return{sum:t.sum+e,count:t.count+1}},{sum:0,count:0}).map(function(t){if(t.count===0){throw new q}return t.sum/t.count})};Oe.sequenceEqual=function(t,e){var n=this;e||(e=m);return new Ur(function(r){var i=false,o=false,s=[],u=[];var a=n.subscribe(function(t){var n,i;if(u.length>0){i=u.shift();try{n=e(i,t)}catch(a){r.onError(a);return}if(!n){r.onNext(false);r.onCompleted()}}else if(o){r.onNext(false);r.onCompleted()}else{s.push(t)}},function(t){r.onError(t)},function(){i=true;if(s.length===0){if(u.length>0){r.onNext(false);r.onCompleted()}else if(o){r.onNext(true);r.onCompleted()}}});(K(t)||Y(t))&&(t=Ke(t));x(t)&&(t=Fe(t));var c=t.subscribe(function(t){var n;if(s.length>0){var o=s.shift();try{n=e(o,t)}catch(a){r.onError(a);return}if(!n){r.onNext(false);r.onCompleted()}}else if(i){r.onNext(false);r.onCompleted()}else{u.push(t)}},function(t){r.onError(t)},function(){o=true;if(u.length===0){if(s.length>0){r.onNext(false);r.onCompleted()}else if(i){r.onNext(true);r.onCompleted()}}});return new It(a,c)},n)};function Mn(t,e,n,r){if(e<0){throw new I}return new Ur(function(i){var o=e;return t.subscribe(function(t){if(o--===0){i.onNext(t);i.onCompleted()}},function(t){i.onError(t)},function(){if(!n){i.onError(new I)}else{i.onNext(r);i.onCompleted()}})},t)}Oe.elementAt=function(t){return Mn(this,t,false)};Oe.elementAtOrDefault=function(t,e){return Mn(this,t,true,e)};function Pn(t,e,n){return new Ur(function(r){var i=n,o=false;return t.subscribe(function(t){if(o){r.onError(new Error("Sequence contains more than one element"))}else{i=t;o=true}},function(t){r.onError(t)},function(){if(!o&&!e){r.onError(new q)}else{r.onNext(i);r.onCompleted()}})},t)}Oe.single=function(t,e){return t&&k(t)?this.where(t,e).single():Pn(this,false)};Oe.singleOrDefault=function(t,e,n){return t&&k(t)?this.filter(t,n).singleOrDefault(null,e):Pn(this,true,e)};function qn(t,e,n){return new Ur(function(r){return t.subscribe(function(t){r.onNext(t);r.onCompleted()},function(t){r.onError(t)},function(){if(!e){r.onError(new q)}else{r.onNext(n);r.onCompleted()}})},t)}Oe.first=function(t,e){return t?this.where(t,e).first():qn(this,false)};Oe.firstOrDefault=function(t,e,n){return t?this.where(t).firstOrDefault(null,e):qn(this,true,e)};function Ln(t,e,n){return new Ur(function(r){var i=n,o=false;return t.subscribe(function(t){i=t;o=true},function(t){r.onError(t)},function(){if(!o&&!e){r.onError(new q)}else{r.onNext(i);r.onCompleted()}})},t)}Oe.last=function(t,e){return t?this.where(t,e).last():Ln(this,false)};Oe.lastOrDefault=function(t,e,n){return t?this.where(t,n).lastOrDefault(null,e):Ln(this,true,e)};function In(t,e,n,r){var o=G(e,n,3);return new Ur(function(e){var n=0;return t.subscribe(function(i){var s;try{s=o(i,n,t)}catch(u){e.onError(u);return}if(s){e.onNext(r?n:i);e.onCompleted()}else{n++}},function(t){e.onError(t)},function(){e.onNext(r?-1:i);e.onCompleted()})},t)}Oe.find=function(t,e){return In(this,t,e,false)};Oe.findIndex=function(t,e){return In(this,t,e,true)};Oe.toSet=function(){if(typeof u.Set==="undefined"){throw new TypeError}var t=this;return new Ur(function(e){var n=new u.Set;return t.subscribe(function(t){n.add(t)},function(t){e.onError(t)},function(){e.onNext(n);e.onCompleted()})},t)};Oe.toMap=function(t,e){if(typeof u.Map==="undefined"){throw new TypeError}var n=this;return new Ur(function(r){var i=new u.Map;return n.subscribe(function(n){var o;try{o=t(n)}catch(s){r.onError(s);return}var u=n;if(e){try{u=e(n)}catch(s){r.onError(s);return}}i.set(o,u)},function(t){r.onError(t)},function(){r.onNext(i);r.onCompleted()})},n)};var Bn="function",Qn="throw",mt=l.internals.isObject;function Jn(t,e){if(Array.isArray(t)){return zn.call(e,t)}if(Kn(t)){return Zn(t.call(e))}if(Gn(t)){return Zn(t)}if(Yn(t)){return Vn(t)}if(x(t)){return Hn(t)}if(typeof t===Bn){return t}if(mt(t)||Array.isArray(t)){return zn.call(e,t)}return t}function zn(t){var e=this;return function(n){var r=Object.keys(t),i=r.length,o=new t.constructor,s;if(!i){fe.schedule(function(){n(null,o)});return}for(var u=0,a=r.length;u<a;u++){c(t[r[u]],r[u])}function c(t,r){if(s){return}try{t=Jn(t,e);if(typeof t!==Bn){o[r]=t;return--i||n(null,o)}t.call(e,function(t,e){if(s){return}if(t){s=true;return n(t)}o[r]=e;--i||n(null,o)})}catch(u){s=true;n(u)}}}}function Vn(t){return function(e){var n,r=false;t.subscribe(function(t){n=t;r=true},e,function(){r&&e(null,n)})}}function Hn(t){return function(e){t.then(function(t){e(null,t)},e)}}function Yn(t){return t&&typeof t.subscribe===Bn}function Kn(t){return t&&t.constructor&&t.constructor.name==="GeneratorFunction"}function Gn(t){return t&&typeof t.next===Bn&&typeof t[Qn]===Bn}var Zn=l.spawn=function(t){var e=Kn(t);return function(n){var r=this,i=t;if(e){for(var o=[],s=0,u=arguments.length;s<u;s++){o.push(arguments[s])}var u=o.length,a=u&&typeof o[u-1]===Bn;n=a?o.pop():$n;i=t.apply(this,o)}else{n=n||$n}h();function c(t,e){fe.schedule(n.bind(r,t,e))}function h(t,e){var n;if(arguments.length>2){for(var e=[],o=1,s=arguments.length;o<s;o++){e.push(arguments[o])}}if(t){try{n=i[Qn](t)}catch(u){return c(u)}}if(!t){try{n=i.next(e)}catch(u){return c(u)}}if(n.done){return c(null,n.value)}n.value=Jn(n.value,r);if(typeof n.value===Bn){var a=false;try{n.value.call(r,function(){if(a){return}a=true;h.apply(r,arguments)})}catch(u){fe.schedule(function(){if(a){return}a=true;h.call(r,u)})}return}h(new TypeError("Rx.spawn only supports a function, Promise, Observable, Object or Array."))}}};function $n(t){if(!t){return}fe.schedule(function(){throw t})}De.start=function(t,e,n){return Xn(t,e,n)()};var Xn=De.toAsync=function(t,e,n){ne(n)||(n=fe);return function(){var r=arguments,i=new Lr;n.schedule(function(){var n;try{n=t.apply(e,r)}catch(o){i.onError(o);return}i.onNext(n);i.onCompleted()});return i.asObservable()}};De.fromCallback=function(t,e,n){return function(){var r=arguments.length,i=new Array(r);for(var o=0;o<r;o++){i[o]=arguments[o]}return new Ur(function(r){function o(){var t=arguments.length,i=new Array(t);for(var o=0;o<t;o++){i[o]=arguments[o]}if(n){try{i=n.apply(e,i)}catch(s){return r.onError(s)}r.onNext(i)}else{if(i.length<=1){r.onNext.apply(r,i)}else{r.onNext(i)}}r.onCompleted()}i.push(o);t.apply(e,i)}).publishLast().refCount()}};De.fromNodeCallback=function(t,e,n){return function(){var r=arguments.length,i=new Array(r);for(var o=0;o<r;o++){i[o]=arguments[o]}return new Ur(function(r){function o(t){if(t){r.onError(t);return}var i=arguments.length,o=[];for(var s=1;s<i;s++){o[s-1]=arguments[s]}if(n){try{o=n.apply(e,o)}catch(u){return r.onError(u)}r.onNext(o)}else{if(o.length<=1){r.onNext.apply(r,o)}else{r.onNext(o)}}r.onCompleted()}i.push(o);t.apply(e,i)}).publishLast().refCount()}};function tr(t,e,n){if(t.addEventListener){t.addEventListener(e,n,false);return Jt(function(){t.removeEventListener(e,n,false)})}throw new Error("No listener found")}function er(t,e,n){var r=new It;if(Object.prototype.toString.call(t)==="[object NodeList]"){for(var i=0,o=t.length;i<o;i++){r.add(er(t.item(i),e,n))}}else if(t){r.add(tr(t,e,n))}return r}l.config.useNativeEvents=false;De.fromEvent=function(t,e,n){if(t.addListener){return nr(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n)}if(!l.config.useNativeEvents){if(typeof t.on==="function"&&typeof t.off==="function"){return nr(function(n){t.on(e,n)},function(n){t.off(e,n)},n)}}return new Ur(function(r){return er(t,e,function i(t){var e=t;if(n){try{e=n(arguments)}catch(i){return r.onError(i)}}r.onNext(e)})}).publish().refCount()};var nr=De.fromEventPattern=function(t,e,n){return new Ur(function(r){function i(t){var e=t;if(n){try{e=n(arguments)}catch(i){return r.onError(i)}}r.onNext(e)}var o=t(i);return Jt(function(){if(e){e(i,o)}})}).publish().refCount()};De.startAsync=function(t){var e;try{e=t()}catch(n){return ln(n)}return Fe(e)};var rr=function(t){Dt(n,t);function e(t){var e=this.source.publish(),n=e.subscribe(t),r=zt;var i=this.pauser.distinctUntilChanged().subscribe(function(t){if(t){r=e.connect()}else{r.dispose();r=zt}});return new It(n,r,i)}function n(n,r){this.source=n;this.controller=new qr;if(r&&r.subscribe){this.pauser=this.controller.merge(r)}else{this.pauser=this.controller}t.call(this,e,n)}n.prototype.pause=function(){this.controller.onNext(false)};n.prototype.resume=function(){this.controller.onNext(true)};return n}(De);Oe.pausable=function(t){return new rr(this,t)};function ir(t,e,n){return new Ur(function(r){var i=[false,false],o=false,s=false,u=new Array(2),a;function c(t,e){u[e]=t;var c;i[e]=true;if(o||(o=i.every(v))){if(a){r.onError(a);return}try{c=n.apply(null,u)}catch(h){r.onError(h);return}r.onNext(c)}if(s&&u[1]){r.onCompleted()}}return new It(t.subscribe(function(t){c(t,0)},function(t){if(u[1]){r.onError(t)}else{a=t}},function(){s=true;u[1]&&r.onCompleted()}),e.subscribe(function(t){c(t,1)},function(t){r.onError(t)},function(){s=true;c(true,1)}))},t)}var or=function(t){Dt(n,t);function e(t){var e=[],n;var r=ir(this.source,this.pauser.distinctUntilChanged().startWith(false),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(r){if(n!==i&&r.shouldFire!=n){n=r.shouldFire;if(r.shouldFire){while(e.length>0){t.onNext(e.shift())}}}else{n=r.shouldFire;if(r.shouldFire){t.onNext(r.data)}else{e.push(r.data)}}},function(n){while(e.length>0){t.onNext(e.shift())}t.onError(n)},function(){while(e.length>0){t.onNext(e.shift())}t.onCompleted()});return r}function n(n,r){this.source=n;this.controller=new qr;if(r&&r.subscribe){this.pauser=this.controller.merge(r)}else{this.pauser=this.controller}t.call(this,e,n)}n.prototype.pause=function(){this.controller.onNext(false)};n.prototype.resume=function(){this.controller.onNext(true)};return n}(De);Oe.pausableBuffered=function(t){return new or(this,t)};var sr=function(t){Dt(n,t);function e(t){return this.source.subscribe(t)}function n(n,r,i){t.call(this,e,n);this.subject=new ur(r,i);this.source=n.multicast(this.subject).refCount()}n.prototype.request=function(t){return this.subject.request(t==null?-1:t)};return n}(De);var ur=function(t){function e(t){return this.subject.subscribe(t)}Dt(n,t);function n(n,r){n==null&&(n=true);t.call(this,e);this.subject=new qr;this.enableQueue=n;this.queue=n?[]:null;this.requestedCount=0;this.requestedDisposable=zt;this.error=null;this.hasFailed=false;this.hasCompleted=false;this.scheduler=r||oe}_t(n.prototype,Ee,{onCompleted:function(){this.hasCompleted=true;if(!this.enableQueue||this.queue.length===0){this.subject.onCompleted()}else{this.queue.push(pe.createOnCompleted())}},onError:function(t){this.hasFailed=true;this.error=t;if(!this.enableQueue||this.queue.length===0){this.subject.onError(t)}else{this.queue.push(pe.createOnError(t))}},onNext:function(t){var e=false;if(this.requestedCount===0){this.enableQueue&&this.queue.push(pe.createOnNext(t))}else{this.requestedCount!==-1&&this.requestedCount--===0&&this.disposeCurrentRequest();e=true}e&&this.subject.onNext(t)},_processRequest:function(t){if(this.enableQueue){while(this.queue.length>=t&&t>0||this.queue.length>0&&this.queue[0].kind!=="N"){var e=this.queue.shift();e.accept(this.subject);if(e.kind==="N"){t--}else{this.disposeCurrentRequest();this.queue=[]}}return{numberOfItems:t,returnValue:this.queue.length!==0}}return{numberOfItems:t,returnValue:false}},request:function(t){this.disposeCurrentRequest();var e=this;this.requestedDisposable=this.scheduler.scheduleWithState(t,function(t,n){var r=e._processRequest(n),i=r.numberOfItems;if(!r.returnValue){e.requestedCount=i;e.requestedDisposable=Jt(function(){e.requestedCount=0})}});return this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable.dispose();this.requestedDisposable=zt}});return n}(De);Oe.controlled=function(t,e){if(t&&ne(t)){e=t;t=true}if(t==null){t=true}return new sr(this,t,e)};var ar=function(t){function e(t){this.subscription=this.source.subscribe(new r(t,this,this.subscription));var e=this;fe.schedule(function(){e.source.request(1)});return this.subscription}Dt(n,t);function n(n){t.call(this,e,n);this.source=n}var r=function(t){Dt(e,t);function e(e,n,r){t.call(this);this.observer=e;this.observable=n;this.cancel=r}var n=e.prototype;n.completed=function(){this.observer.onCompleted();this.dispose()};n.error=function(t){this.observer.onError(t);this.dispose()};n.next=function(t){this.observer.onNext(t);var e=this;fe.schedule(function(){e.observable.source.request(1)})};n.dispose=function(){this.observer=null;if(this.cancel){this.cancel.dispose();this.cancel=null}t.prototype.dispose.call(this)};return e}(xe);return n}(De);sr.prototype.stopAndWait=function(){return new ar(this)};var cr=function(t){function e(t){this.subscription=this.source.subscribe(new r(t,this,this.subscription));var e=this;fe.schedule(function(){e.source.request(e.windowSize)});return this.subscription}Dt(n,t);function n(n,r){t.call(this,e,n);this.source=n;this.windowSize=r}var r=function(t){Dt(e,t);function e(t,e,n){this.observer=t;this.observable=e;this.cancel=n;this.received=0}var n=e.prototype;n.completed=function(){this.observer.onCompleted();this.dispose()};n.error=function(t){this.observer.onError(t);this.dispose()};n.next=function(t){this.observer.onNext(t);this.received=++this.received%this.observable.windowSize;if(this.received===0){var e=this;fe.schedule(function(){e.observable.source.request(e.observable.windowSize)})}};n.dispose=function(){this.observer=null;if(this.cancel){this.cancel.dispose();this.cancel=null}t.prototype.dispose.call(this)};return e}(xe);return n}(De);sr.prototype.windowed=function(t){return new cr(this,t)};Oe.pipe=function(t){var e=this.pausableBuffered();function n(){e.resume()}t.addListener("drain",n);e.subscribe(function(n){!t.write(String(n))&&e.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end();t.removeListener("drain",n)});e.resume();return t};Oe.multicast=function(t,e){var n=this;return typeof t==="function"?new Ur(function(r){var i=n.multicast(t());return new It(e(i).subscribe(r),i.connect())},n):new pr(n,t)};Oe.publish=function(t){return t&&k(t)?this.multicast(function(){return new qr},t):this.multicast(new qr)};Oe.share=function(){return this.publish().refCount()};Oe.publishLast=function(t){return t&&k(t)?this.multicast(function(){return new Lr},t):this.multicast(new Lr)};Oe.publishValue=function(t,e){return arguments.length===2?this.multicast(function(){return new fr(e)},t):this.multicast(new fr(t))};Oe.shareValue=function(t){return this.publishValue(t).refCount()};Oe.replay=function(t,e,n,r){return t&&k(t)?this.multicast(function(){return new lr(e,n,r)},t):this.multicast(new lr(e,n,r))};Oe.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var hr=function(t,e){this.subject=t;this.observer=e};hr.prototype.dispose=function(){if(!this.subject.isDisposed&&this.observer!==null){var t=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(t,1);this.observer=null}};var fr=l.BehaviorSubject=function(t){function e(t){Ht(this);if(!this.isStopped){this.observers.push(t);t.onNext(this.value);return new hr(this,t)}if(this.hasError){t.onError(this.error)}else{t.onCompleted()}return zt}Dt(n,t);function n(n){t.call(this,e);this.value=n,this.observers=[],this.isDisposed=false,this.isStopped=false,this.hasError=false}_t(n.prototype,Ee,{getValue:function(){Ht(this);if(this.hasError){throw this.error}return this.value},hasObservers:function(){return this.observers.length>0},onCompleted:function(){Ht(this);if(this.isStopped){return}this.isStopped=true;for(var t=0,e=N(this.observers),n=e.length;t<n;t++){e[t].onCompleted()}this.observers.length=0},onError:function(t){Ht(this);if(this.isStopped){return}this.isStopped=true;this.hasError=true;this.error=t;for(var e=0,n=N(this.observers),r=n.length;e<r;e++){n[e].onError(t)}this.observers.length=0},onNext:function(t){Ht(this);if(this.isStopped){return}this.value=t;for(var e=0,n=N(this.observers),r=n.length;e<r;e++){n[e].onNext(t)}},dispose:function(){this.isDisposed=true;this.observers=null;this.value=null;this.exception=null}});return n}(De);var lr=l.ReplaySubject=function(t){var e=Math.pow(2,53)-1;function n(t,e){return Jt(function(){e.dispose();!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function r(t){var e=new ke(this.scheduler,t),r=n(this,e);Ht(this);this._trim(this.scheduler.now());this.observers.push(e);for(var i=0,o=this.q.length;i<o;i++){e.onNext(this.q[i].value)}if(this.hasError){e.onError(this.error)}else if(this.isStopped){e.onCompleted()}e.ensureActive();return r}Dt(i,t);function i(n,i,o){this.bufferSize=n==null?e:n;this.windowSize=i==null?e:i;this.scheduler=o||oe;this.q=[];this.observers=[];this.isStopped=false;this.isDisposed=false;this.hasError=false;this.error=null;t.call(this,r)}_t(i.prototype,Ee.prototype,{hasObservers:function(){return this.observers.length>0},_trim:function(t){while(this.q.length>this.bufferSize){this.q.shift()}while(this.q.length>0&&t-this.q[0].interval>this.windowSize){this.q.shift()}},onNext:function(t){Ht(this);if(this.isStopped){return}var e=this.scheduler.now();this.q.push({interval:e,value:t});this._trim(e);for(var n=0,r=N(this.observers),i=r.length;n<i;n++){var o=r[n];o.onNext(t);o.ensureActive()}},onError:function(t){Ht(this);if(this.isStopped){return}this.isStopped=true;this.error=t;this.hasError=true;var e=this.scheduler.now();this._trim(e);for(var n=0,r=N(this.observers),i=r.length;n<i;n++){var o=r[n];o.onError(t);o.ensureActive()}this.observers.length=0},onCompleted:function(){Ht(this);if(this.isStopped){return}this.isStopped=true;var t=this.scheduler.now();this._trim(t);for(var e=0,n=N(this.observers),r=n.length;e<r;e++){var i=n[e];i.onCompleted();i.ensureActive()}this.observers.length=0},dispose:function(){this.isDisposed=true;this.observers=null}});return i}(De);var pr=l.ConnectableObservable=function(t){Dt(e,t);function e(e,n){var r=false,i,o=e.asObservable();this.connect=function(){if(!r){r=true;i=new It(o.subscribe(n),Jt(function(){r=false}))}return i};t.call(this,function(t){return n.subscribe(t)})}e.prototype.refCount=function(){var t,e=0,n=this;return new Ur(function(r){var i=++e===1,o=n.subscribe(r);i&&(t=n.connect());return function(){o.dispose();--e===0&&t.dispose()}})};return e}(De);var dr=function(){var t=[1,3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143,4194301,8388593,16777213,33554393,67108859,134217689,268435399,536870909,1073741789,2147483647],e="no such key",n="duplicate key";function r(t){if((t&1)===0){return t===2}var e=Math.sqrt(t),n=3;while(n<=e){
if(t%n===0){return false}n+=2}return true}function o(e){var n,i,o;for(n=0;n<t.length;++n){i=t[n];if(i>=e){return i}}o=e|1;while(o<t[t.length-1]){if(r(o)){return o}o+=2}return e}function s(t){var e=757602046;if(!t.length){return e}for(var n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);e=(e<<5)-e+i;e=e&e}return e}function u(t){var e=668265261;t=t^61^t>>>16;t=t+(t<<3);t=t^t>>>4;t=t*e;t=t^t>>>15;return t}var a=function(){var t=0;return function(n){if(n==null){throw new Error(e)}if(typeof n==="string"){return s(n)}if(typeof n==="number"){return u(n)}if(typeof n==="boolean"){return n===true?1:0}if(n instanceof Date){return u(n.valueOf())}if(n instanceof RegExp){return s(n.toString())}if(typeof n.valueOf==="function"){var r=n.valueOf();if(typeof r==="number"){return u(r)}if(typeof r==="string"){return s(r)}}if(n.hashCode){return n.hashCode()}var i=17*t++;n.hashCode=function(){return i};return i}}();function c(){return{key:null,value:null,next:0,hashCode:0}}function h(t,e){if(t<0){throw new I}if(t>0){this._initialize(t)}this.comparer=e||m;this.freeCount=0;this.size=0;this.freeList=-1}var f=h.prototype;f._initialize=function(t){var e=o(t),n;this.buckets=new Array(e);this.entries=new Array(e);for(n=0;n<e;n++){this.buckets[n]=-1;this.entries[n]=c()}this.freeList=-1};f.add=function(t,e){this._insert(t,e,true)};f._insert=function(t,e,r){if(!this.buckets){this._initialize(0)}var i,o=a(t)&2147483647,s=o%this.buckets.length;for(var u=this.buckets[s];u>=0;u=this.entries[u].next){if(this.entries[u].hashCode===o&&this.comparer(this.entries[u].key,t)){if(r){throw new Error(n)}this.entries[u].value=e;return}}if(this.freeCount>0){i=this.freeList;this.freeList=this.entries[i].next;--this.freeCount}else{if(this.size===this.entries.length){this._resize();s=o%this.buckets.length}i=this.size;++this.size}this.entries[i].hashCode=o;this.entries[i].next=this.buckets[s];this.entries[i].key=t;this.entries[i].value=e;this.buckets[s]=i};f._resize=function(){var t=o(this.size*2),e=new Array(t);for(r=0;r<e.length;++r){e[r]=-1}var n=new Array(t);for(r=0;r<this.size;++r){n[r]=this.entries[r]}for(var r=this.size;r<t;++r){n[r]=c()}for(var i=0;i<this.size;++i){var s=n[i].hashCode%t;n[i].next=e[s];e[s]=i}this.buckets=e;this.entries=n};f.remove=function(t){if(this.buckets){var e=a(t)&2147483647,n=e%this.buckets.length,r=-1;for(var i=this.buckets[n];i>=0;i=this.entries[i].next){if(this.entries[i].hashCode===e&&this.comparer(this.entries[i].key,t)){if(r<0){this.buckets[n]=this.entries[i].next}else{this.entries[r].next=this.entries[i].next}this.entries[i].hashCode=-1;this.entries[i].next=this.freeList;this.entries[i].key=null;this.entries[i].value=null;this.freeList=i;++this.freeCount;return true}else{r=i}}}return false};f.clear=function(){var t,e;if(this.size<=0){return}for(t=0,e=this.buckets.length;t<e;++t){this.buckets[t]=-1}for(t=0;t<this.size;++t){this.entries[t]=c()}this.freeList=-1;this.size=0};f._findEntry=function(t){if(this.buckets){var e=a(t)&2147483647;for(var n=this.buckets[e%this.buckets.length];n>=0;n=this.entries[n].next){if(this.entries[n].hashCode===e&&this.comparer(this.entries[n].key,t)){return n}}}return-1};f.count=function(){return this.size-this.freeCount};f.tryGetValue=function(t){var e=this._findEntry(t);return e>=0?this.entries[e].value:i};f.getValues=function(){var t=0,e=[];if(this.entries){for(var n=0;n<this.size;n++){if(this.entries[n].hashCode>=0){e[t++]=this.entries[n].value}}}return e};f.get=function(t){var n=this._findEntry(t);if(n>=0){return this.entries[n].value}throw new Error(e)};f.set=function(t,e){this._insert(t,e,false)};f.containskey=function(t){return this._findEntry(t)>=0};return h}();Oe.join=function(t,e,n,r){var i=this;return new Ur(function(o){var s=new It;var u=false,a=false;var c=0,h=0;var f=new dr,l=new dr;s.add(i.subscribe(function(t){var n=c++;var i=new Yt;f.add(n,t);s.add(i);var a=function(){f.remove(n)&&f.count()===0&&u&&o.onCompleted();s.remove(i)};var h;try{h=e(t)}catch(d){o.onError(d);return}i.setDisposable(h.take(1).subscribe(p,o.onError.bind(o),a));l.getValues().forEach(function(e){var n;try{n=r(t,e)}catch(i){o.onError(i);return}o.onNext(n)})},o.onError.bind(o),function(){u=true;(a||f.count()===0)&&o.onCompleted()}));s.add(t.subscribe(function(t){var e=h++;var i=new Yt;l.add(e,t);s.add(i);var u=function(){l.remove(e)&&l.count()===0&&a&&o.onCompleted();s.remove(i)};var c;try{c=n(t)}catch(d){o.onError(d);return}i.setDisposable(c.take(1).subscribe(p,o.onError.bind(o),u));f.getValues().forEach(function(e){var n;try{n=r(e,t)}catch(i){o.onError(i);return}o.onNext(n)})},o.onError.bind(o),function(){a=true;(u||l.count()===0)&&o.onCompleted()}));return s},i)};Oe.groupJoin=function(t,e,n,r){var i=this;return new Ur(function(o){var s=new It;var u=new Gt(s);var a=new dr,c=new dr;var h=0,f=0;function l(t){return function(e){e.onError(t)}}s.add(i.subscribe(function(t){var n=new qr;var i=h++;a.add(i,n);var f;try{f=r(t,Ft(n,u))}catch(d){a.getValues().forEach(l(d));o.onError(d);return}o.onNext(f);c.getValues().forEach(function(t){n.onNext(t)});var v=new Yt;s.add(v);var b=function(){a.remove(i)&&n.onCompleted();s.remove(v)};var g;try{g=e(t)}catch(d){a.getValues().forEach(l(d));o.onError(d);return}v.setDisposable(g.take(1).subscribe(p,function(t){a.getValues().forEach(l(t));o.onError(t)},b))},function(t){a.getValues().forEach(l(t));o.onError(t)},o.onCompleted.bind(o)));s.add(t.subscribe(function(t){var e=f++;c.add(e,t);var r=new Yt;s.add(r);var i=function(){c.remove(e);s.remove(r)};var u;try{u=n(t)}catch(h){a.getValues().forEach(l(h));o.onError(h);return}r.setDisposable(u.take(1).subscribe(p,function(t){a.getValues().forEach(l(t));o.onError(t)},i));a.getValues().forEach(function(e){e.onNext(t)})},function(t){a.getValues().forEach(l(t));o.onError(t)}));return u},i)};Oe.buffer=function(t,e){return this.window.apply(this,arguments).selectMany(function(t){return t.toArray()})};Oe.window=function(t,e){if(arguments.length===1&&typeof arguments[0]!=="function"){return br.call(this,t)}return typeof t==="function"?gr.call(this,t):vr.call(this,t,e)};function vr(t,e){return t.groupJoin(this,e,Ue,function(t,e){return e})}function br(t){var e=this;return new Ur(function(n){var r=new qr,i=new It,o=new Gt(i);n.onNext(Ft(r,o));i.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t);n.onError(t)},function(){r.onCompleted();n.onCompleted()}));x(t)&&(t=Fe(t));i.add(t.subscribe(function(t){r.onCompleted();r=new qr;n.onNext(Ft(r,o))},function(t){r.onError(t);n.onError(t)},function(){r.onCompleted();n.onCompleted()}));return o},e)}function gr(t){var e=this;return new Ur(function(n){var r=new Kt,i=new It(r),o=new Gt(i),s=new qr;n.onNext(Ft(s,o));i.add(e.subscribe(function(t){s.onNext(t)},function(t){s.onError(t);n.onError(t)},function(){s.onCompleted();n.onCompleted()}));function u(){var e;try{e=t()}catch(i){n.onError(i);return}x(e)&&(e=Fe(e));var a=new Yt;r.setDisposable(a);a.setDisposable(e.take(1).subscribe(p,function(t){s.onError(t);n.onError(t)},function(){s.onCompleted();s=new qr;n.onNext(Ft(s,o));u()}))}u();return o},e)}Oe.pairwise=function(){var t=this;return new Ur(function(e){var n,r=false;return t.subscribe(function(t){if(r){e.onNext([n,t])}else{r=true}n=t},e.onError.bind(e),e.onCompleted.bind(e))},t)};Oe.partition=function(t,e){return[this.filter(t,e),this.filter(function(n,r,i){return!t.call(e,n,r,i)})]};function yr(t,e){return new ye(function(){return new ge(function(){return t()?{done:false,value:e}:{done:true,value:i}})})}Oe.letBind=Oe["let"]=function(t){return t(this)};De["if"]=De.ifThen=function(t,e,n){return Re(function(){n||(n=Ue());x(e)&&(e=Fe(e));x(n)&&(n=Fe(n));typeof n.now==="function"&&(n=Ue(n));return t()?e:n})};De["for"]=De.forIn=function(t,e,n){return we(t,e,n).concat()};var mr=De["while"]=De.whileDo=function(t,e){x(e)&&(e=Fe(e));return yr(t,e).concat()};Oe.doWhile=function(t){return bn([this,mr(t,this)])};De["case"]=De.switchCase=function(t,e,n){return Re(function(){x(n)&&(n=Fe(n));n||(n=Ue());typeof n.now==="function"&&(n=Ue(n));var r=e[t()];x(r)&&(r=Fe(r));return r||n})};Oe.expand=function(t,e){ne(e)||(e=ie);var n=this;return new Ur(function(r){var i=[],o=new Kt,s=new It(o),u=0,a=false;var c=function(){var n=false;if(i.length>0){n=!a;a=true}if(n){o.setDisposable(e.scheduleRecursive(function(e){var n;if(i.length>0){n=i.shift()}else{a=false;return}var o=new Yt;s.add(o);o.setDisposable(n.subscribe(function(e){r.onNext(e);var n=null;try{n=t(e)}catch(o){r.onError(o)}i.push(n);u++;c()},r.onError.bind(r),function(){s.remove(o);u--;if(u===0){r.onCompleted()}}));e()}))}};i.push(n);u++;c();return s},this)};De.forkJoin=function(){var t=[];if(Array.isArray(arguments[0])){t=arguments[0]}else{for(var e=0,n=arguments.length;e<n;e++){t.push(arguments[e])}}return new Ur(function(e){var n=t.length;if(n===0){e.onCompleted();return zt}var r=new It,i=false,o=new Array(n),s=new Array(n),u=new Array(n);for(var a=0;a<n;a++){(function(a){var c=t[a];x(c)&&(c=Fe(c));r.add(c.subscribe(function(t){if(!i){o[a]=true;u[a]=t}},function(t){i=true;e.onError(t);r.dispose()},function(){if(!i){if(!o[a]){e.onCompleted();return}s[a]=true;for(var t=0;t<n;t++){if(!s[t]){return}}i=true;e.onNext(u);e.onCompleted()}}))})(a)}return r})};Oe.forkJoin=function(t,e){var n=this;return new Ur(function(r){var i=false,o=false,s=false,u=false,a,c,h=new Yt,f=new Yt;x(t)&&(t=Fe(t));h.setDisposable(n.subscribe(function(t){s=true;a=t},function(t){f.dispose();r.onError(t)},function(){i=true;if(o){if(!s){r.onCompleted()}else if(!u){r.onCompleted()}else{var t;try{t=e(a,c)}catch(n){r.onError(n);return}r.onNext(t);r.onCompleted()}}}));f.setDisposable(t.subscribe(function(t){u=true;c=t},function(t){h.dispose();r.onError(t)},function(){o=true;if(i){if(!s){r.onCompleted()}else if(!u){r.onCompleted()}else{var t;try{t=e(a,c)}catch(n){r.onError(n);return}r.onNext(t);r.onCompleted()}}}));return new It(h,f)},n)};Oe.manySelect=function(t,e){ne(e)||(e=ie);var n=this;return Re(function(){var r;return n.map(function(t){var e=new wr(t);r&&r.onNext(t);r=e;return e}).tap(p,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var wr=function(t){function e(t){var e=this,n=new It;n.add(oe.schedule(function(){t.onNext(e.head);n.add(e.tail.mergeAll().subscribe(t))}));return n}Dt(n,t);function n(n){t.call(this,e);this.head=n;this.tail=new Lr}_t(n.prototype,Ee,{onCompleted:function(){this.onNext(De.empty())},onError:function(t){this.onNext(De.throwError(t))},onNext:function(t){this.tail.onNext(t);this.tail.onCompleted()}});return n}(De);var Er=u.Map||function(){function t(){this._keys=[];this._values=[]}t.prototype.get=function(t){var e=this._keys.indexOf(t);return e!==-1?this._values[e]:i};t.prototype.set=function(t,e){var n=this._keys.indexOf(t);n!==-1&&(this._values[n]=e);this._values[this._keys.push(t)-1]=e};t.prototype.forEach=function(t,e){for(var n=0,r=this._keys.length;n<r;n++){t.call(e,this._values[n],this._keys[n])}};return t}();function Sr(t){this.patterns=t}Sr.prototype.and=function(t){return new Sr(this.patterns.concat(t))};Sr.prototype.thenDo=function(t){return new xr(this,t)};function xr(t,e){this.expression=t;this.selector=e}xr.prototype.activate=function(t,e,n){var r=this;var i=[];for(var o=0,s=this.expression.patterns.length;o<s;o++){i.push(Cr(t,this.expression.patterns[o],e.onError.bind(e)))}var u=new Ar(i,function(){var t;try{t=r.selector.apply(r,arguments)}catch(n){e.onError(n);return}e.onNext(t)},function(){for(var t=0,e=i.length;t<e;t++){i[t].removeActivePlan(u)}n(u)});for(o=0,s=i.length;o<s;o++){i[o].addActivePlan(u)}return u};function Cr(t,e,n){var r=t.get(e);if(!r){var i=new kr(e,n);t.set(e,i);return i}return r}function Ar(t,e,n){this.joinObserverArray=t;this.onNext=e;this.onCompleted=n;this.joinObservers=new Er;for(var r=0,i=this.joinObserverArray.length;r<i;r++){var o=this.joinObserverArray[r];this.joinObservers.set(o,o)}}Ar.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})};Ar.prototype.match=function(){var t,e,n=true;for(t=0,e=this.joinObserverArray.length;t<e;t++){if(this.joinObserverArray[t].queue.length===0){n=false;break}}if(n){var r=[],i=false;for(t=0,e=this.joinObserverArray.length;t<e;t++){r.push(this.joinObserverArray[t].queue[0]);this.joinObserverArray[t].queue[0].kind==="C"&&(i=true)}if(i){this.onCompleted()}else{this.dequeue();var o=[];for(t=0,e=r.length;t<r.length;t++){o.push(r[t].value)}this.onNext.apply(this,o)}}};var kr=function(t){Dt(e,t);function e(e,n){t.call(this);this.source=e;this.onError=n;this.queue=[];this.activePlans=[];this.subscription=new Yt;this.isDisposed=false}var n=e.prototype;n.next=function(t){if(!this.isDisposed){if(t.kind==="E"){return this.onError(t.exception)}this.queue.push(t);var e=this.activePlans.slice(0);for(var n=0,r=e.length;n<r;n++){e[n].match()}}};n.error=p;n.completed=p;n.addActivePlan=function(t){this.activePlans.push(t)};n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))};n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1);this.activePlans.length===0&&this.dispose()};n.dispose=function(){t.prototype.dispose.call(this);if(!this.isDisposed){this.isDisposed=true;this.subscription.dispose()}};return e}(xe);Oe.and=function(t){return new Sr([this,t])};Oe.thenDo=function(t){return new Sr([this]).thenDo(t)};De.when=function(){var t=arguments.length,e;if(Array.isArray(arguments[0])){e=arguments[0]}else{e=new Array(t);for(var n=0;n<t;n++){e[n]=arguments[n]}}return new Ur(function(t){var n=[],r=new Er;var i=Se(function(e){t.onNext(e)},function(e){r.forEach(function(t){t.onError(e)});t.onError(e)},function(e){t.onCompleted()});try{for(var o=0,s=e.length;o<s;o++){n.push(e[o].activate(r,i,function(e){var r=n.indexOf(e);n.splice(r,1);n.length===0&&t.onCompleted()}))}}catch(u){ln(u).subscribe(t)}var a=new It;r.forEach(function(t){t.subscribe();a.add(t)});return a})};function Nr(t,e){return new Ur(function(n){return e.scheduleWithAbsolute(t,function(){n.onNext(0);n.onCompleted()})})}function Or(t,e,n){return new Ur(function(r){var i=t,o=ee(e);return n.scheduleRecursiveWithAbsoluteAndState(0,i,function(t,e){if(o>0){var s=n.now();i=i+o;i<=s&&(i=s+o)}r.onNext(t);e(t+1,i)})})}function Dr(t,e){return new Ur(function(n){return e.scheduleWithRelative(ee(t),function(){n.onNext(0);n.onCompleted()})})}function _r(t,e,n){return t===e?new Ur(function(t){return n.schedulePeriodicWithState(0,e,function(e){t.onNext(e);return e+1})}):Re(function(){return Or(n.now()+t,e,n)})}var Fr=De.interval=function(t,e){return _r(t,t,ne(e)?e:fe)};var jr=De.timer=function(t,e,n){var r;ne(n)||(n=fe);if(e!==i&&typeof e==="number"){r=e}else if(ne(e)){n=e}if(t instanceof Date&&r===i){return Nr(t.getTime(),n)}if(t instanceof Date&&r!==i){r=e;return Or(t.getTime(),r,n)}return r===i?Dr(t,n):_r(t,r,n)};function Tr(t,e,n){return new Ur(function(r){var i=false,o=new Kt,s=null,u=[],a=false,c;c=t.materialize().timestamp(n).subscribe(function(t){var c,h;if(t.value.kind==="E"){u=[];u.push(t);s=t.value.exception;h=!a}else{u.push({value:t.value,timestamp:t.timestamp+e});h=!i;i=true}if(h){if(s!==null){r.onError(s)}else{c=new Yt;o.setDisposable(c);c.setDisposable(n.scheduleRecursiveWithRelative(e,function(t){var e,o,c,h;if(s!==null){return}a=true;do{c=null;if(u.length>0&&u[0].timestamp-n.now()<=0){c=u.shift().value}if(c!==null){c.accept(r)}}while(c!==null);h=false;o=0;if(u.length>0){h=true;o=Math.max(0,u[0].timestamp-n.now())}else{i=false}e=s;a=false;if(e!==null){r.onError(e)}else if(h){t(o)}}))}}});return new It(c,o)},t)}function Rr(t,e,n){return Re(function(){return Tr(t,e-n.now(),n)})}Oe.delay=function(t,e){ne(e)||(e=fe);return t instanceof Date?Rr(this,t.getTime(),e):Tr(this,t,e)};Oe.debounce=Oe.throttleWithTimeout=function(t,e){ne(e)||(e=fe);var n=this;return new Ur(function(r){var i=new Kt,o=false,s,u=0;var a=n.subscribe(function(n){o=true;s=n;u++;var a=u,c=new Yt;i.setDisposable(c);c.setDisposable(e.scheduleWithRelative(t,function(){o&&u===a&&r.onNext(s);o=false}))},function(t){i.dispose();r.onError(t);o=false;u++},function(){i.dispose();o&&r.onNext(s);r.onCompleted();o=false;u++});return new It(a,i)},this)};Oe.throttle=function(t,e){return this.debounce(t,e)};Oe.windowWithTime=function(t,e,n){var r=this,i;e==null&&(i=t);ne(n)||(n=fe);if(typeof e==="number"){i=e}else if(ne(e)){i=t;n=e}return new Ur(function(e){var o,s=i,u=t,a=[],c,h=new Kt,f=0;o=new It(h),c=new Gt(o);function l(){var t=new Yt,r=false,o=false;h.setDisposable(t);if(u===s){r=true;o=true}else if(u<s){r=true}else{o=true}var p=r?u:s,d=p-f;f=p;if(r){u+=i}if(o){s+=i}t.setDisposable(n.scheduleWithRelative(d,function(){if(o){var t=new qr;a.push(t);e.onNext(Ft(t,c))}r&&a.shift().onCompleted();l()}))}a.push(new qr);e.onNext(Ft(a[0],c));l();o.add(r.subscribe(function(t){for(var e=0,n=a.length;e<n;e++){a[e].onNext(t)}},function(t){for(var n=0,r=a.length;n<r;n++){a[n].onError(t)}e.onError(t)},function(){for(var t=0,n=a.length;t<n;t++){a[t].onCompleted()}e.onCompleted()}));return c},r)};Oe.windowWithTimeOrCount=function(t,e,n){var r=this;ne(n)||(n=fe);return new Ur(function(i){var o=new Kt,s=new It(o),u=new Gt(s),a=0,c=0,h=new qr;function f(e){var r=new Yt;o.setDisposable(r);r.setDisposable(n.scheduleWithRelative(t,function(){if(e!==c){return}a=0;var t=++c;h.onCompleted();h=new qr;i.onNext(Ft(h,u));f(t)}))}i.onNext(Ft(h,u));f(0);s.add(r.subscribe(function(t){var n=0,r=false;h.onNext(t);if(++a===e){r=true;a=0;n=++c;h.onCompleted();h=new qr;i.onNext(Ft(h,u))}r&&f(n)},function(t){h.onError(t);i.onError(t)},function(){h.onCompleted();i.onCompleted()}));return u},r)};Oe.bufferWithTime=function(t,e,n){return this.windowWithTime.apply(this,arguments).selectMany(function(t){return t.toArray()})};Oe.bufferWithTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).selectMany(function(t){return t.toArray()})};Oe.timeInterval=function(t){var e=this;ne(t)||(t=fe);return Re(function(){var n=t.now();return e.map(function(e){var r=t.now(),i=r-n;n=r;return{value:e,interval:i}})})};Oe.timestamp=function(t){ne(t)||(t=fe);return this.map(function(e){return{value:e,timestamp:t.now()}})};function Wr(t,e){return new Ur(function(n){var r,i,o;function s(){if(o){o=false;n.onNext(i)}r&&n.onCompleted()}return new It(t.subscribe(function(t){o=true;i=t},n.onError.bind(n),function(){r=true}),e.subscribe(s,n.onError.bind(n),s))},t)}Oe.sample=Oe.throttleLatest=function(t,e){ne(e)||(e=fe);return typeof t==="number"?Wr(this,Fr(t,e)):Wr(this,t)};Oe.timeout=function(t,e,n){(e==null||typeof e==="string")&&(e=ln(new Error(e||"Timeout")));ne(n)||(n=fe);var r=this,i=t instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new Ur(function(o){var s=0,u=new Yt,a=new Kt,c=false,h=new Kt;a.setDisposable(u);function f(){var r=s;h.setDisposable(n[i](t,function(){if(s===r){x(e)&&(e=Fe(e));a.setDisposable(e.subscribe(o))}}))}f();u.setDisposable(r.subscribe(function(t){if(!c){s++;o.onNext(t);f()}},function(t){if(!c){s++;o.onError(t)}},function(){if(!c){s++;o.onCompleted()}}));return new It(a,h)},r)};De.generateWithAbsoluteTime=function(t,e,n,r,i,o){ne(o)||(o=fe);return new Ur(function(s){var u=true,a=false,c,h=t,f;return o.scheduleRecursiveWithAbsolute(o.now(),function(t){a&&s.onNext(c);try{if(u){u=false}else{h=n(h)}a=e(h);if(a){c=r(h);f=i(h)}}catch(o){s.onError(o);return}if(a){t(f)}else{s.onCompleted()}})})};De.generateWithRelativeTime=function(t,e,n,r,i,o){ne(o)||(o=fe);return new Ur(function(s){var u=true,a=false,c,h=t,f;return o.scheduleRecursiveWithRelative(0,function(t){a&&s.onNext(c);try{if(u){u=false}else{h=n(h)}a=e(h);if(a){c=r(h);f=i(h)}}catch(o){s.onError(o);return}if(a){t(f)}else{s.onCompleted()}})})};Oe.delaySubscription=function(t,e){var n=t instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";var r=this;ne(e)||(e=fe);return new Ur(function(i){var o=new Kt;o.setDisposable(e[n](t,function(){o.setDisposable(r.subscribe(i))}));return o},this)};Oe.delayWithSelector=function(t,e){var n=this,r,i;if(k(t)){i=t}else{r=t;i=e}return new Ur(function(t){var e=new It,o=false,s=new Kt;function u(){s.setDisposable(n.subscribe(function(n){var r=Ut(i)(n);if(r===Tt){return t.onError(r.e)}var o=new Yt;e.add(o);o.setDisposable(r.subscribe(function(){t.onNext(n);e.remove(o);a()},function(e){t.onError(e)},function(){t.onNext(n);e.remove(o);a()}))},function(e){t.onError(e)},function(){o=true;s.dispose();a()}))}function a(){o&&e.length===0&&t.onCompleted()}if(!r){u()}else{s.setDisposable(r.subscribe(u,function(e){t.onError(e)},u))}return new It(s,e)},this)};Oe.timeoutWithSelector=function(t,e,n){if(arguments.length===1){e=t;t=en()}n||(n=ln(new Error("Timeout")));var r=this;return new Ur(function(i){var o=new Kt,s=new Kt,u=new Yt;o.setDisposable(u);var a=0,c=false;function h(t){var e=a;function r(){return a===e}var u=new Yt;s.setDisposable(u);u.setDisposable(t.subscribe(function(){r()&&o.setDisposable(n.subscribe(i));u.dispose()},function(t){r()&&i.onError(t)},function(){r()&&o.setDisposable(n.subscribe(i))}))}h(t);function f(){var t=!c;if(t){a++}return t}u.setDisposable(r.subscribe(function(t){if(f()){i.onNext(t);var n;try{n=e(t)}catch(r){i.onError(r);return}h(x(n)?Fe(n):n)}},function(t){f()&&i.onError(t)},function(){f()&&i.onCompleted()}));return new It(o,s)},r)};Oe.debounceWithSelector=function(t){var e=this;return new Ur(function(n){var r,i=false,o=new Kt,s=0;var u=e.subscribe(function(e){var u;try{u=t(e)}catch(a){n.onError(a);return}x(u)&&(u=Fe(u));i=true;r=e;s++;var c=s,h=new Yt;o.setDisposable(h);h.setDisposable(u.subscribe(function(){i&&s===c&&n.onNext(r);i=false;h.dispose()},n.onError.bind(n),function(){i&&s===c&&n.onNext(r);i=false;h.dispose()}))},function(t){o.dispose();n.onError(t);i=false;s++},function(){o.dispose();i&&n.onNext(r);n.onCompleted();i=false;s++});return new It(u,o)},e)};Oe.throttleWithSelector=function(t){return this.debounceWithSelector(t)};Oe.skipLastWithTime=function(t,e){ne(e)||(e=fe);var n=this;return new Ur(function(r){var i=[];return n.subscribe(function(n){var o=e.now();i.push({interval:o,value:n});while(i.length>0&&o-i[0].interval>=t){r.onNext(i.shift().value)}},function(t){r.onError(t)},function(){var n=e.now();while(i.length>0&&n-i[0].interval>=t){r.onNext(i.shift().value)}r.onCompleted()})},n)};Oe.takeLastWithTime=function(t,e){var n=this;ne(e)||(e=fe);return new Ur(function(r){var i=[];return n.subscribe(function(n){var r=e.now();i.push({interval:r,value:n});while(i.length>0&&r-i[0].interval>=t){i.shift()}},function(t){r.onError(t)},function(){var n=e.now();while(i.length>0){var o=i.shift();if(n-o.interval<=t){r.onNext(o.value)}}r.onCompleted()})},n)};Oe.takeLastBufferWithTime=function(t,e){var n=this;ne(e)||(e=fe);return new Ur(function(r){var i=[];return n.subscribe(function(n){var r=e.now();i.push({interval:r,value:n});while(i.length>0&&r-i[0].interval>=t){i.shift()}},function(t){r.onError(t)},function(){var n=e.now(),o=[];while(i.length>0){var s=i.shift();n-s.interval<=t&&o.push(s.value)}r.onNext(o);r.onCompleted()})},n)};Oe.takeWithTime=function(t,e){var n=this;ne(e)||(e=fe);return new Ur(function(r){return new It(e.scheduleWithRelative(t,function(){r.onCompleted()}),n.subscribe(r))},n)};Oe.skipWithTime=function(t,e){var n=this;ne(e)||(e=fe);return new Ur(function(r){var i=false;return new It(e.scheduleWithRelative(t,function(){i=true}),n.subscribe(function(t){i&&r.onNext(t)},r.onError.bind(r),r.onCompleted.bind(r)))},n)};Oe.skipUntilWithTime=function(t,e){ne(e)||(e=fe);var n=this,r=t instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new Ur(function(i){var o=false;return new It(e[r](t,function(){o=true}),n.subscribe(function(t){o&&i.onNext(t)},function(t){i.onError(t)},function(){i.onCompleted()}))},n)};Oe.takeUntilWithTime=function(t,e){ne(e)||(e=fe);var n=this,r=t instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new Ur(function(i){return new It(e[r](t,function(){i.onCompleted()}),n.subscribe(i))},n)};Oe.throttleFirst=function(t,e){ne(e)||(e=fe);var n=+t||0;if(n<=0){throw new RangeError("windowDuration cannot be less or equal zero.")}var r=this;return new Ur(function(t){var i=0;return r.subscribe(function(r){var o=e.now();if(i===0||o-i>=n){i=o;t.onNext(r)}},function(e){t.onError(e)},function(){t.onCompleted()})},r)};Oe.transduce=function(t){var e=this;function n(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}return new Ur(function(r){var i=t(n(r));return e.subscribe(function(t){try{i["@@transducer/step"](r,t)}catch(e){r.onError(e)}},function(t){r.onError(t)},function(){i["@@transducer/result"](r)})},e)};Oe.exclusive=function(){var t=this;return new Ur(function(e){var n=false,r=false,i=new Yt,o=new It;o.add(i);i.setDisposable(t.subscribe(function(t){if(!n){n=true;x(t)&&(t=Fe(t));var i=new Yt;o.add(i);i.setDisposable(t.subscribe(e.onNext.bind(e),e.onError.bind(e),function(){o.remove(i);n=false;if(r&&o.length===1){e.onCompleted()}}))}},e.onError.bind(e),function(){r=true;if(!n&&o.length===1){e.onCompleted()}}));return o},this)};Oe.exclusiveMap=function(t,e){var n=this,r=G(t,e,3);return new Ur(function(t){var e=0,i=false,o=true,s=new Yt,u=new It;u.add(s);s.setDisposable(n.subscribe(function(n){if(!i){i=true;innerSubscription=new Yt;u.add(innerSubscription);x(n)&&(n=Fe(n));innerSubscription.setDisposable(n.subscribe(function(i){var o;try{o=r(i,e++,n)}catch(s){t.onError(s);return}t.onNext(o)},function(e){t.onError(e)},function(){u.remove(innerSubscription);i=false;if(o&&u.length===1){t.onCompleted()}}))}},function(e){t.onError(e)},function(){o=true;if(u.length===1&&!i){t.onCompleted()}}));return u},this)};l.VirtualTimeScheduler=function(t){function e(){return this.toDateTimeOffset(this.clock)}function n(t,e){return this.scheduleAbsoluteWithState(t,this.clock,e)}function r(t,e,n){return this.scheduleRelativeWithState(t,this.toRelative(e),n)}function i(t,e,n){return this.scheduleRelativeWithState(t,this.toRelative(e-this.now()),n)}function o(t,e){e();return zt}Dt(s,t);function s(o,s){this.clock=o;this.comparer=s;this.isEnabled=false;this.queue=new qt(1024);t.call(this,e,n,r,i)}var u=s.prototype;u.add=J;u.toDateTimeOffset=J;u.toRelative=J;u.schedulePeriodicWithState=function(t,e,n){var r=new re(this,t,e,n);return r.start()};u.scheduleRelativeWithState=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsoluteWithState(t,r,n)};u.scheduleRelative=function(t,e){return this.scheduleRelativeWithState(e,t,o)};u.start=function(){if(!this.isEnabled){this.isEnabled=true;do{var t=this.getNext();if(t!==null){this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime);t.invoke()}else{this.isEnabled=false}}while(this.isEnabled)}};u.stop=function(){this.isEnabled=false};u.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0){throw new I}if(e===0){return}if(!this.isEnabled){this.isEnabled=true;do{var n=this.getNext();if(n!==null&&this.comparer(n.dueTime,t)<=0){this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime);n.invoke()}else{this.isEnabled=false}}while(this.isEnabled);this.clock=t}};u.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0){throw new I}if(n===0){return}this.advanceTo(e)};u.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0){throw new I}this.clock=e};u.getNext=function(){while(this.queue.length>0){var t=this.queue.peek();if(t.isCancelled()){this.queue.dequeue()}else{return t}}return null};u.scheduleAbsolute=function(t,e){return this.scheduleAbsoluteWithState(e,t,o)};u.scheduleAbsoluteWithState=function(t,e,n){var r=this;function i(t,e){r.queue.remove(o);return n(t,e)}var o=new Xt(this,t,i,e,this.comparer);this.queue.enqueue(o);return o.disposable};return s}(te);l.HistoricalScheduler=function(t){Dt(e,t);function e(e,n){var r=e==null?0:e;var i=n||w;t.call(this,r,i)}var n=e.prototype;n.add=function(t,e){return t+e};n.toDateTimeOffset=function(t){return new Date(t).getTime()};n.toRelative=function(t){return t};return e}(l.VirtualTimeScheduler);var Ur=l.AnonymousObservable=function(t){Dt(r,t);function e(t){return t&&k(t.dispose)?t:k(t)?Jt(t):zt}function n(t,n){var r=n[0],i=n[1];var o=Ut(i)(r);if(o===Tt){if(!r.fail(Tt.e)){return Mt(Tt.e)}}r.setDisposable(e(o))}function r(e,r){this.source=r;function i(t){var r=new Mr(t),i=[r,e];if(oe.scheduleRequired()){oe.scheduleWithState(i,n)}else{n(null,i)}return r}t.call(this,i)}return r}(De);var Mr=function(t){Dt(e,t);function e(e){t.call(this);this.observer=e;this.m=new Yt}var n=e.prototype;n.next=function(t){var e=Ut(this.observer.onNext).call(this.observer,t);if(e===Tt){this.dispose();Mt(e.e)}};n.error=function(t){var e=Ut(this.observer.onError).call(this.observer,t);this.dispose();e===Tt&&Mt(e.e)};n.completed=function(){var t=Ut(this.observer.onCompleted).call(this.observer);this.dispose();t===Tt&&Mt(t.e)};n.setDisposable=function(t){this.m.setDisposable(t)};n.getDisposable=function(){return this.m.getDisposable()};n.dispose=function(){t.prototype.dispose.call(this);this.m.dispose()};return e}(xe);var Pr=function(t){Dt(n,t);function e(t){return this.underlyingObservable.subscribe(t)}function n(n,r,i){t.call(this,e);this.key=n;this.underlyingObservable=!i?r:new Ur(function(t){return new It(i.getDisposable(),r.subscribe(t))})}return n}(De);var qr=l.Subject=function(t){function e(t){Ht(this);if(!this.isStopped){this.observers.push(t);return new hr(this,t)}if(this.hasError){t.onError(this.error);return zt}t.onCompleted();return zt}Dt(n,t);function n(){t.call(this,e);this.isDisposed=false,this.isStopped=false,this.observers=[];this.hasError=false}_t(n.prototype,Ee.prototype,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){Ht(this);if(!this.isStopped){this.isStopped=true;for(var t=0,e=N(this.observers),n=e.length;t<n;t++){e[t].onCompleted()}this.observers.length=0}},onError:function(t){Ht(this);if(!this.isStopped){this.isStopped=true;this.error=t;this.hasError=true;for(var e=0,n=N(this.observers),r=n.length;e<r;e++){n[e].onError(t)}this.observers.length=0}},onNext:function(t){Ht(this);if(!this.isStopped){for(var e=0,n=N(this.observers),r=n.length;e<r;e++){n[e].onNext(t)}}},dispose:function(){this.isDisposed=true;this.observers=null}});n.create=function(t,e){return new Ir(t,e)};return n}(De);var Lr=l.AsyncSubject=function(t){function e(t){Ht(this);if(!this.isStopped){this.observers.push(t);return new hr(this,t)}if(this.hasError){t.onError(this.error)}else if(this.hasValue){t.onNext(this.value);t.onCompleted()}else{t.onCompleted()}return zt}Dt(n,t);function n(){t.call(this,e);this.isDisposed=false;this.isStopped=false;this.hasValue=false;this.observers=[];this.hasError=false}_t(n.prototype,Ee,{hasObservers:function(){Ht(this);return this.observers.length>0},onCompleted:function(){var t,e;Ht(this);if(!this.isStopped){this.isStopped=true;var n=N(this.observers),e=n.length;if(this.hasValue){for(t=0;t<e;t++){var r=n[t];r.onNext(this.value);r.onCompleted()}}else{for(t=0;t<e;t++){n[t].onCompleted()}}this.observers.length=0}},onError:function(t){Ht(this);if(!this.isStopped){this.isStopped=true;this.hasError=true;this.error=t;for(var e=0,n=N(this.observers),r=n.length;e<r;e++){n[e].onError(t)}this.observers.length=0}},onNext:function(t){Ht(this);if(this.isStopped){return}this.value=t;this.hasValue=true},dispose:function(){this.isDisposed=true;this.observers=null;this.exception=null;this.value=null}});return n}(De);var Ir=l.AnonymousSubject=function(t){Dt(n,t);function e(t){return this.observable.subscribe(t)}function n(n,r){this.observer=n;this.observable=r;t.call(this,e)}_t(n.prototype,Ee.prototype,{onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}});return n}(De);l.Pauser=function(t){Dt(e,t);function e(){t.call(this)}e.prototype.pause=function(){this.onNext(false)};e.prototype.resume=function(){this.onNext(true)};return e}(qr);if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){u.Rx=l;
define(function(){return l})}else if(a&&c){if(h){(c.exports=l).Rx=l}else{a.Rx=l}}else{u.Rx=l}var Br=M()}).call(this)}).call(this,t("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:1}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.sendSlide=y;n.sendInput=m;n.listenInputs=w;n.listenSlide=E;function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true})}var o=t("rx");var s=r(o);var u=t("lodash.merge");var a=r(u);var c=t("firebase");var h=r(c);var f=new h["default"]("https://rxlides.firebaseio.com/");function l(t,e,n){t.onNext({snapshot:e,prevName:n})}function p(t,e){t.onNext({snapshot:e});t.onCompleted()}function d(t,e){observer.onError(e)}function v(t,e){var n;switch(e){case"value":case"child_removed":n=p;break;case"child_added":case"child_changed":case"child_moved":n=l;break}return s["default"].Observable.create(function(r){var i=t.on(e,n.bind(null,r),d.bind(null,r));return function(){return t.off(e,i)}}).publish().refCount()}function b(t,e){return s["default"].Observable.fromNodeCallback(t.set.bind(t))(e).publish().refCount()}function g(t,e){var n=t.push();return b(n,e).map(n)}function y(t){return b(f.child("slide"),t)}function m(t){return g(f.child("inputs"),t)}function w(){return v(f.child("inputs"),"child_added").pluck("snapshot").flatMap(function(t){return b(t.ref(),null).map(t.val())})}function E(){return v(f.child("slide"),"value").pluck("snapshot").map(function(t){return t.val()}).concat(v(f.child("slide"),"child_changed").pluck("snapshot").map(function(t){return i({},t.key(),t.val())})).scan(a["default"])}},{firebase:2,"lodash.merge":3,rx:20}],22:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=t("./remote_io");var o=t("rx");var s=r(o);function u(t){if(t.path){return t.path}var e=[];var n=t.target;while(n!=document.body){e.push(n);n=n.parentNode}return e}s["default"].Observable.fromEvent(document.body,"click").map(u).map(function(t){return t.find(function(t){return t.classList&&t.classList.contains("remote-button")})}).filter(function(t){return t}).map(function(t){return t.getAttribute("data-input")}).flatMap(i.sendInput).subscribe();(0,i.listenSlide)().pluck("name").subscribe(function(t){return document.getElementById("slide_name").textContent=t})},{"./remote_io":21,rx:20}]},{},[22]);
